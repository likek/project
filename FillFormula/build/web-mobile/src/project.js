require=function s(c,a,h){function r(e,t){if(!a[e]){if(!c[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[e]={exports:{}};c[e][0].call(o.exports,function(t){return r(c[e][1][t]||t)},o,o.exports,s,c,a,h)}return a[e].exports}for(var d="function"==typeof require&&require,t=0;t<h.length;t++)r(h[t]);return r}({BaseGameJS:[function(t,e,i){"use strict";cc._RF.push(e,"d5325ralz1KNpBY2dkj5IqD","BaseGameJS"),cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,paopao_node:cc.Node,feedback_node:cc.Node,loseTime_node:cc.Node,loseTime:0,time_node:cc.Node,question_node:cc.Node,quertionList_node:cc.Node,title_node:cc.Node},onLoad:function(){var t=this;document.addEventListener("resignActivePauseGame",function(){t.gotoBackground(),cc.director.pause(),cc.game.pause(),CONSOLE_LOG_OPEN&&console.log("app just resign active.")}),document.addEventListener("becomeActiveResumeGame",function(){cc.game.isPaused&&cc.game.resume(),cc.director.isPaused&&cc.director.resume(),t.gotoForeground(),CONSOLE_LOG_OPEN&&console.log("app just become active.")}),this.initFeedback(),this.answerTime=0,this.lastAnswerTime=0,this.answerContext="",this.countDown=300,this.timeCallback=this.timeCallbackFunc(),this.isShowLossTime=!1,this.nowQuestionID=0,this.questionArr=[],this.answerInfoArr=[],this.questionNumListJS=this.quertionList_node.getComponent("QuestionNumListJS"),this.quertionList_node.opacity=0,this.time_node.opacity=0,this.onLoadChild(),this.answerEnable=!1,this.network=this.node.getComponent("NetworkJS_Data"),this.network.sendXHR(this)},initFeedback:function(){var t=cc.instantiate(this.feedback_pref);this.feedback_node.addChild(t),this.feedbackJS=t.getChildByName("Fish").getComponent("FishFeedback")},onLoadChild:function(){},gotoBackground:function(){},gotoForeground:function(){},createPaopao:function(){for(var t=this.node.width,e=[120,40,160,80,200],i=1012/e.length,n=0;n<e.length;n++){(o=cc.instantiate(this.paopao_pref)).x=e[n],o.y=-i*n,this.paopao_node.addChild(o)}for(n=0;n<e.length;n++){var o;(o=cc.instantiate(this.paopao_pref)).x=t-e[n],o.y=-i*n,this.paopao_node.addChild(o)}},createAnswerInfo:function(t){var e=this.questionArr[this.nowQuestionID];if(e){var i={answerTime:this.answerTime-this.lastAnswerTime,leveLQuestionDetailNum:e.leveLQuestionDetailNum,levelQuestionDetailID:e.levelQuestionDetailID,answerStatus:t,answerContext:this.answerContext};this.answerInfoArr.push(i)}},showFeedback:function(t){0===this.nowQuestionID?this.feedbackJS.firstShowFeedback(this,t):this.feedbackJS.showFeedback(this,t)},firstFeedbackFinish:function(){},feedbackFinish:function(){this.nowQuestionID+=1;var t=this.questionArr[0].interactiveJson.totalcd;if(this.nowQuestionID>=this.questionArr.length||this.countDown-this.answerTime<=0&&t){CONSOLE_LOG_OPEN&&console.log("答完了");for(var e=this.questionArr.length-this.nowQuestionID,i=0;i<e;i++)this.answerTime=0,this.lastAnswerTime=0,this.createAnswerInfo("2"),this.nowQuestionID+=1;this.isIts&&this.settlementJs.reset(),this.network.gameOver(this.answerInfoArr)}else this.network.gameLoadProgress(this.nowQuestionID+1,this.questionArr.length),!this.isIts&&this.deleteOption(),this.settlementJs.reset(),!this.isIts&&this.startloadOption()},showLossTime:function(){this.answerTime+=this.loseTime,this.isShowLossTime=!0,this.loseTime_node.opacity=255;var t=cc.callFunc(function(t){this.isShowLossTime=!1,this.loseTime_node.opacity=0},this);this.loseTime_node.runAction(cc.sequence(cc.fadeTo(1,0),t))},timeCallbackFunc:function(){return function(){this.answerTime+=1,this.scheduleTime+=1;var t=this.countDown-this.answerTime;t<=0?(CONSOLE_LOG_OPEN&&console.log("时间到"),this.timeout(),this.isShowFeed=!0,this.answerTime=this.countDown,this.timeLabel.string="00:00",this.createAnswerInfo("2"),this.showFeedback(3),this.answerTime>this.scheduleTime&&this.unschedule(this.timeCallback)):this.timeLabel.string=this.timeFormat(t)}},timeFormat:function(t){var e=Math.floor(t/60),i=t%60,n=i<10?"0"+i:i;return 59<t?(e<10?"0"+e:e)+":"+n:"00:"+n},timeout:function(){},showSchedule:function(){this.scheduleTime=0,this.schedule(this.timeCallback,1,this.countDown-1)},deleteOption:function(){},createOption:function(t){},selectedOption:function(t){this.nowQuestionID=t,this.deleteOption();var e=this;setTimeout(function(){e.startloadOption()},0)},startloadOption:function(){this.isIts&&this.questionNumListJS.changeOptionDisable();this.questionArr[this.nowQuestionID];this.timeLabel.string=this.timeFormat(this.countDown),this.answerTime=0,!this.isIts&&this.showSchedule(),this.isIts&&this.questionNumListJS.changeOptionEnable(),this.isShowFeed=!1},startLoadGame:function(t){this.questionArr=t,this.quertionList_node.opacity=this.isIts?255:0,this.time_node.opacity=this.isIts?0:255,this.isIts&&t&&0<t.length&&this.questionNumListJS.init(t.length,this.selectedOption.bind(this)),REQUEST_URL?this.requestAllUrls():this.startloadOption()},requestAllUrls:function(){for(var t=[],e=0;e<this.questionArr.length;e++){if(this.questionArr[e].quescontimgAry instanceof Array)for(var i=0;i<this.questionArr[e].quescontimgAry.length;i++)t.push(this.questionArr[e].quescontimgAry[i]);if(this.questionArr[e].optionsArr instanceof Array)for(var n=0;n<this.questionArr[e].optionsArr.length;n++)this.questionArr[e].optionsArr[n].optioncontimg&&t.push(this.questionArr[e].optionsArr[n].optioncontimg)}var o=this;cc.loader.load(t,function(t,e){t?o.network.gameLoadFailed(1):(o.spriteMaps=e.map,o.startloadOption())})},getSpriteFrame:function(t){if(!t||0==t.length)return null;var e=this.spriteMaps[t].content;return e instanceof cc.Texture2D?new cc.SpriteFrame(e):null},selectAnswer:function(t,e){this.isShowFeed||this.isShowLossTime||(e?(CONSOLE_LOG_OPEN&&console.log("答对了"),this.rightSelect+=1,t.showParticle(),this.rightSelect>=this.count&&(this.unschedule(this.timeCallback),this.isShowFeed=!0,this.createAnswerInfo("1"),this.scheduleOnce(function(){this.showFeedback(1)},1))):(CONSOLE_LOG_OPEN&&console.log("答错了"),this.showLossTime()))},onDestroy:function(){document.removeEventListener("resignActivePauseGame"),document.removeEventListener("becomeActiveResumeGame")},setGameName:function(t){this.title_node.getComponent("TitleJS").init(t)},setPlatform:function(t){this.platform=t,this.isIts="its"==t;var e=this.isIts;this.quertionList_node.active=!!e,this.time_node.active=!e},resetOption:function(){0!=this.moveOptionTag&&(this.option_node.getChildByTag(this.moveOptionTag).getComponent("Option").reloadState(),this.moveOptionTag=0)},changeMoveTag:function(t){return!this.isShowFeed&&((0===this.moveOptionTag||this.moveOptionTag===t||0===t)&&(this.moveOptionTag=t,!0))}}),cc._RF.pop()},{}],ColliderListener:[function(t,e,i){"use strict";cc._RF.push(e,"b0b466dPFFI1ZCDMEewg3qk","ColliderListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){this.node.isCollisioned=!0,this.node.opacity=100},onCollisionExit:function(t,e){CONSOLE_LOG_OPEN&&console.log("on collision exit"),this.node.isCollisioned=!1,this.node.opacity=255}}),cc._RF.pop()},{}],FormulaItem:[function(t,e,i){"use strict";cc._RF.push(e,"724daFeeLpAw7+MWYs7LRA6","FormulaItem"),cc.Class({extends:cc.Component,properties:{content:""},start:function(){}}),cc._RF.pop()},{}],GameJS:[function(require,module,exports){"use strict";cc._RF.push(module,"d92c8sRpIBMBKs/RzLIjTLN","GameJS");var BaseGameJS=require("BaseGameJS");cc.Class({extends:BaseGameJS,properties:{optionItem_pref:cc.Prefab,settlePrefab:cc.Prefab,resetBtn:cc.Node,commitBtn:cc.Node,winAudio:cc.AudioClip,loseAudio:cc.AudioClip,resetAudio:cc.AudioClip,optionAudio:cc.AudioClip,option_outAudio:cc.AudioClip,formulaItem:cc.Prefab,formulaContainer:cc.Node,optionsPrefab:cc.Prefab,optionsBgNode:cc.Node,questionBg:cc.Node,dragNode:cc.Node},onLoadChild:function(){this._super(),this.scaleNode=this.node.getChildByName("scale"),this.option_node=this.scaleNode.getChildByName("option_node"),this.tipsNode=this.node.getChildByName("TipsNode"),this.rightFeedbackNode=this.scaleNode.getChildByName("rightFeedback"),this.tipsNode&&(this.tipsNode.active=!0),this.answerItemPool=new cc.NodePool,this.changeMoveTag(0),this.initToast(),cc.director.getCollisionManager().enabled=!0,this.tipsFinished=!1,this.tipsIndex=0,this.tipsCount=0},initToast:function(){var t=this.node.getChildByName("scale").getChildByName("efailed");this.efailedJs=t.getComponent("efailed"),this.efailedJs.game=this},tipsFinishedCall:function(){this.tipsNode.removeFromParent(!0),this.tipsNode.destroy(),this.tipsOptionNode=null,this.tipsFormulaNode=null,this.tipsFinished=!0},initFeedback:function(){this.settlement=cc.instantiate(this.settlePrefab),this.settlementJs=this.settlement.getComponent("settlement"),(this.settlementJs.game=this).node.getChildByName("feedback_node").addChild(this.settlement),this.settlement.active=!1},gotoBackground:function(){for(var t=this.option_node.children[0].children,e=0;e<t.length;e++){var i=t[e],n=i.getComponent("OptionJS");if(n.canMove){i.stopAllActions(),n.reloadState();break}}var o=this.node.getChildByName("button_node").getChildByName("commit"),s=this.node.getChildByName("button_node").getChildByName("cancel");o.setScale(1,1),s.setScale(1,1),o._pressed=!1,o._hovered=!1,s._pressed=!1,s._hovered=!1,o.normalSprite=this.commitBtnNSF,o.hoverSprite=this.commitBtnNSF,s.normalSprite=this.resetBtnNSF,s.hoverSprite=this.resetBtnNSF},timeout:function(){},deleteOption:function(){},createOption:function(t){if(this.option_node.removeAllChildren(),t&&t.length);else{this.option_node.addChild(cc.instantiate(this.optionsPrefab));for(var e=this.option_node.children[0].children,i=void 0,n=void 0,o=0;o<e.length;o++)(i=e[o]).tag=100+o,(n=i.getComponent("OptionJS"))&&(n.init(this,{},4),n.updateState(!0))}},createFormulaItem:function(t){this.formulaContainer.removeAllChildren();for(var e,i,n,o=t.match(/\(\d+|\d+\)|\d+|\_|\+|\-|\*|\/|\=/g),s=0;s<o.length;s++)e=o[s],i=cc.instantiate(this.formulaItem),this.formulaContainer.addChild(i),n=i.getComponent("FormulaItem"),"_"===e?(i.getChildByName("bg").active=!0,i.getChildByName("content").getComponent(cc.Label).string="",n.content=null):(i.getChildByName("bg").active=!1,i.getChildByName("content").getComponent(cc.Label).string=e.replace("*","×").replace("/","÷"),n.content=e,i.getComponent(cc.BoxCollider).destroy()),i.x=i.width*s-i.width*o.length/2+i.width/2,i.y=40},startloadOption:function(){this.updateGameState(!0),this.isShowFeed=!1;var t=this.currQuestion=this.questionArr[this.nowQuestionID];this.questionBgNode=this.scaleNode.getChildByName("questionBg"),this.questionBgNode.getChildByName("questionLabel").getComponent(cc.Label).string=t.qescont,t.quescontimgAry[0]&&0<t.quescontimgAry[0].length?(this.questionBgNode.getChildByName("questionLabel").active=!1,this.questionBgNode.getChildByName("questionPic").active=!0):(this.questionBgNode.getChildByName("questionPic").active=!1,this.questionBgNode.getChildByName("questionLabel").active=!0),this.createOption(t.optionsArr),this.checkFormulaStr(t.formula)?this.createFormulaItem(t.formula):CONSOLE_LOG_OPEN&&console.warn("不是等式:"+this.nowQuestionID);var e=this.questionArr[0].interactiveJson.totalcd;if(0!==this.nowQuestionID||this.tipsFinished?(this.resetBtn.getComponent(cc.Button).interactable=!0,this.commitBtn.getComponent(cc.Button).interactable=!0,this.tipsFormulaNode=null):(this.resetBtn.getComponent(cc.Button).interactable=this.tipsFinished,this.commitBtn.getComponent(cc.Button).interactable=this.tipsFinished),0===this.nowQuestionID&&e||!e){this.answerTime=0;var i=parseInt(t.interactiveJson.countDown);0<i&&(this.countDown=i),this.timeLabel.string=this.timeFormat(this.countDown),this.tipsCount=t.formula.match(/\_/g).length}this.tipsFinished?(!this.isIts&&this.showSchedule(),e&&(this.lastAnswerTime=this.answerTime),this.changeMoveTag(0)):0===this.nowQuestionID?(this.tipsIndex=0,this.checkFormulaStr(t.formula)&&this.nextTipsAnimation(t.formula)):(this.pauseTipsAnimation(),this.changeMoveTag(0)),this.isIts&&this.questionNumListJS.changeOptionEnable(),this.optionsBgNode.getComponent(sp.Skeleton).setAnimation(0,"in",!1),this.questionBg.opacity=0,this.questionBg.stopAllActions(),this.questionBg.runAction(cc.sequence(cc.delayTime(.6),cc.fadeIn(1))),this.formulaContainer.opacity=0,this.formulaContainer.stopAllActions(),this.formulaContainer.runAction(cc.sequence(cc.delayTime(.6),cc.fadeIn(1))),this.time_node.opacity=0,this.time_node.stopAllActions(),this.time_node.runAction(cc.sequence(cc.delayTime(.6),cc.fadeIn(1))),this.resetBtn.setPosition(this.resetBtn.position.x,this.resetBtn.y-this.resetBtn.height),this.resetBtn.runAction(cc.sequence(cc.delayTime(0),cc.moveBy(.5,0,this.resetBtn.height))),this.commitBtn.setPosition(this.commitBtn.position.x,this.commitBtn.y-this.commitBtn.height),this.commitBtn.runAction(cc.sequence(cc.delayTime(0),cc.moveBy(.5,0,this.commitBtn.height))),this.title_node.setPosition(this.title_node.position.x,this.title_node.y+280),this.title_node.runAction(cc.sequence(cc.delayTime(0),cc.moveBy(.5,0,-280)))},checkFormulaStr:function(t){return/^((\d+|\(\d+|\d+\))[\+\-\*\/\_])*(\d+|\(\d+|\d+\))\=\d+$/.test(t)&&(t.match(/\(/g)&&t.match(/\(/g).length)===(t.match(/\)/g)&&t.match(/\)/g).length)},selectAnswer:function(t){this.isShowFeed||this.isShowLossTime||(this.unschedule(this.timeCallback),this.isShowFeed=!0,this.updateGameState(!1),t?(CONSOLE_LOG_OPEN&&console.log("答对了"),this.createAnswerInfo("1")):(CONSOLE_LOG_OPEN&&console.log("答错了"),this.createAnswerInfo("2")),this.showFeedback(t?1:2))},showFeedback:function(t){var e=this;if(1===t?(AUDIO_OPEN&&this.playWinAudio(),this.rightFeedbackNode.getComponent(sp.Skeleton).setAnimation(0,"right_atmosphere",!1)):2===t?AUDIO_OPEN&&this.playLoseAudio():3===t&&AUDIO_OPEN&&this.playLoseAudio(),1===t||2===t)for(var i=1===t?"right":"error",n=this.formulaContainer.children,o=void 0,s=0;s<n.length;s++)(o=n[s].getComponent("FormulaItem"))&&o.markNode instanceof cc.Node&&(o.markNode.getComponent("OptionJS").resetColor(),o.markNode.getChildByName("bg").getComponent(sp.Skeleton).setAnimation(0,i,!1));this.scheduleOnce(function(){switch(t){case 1:e.settlementJs.playWinAnim(e.feedbackFinish);break;case 2:e.settlementJs.playLoseAnim(e.feedbackFinish);break;case 3:e.settlementJs.playTimeUpAnim(e.feedbackFinish)}setTimeout(function(){e.isShowFeed=!1},1100)},1)},updateGameState:function(t){t?(this.question_node.resumeSystemEvents(!0),this.option_node.resumeSystemEvents(!0)):(this.question_node.pauseSystemEvents(!0),this.option_node.pauseSystemEvents(!0))},otherClicked:function(){this.playCancelAudio(),this.isShowFeed},resetClicked:function(){var n=this;this.isShowFeed||this.isShowAnim||function(){for(var t,e=n.formulaContainer.children,i=0;i<e.length;i++)(t=e[i].getComponent("FormulaItem")).markNode instanceof cc.Node&&t.markNode.getComponent("OptionJS").reloadState();n.changeMoveTag(0),n.resetBtn.getComponent(cc.Button).interactable=!0,n.commitBtn.getComponent(cc.Button).interactable=!0,n.updateGameState(!0)}()},confirmClicked:function confirmClicked(){var _this3=this,cb=function cb(){for(var array=_this3.formulaContainer.children,isEqual=!0,formulaStr="",i=0,item,itemJS;i<array.length;i++){if(item=array[i],itemJS=item.getComponent("FormulaItem"),!itemJS.content)return _this3.selectAnswer(!1);formulaStr+=itemJS.content.replace("=","===")}isEqual=eval(formulaStr),_this3.selectAnswer(isEqual),_this3.tipsFinished||0!==_this3.nowQuestionID||_this3.tipsFinishedCall(),setTimeout(function(){_this3.resetBtn.getComponent(cc.Button).interactable=!0,_this3.commitBtn.getComponent(cc.Button).interactable=!1},0)};this.isShowFeed||cb()},playWinAudio:function(){this.playAudio(this.winAudio)},playLoseAudio:function(){this.playAudio(this.loseAudio)},playCancelAudio:function(){this.playAudio(this.resetAudio)},playOptionAudio:function(){this.playAudio(this.optionAudio)},playOptionOutAudio:function(){this.playAudio(this.option_outAudio)},playAudio:function(t){AUDIO_OPEN&&cc.audioEngine.play(t,!1,1)},pauseTipsAnimation:function(){this.tipsNode.pauseAllActions();var t=this.tipsOptionNode.convertToWorldSpaceAR(cc.p(0,0));(t=this.tipsNode.parent.convertToNodeSpaceAR(t)).x+=this.tipsNode.width/3,t.y-=this.tipsNode.height/3,this.tipsNode.setPosition(t),this.tipsNode.active=!1},resumeTipsAnimation:function(){this.tipsNode.resumeAllActions(),this.tipsNode.active=!0},nextTipsAnimation:function(){var t=this;if(this.tipsNode.stopAllActions(),this.tipsNode.active=!0,this.tipsIndex===this.tipsCount){var e=this.commitBtn;e.getComponent(cc.Button).interactable=!0;var i=e.convertToWorldSpaceAR(cc.p(0,0));(i=this.tipsNode.parent.convertToNodeSpaceAR(i)).x+=this.tipsNode.width/3,i.y-=this.tipsNode.height/3-e.height/2,this.tipsNode.setPosition(i),this.tipsNode.runAction(cc.sequence(cc.scaleTo(.6,.87),cc.scaleTo(.2,1.2),cc.callFunc(function(){}))).repeatForever(),this.changeMoveTag(0),this.changeMoveTag(999)}else{var n=this.currQuestion.formula;if(!n.match(/\_/g))return void this.tipsFinishedCall();var o=this.getAnsower(n);if(!o)return void(CONSOLE_LOG_OPEN&&console.warn("此等式没有答案"));var s=this.getOptionNodeByMark(o[this.tipsIndex].value),c=this.getEmptyFormulaNodeByIndex(this.tipsIndex);this.changeMoveTag(0),this.changeMoveTag(s.tag),this.tipsOptionNode=s,this.tipsFormulaNode=c;var a=s.convertToWorldSpaceAR(cc.p(0,0));(a=this.tipsNode.parent.convertToNodeSpaceAR(a)).x+=this.tipsNode.width/3,a.y-=this.tipsNode.height/3;var h=c.convertToWorldSpaceAR(cc.p(0,0));(h=this.tipsNode.parent.convertToNodeSpaceAR(h)).x+=this.tipsNode.width/3,h.y-=this.tipsNode.height/3,this.tipsNode.setPosition(a),this.tipsNode.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(1,h),cc.callFunc(function(){t.tipsNode.setPosition(a)}))).repeatForever()}this.tipsIndex++},getEmptyFormulaNodeByIndex:function(t){for(var e=this.formulaContainer.children,i=0,n=0;n<e.length;n++)if(!e[n].getComponent("FormulaItem").content){if(0===t)return e[n];if(i===t)return e[n];i++}},getOptionNodeByMark:function(t){for(var e=this.option_node.children[0].children,i=0;i<e.length;i++)if(e[i].getComponent("OptionJS").content===t)return e[i]},getAnsower:function(t){var e=t.match(/\(\d+|\d+\)|\d+|\_|\+|\-|\*|\/|\=/g),i=["+","-","*","/"];if(e.indexOf("_")===e.lastIndexOf("_")){for(var n=0;n<i.length;n++)if(window.eval(e.join("").replace("_",i[n]).replace("=","===")))return[{index:e.indexOf("_"),value:i[n]}]}else{var o,s,c=null;o=e.indexOf("_"),s=e.lastIndexOf("_");for(var a=0;a<i.length;a++){(c=e.slice())[o]=i[a];for(var h=0;h<i.length;h++)if(c[s]=i[h],window.eval(c.join("").replace("=","===")))return[{index:o,value:i[a]},{index:s,value:i[h]}]}}}}),cc._RF.pop()},{BaseGameJS:"BaseGameJS"}],LocalSaveJS:[function(t,e,i){"use strict";cc._RF.push(e,"f4c57nVhA1DEK8uDdBUQDFX","LocalSaveJS"),cc.Class({extends:cc.Component,properties:{},save:function(t,e){var i=cc.sys.localStorage;i?function(t,e,i){var n="";null!=i&&(n="; expires="+(n=new Date((new Date).getTime()+1e3*i)).toGMTString());n+="; path=/",document.cookie=t+"="+escape(e)+n}(t,e):i.setItem(t,e)},load:function(t){var e=cc.sys.localStorage;return e?function(t){var e="",i=t+"=";if(0<document.cookie.length){var n=document.cookie.indexOf(i);if(-1!=n){n+=i.length;var o=document.cookie.indexOf(";",n);-1==o&&(o=document.cookie.length),e=unescape(document.cookie.substring(n,o))}}return e}(t):e.getItem(t)}}),cc._RF.pop()},{}],NetworkJS_Data:[function(t,e,i){"use strict";cc._RF.push(e,"8febaBdc6ZNMK6NnHe3UpZb","NetworkJS_Data");var n=t("NetworkJS");cc.Class({extends:n,properties:{},analysisDict:function(t){var e=t.interactiveJson;if(e&&0!=e.length){"string"==typeof e&&(e=JSON.parse(e));for(var i=t.optionandanswers[0],n=i.options,o=[],s=0;s<n.length;++s){var c=n[s],a=c.optioncontent,h={optionNo:c.optionno,optionContent:this.removeSpan(a),optioncontimg:c.optioncontimg,optionFlip:this.removeSpan(a)};o.push(h)}var r=t.quescontimg;if(e.countDown&&e.formula||this.gameLoadFailed(2),o||0<o.length)return{answerTime:"0",levelQuestionDetailID:t.questionid,leveLQuestionDetailNum:t.orderid,qescont:this.removeSpan(t.qescont),optionsArr:o,rightOptionNo:this.removeSpan(i.rightanswer),questionPositon:e.questionPositon,quescontimgAry:r,question_img:0<r.length&&r[0],answer_img:1<r.length&&r[1],answer_finish:2<r.length&&r[2],interactiveJson:e,formula:e.formula};this.gameLoadFailed(2)}else this.gameLoadFailed(2)}}),cc._RF.pop()},{NetworkJS:"NetworkJS"}],NetworkJS:[function(t,e,i){"use strict";cc._RF.push(e,"cd804MyCfRHi4BLiy+Orkth","NetworkJS");cc.Class({extends:cc.Component,properties:{},GetQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null},sendXHR:function(t){this.racingjs=t;var e=cc.loader.getXMLHttpRequest();this.streamXHREventsToLabel(e,"GET");var i=this.GetQueryString("fileUrl");e.open("GET",i),cc.sys.isNative&&e.setRequestHeader("Accept-Encoding","gzip,deflate"),e.timeout=6e4,e.send()},streamXHREventsToLabel:function(t,e,i){var n=i||function(t){return e+" Response: "+t.substring(0,30)+"..."},o=this;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(CONSOLE_LOG_OPEN&&console.log(n(t.responseText)),200===t.status?o.analysisData(t.responseText):(CONSOLE_LOG_OPEN&&console.log("There was a problem with the request."),o.gameLoadFailed(1)))}},analysisData:function(t){var e=JSON.parse(t);if(e||0<e.length){for(var i=[],n=0;n<e.length;++n){var o=this.analysisDict(e[n]);if(!o)break;i.push(o)}i&&0<i.length&&e.length==i.length?(this.racingjs.setPlatform(this.GetQueryString("platform")),this.racingjs.setGameName(this.GetQueryString("gameName")),this.racingjs.startLoadGame(i),this.gameLoadSuccess(i.length)):this.gameLoadFailed(2)}else this.gameLoadFailed(2)},analysisDict:function(t){var e=t.interactiveJson;if(e&&0!=e.length)return"string"==typeof e&&(e=JSON.parse(e)),{answerTime:"0",levelQuestionDetailID:t.questionid,leveLQuestionDetailNum:t.orderid,qescont:this.removeSpan(t.qescont),interactiveJson:e};this.gameLoadFailed(2)},removeSpan:function(t){var e=t.replace("<span>","");return e=e.replace("</span>","")},gameLoadFailed:function(t){if(1==t){var e=encodeURI("errcode=10001&errmsg=下载失败");window.location.href="optionBlank://gameLoadFailed?"+e}else{e=encodeURI("errcode=10002&errmsg=解析失败");window.location.href="optionBlank://gameLoadFailed?"+e}},gameLoadSuccess:function(t){var e=encodeURI("isShow=1&isHideNativeProgressBtn=0&isHideNativeBackBtn=0&totalNumber="+t);window.location.href="optionBlank://gameLoadSuccess?"+e},gameOver:function(t){var e=encodeURI(JSON.stringify(t));window.location.href="optionBlank://gameOver?status=1&data="+e},gameLoadProgress:function(t,e){var i=encodeURI("isShow=1&isHideNativeProgressBtn=0&isHideNativeBackBtn=0&nowNumber="+t+"&totalNumber="+e);window.location.href="optionBlank://gameLoadProgress?"+i}});cc._RF.pop()},{}],OptionJS1:[function(t,e,i){"use strict";cc._RF.push(e,"cec4fBlGJ1Nw5Qzjr1JzrRx","OptionJS1");var s=new cc.Enum({unable:0,nomal:1,right:2,wrong:3});cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.show=this.node.getChildByName("show"),this.anim=this.node.getChildByName("anim"),this.right=this.node.getChildByName("right"),this.wrong=this.node.getChildByName("wrong"),this.text=this.node.getChildByName("text");var t=this;document.addEventListener("resignActivePauseGame",function(){t.reloadState()})},reloadState:function(){},init:function(t,e,i,n){this.gameJS=t;var o=this;n?(this.text.active=!0,this.text.getComponent(cc.Label).string=e,cc.loader.loadRes("texture",cc.SpriteAtlas,function(t,e){var i=e.getSpriteFrame("fang2");o.show.getComponent(cc.Sprite).spriteFrame=i,cc.loader.releaseAsset("texture",cc.SpriteAtlas)}),this.state=s.unable,this.show.opacity=255,this.anim.opacity=0,this.right.opacity=0,this.wrong.opacity=0,this.updateState(!1)):(this.text.active=!1,this.text.getComponent(cc.Label).string="",cc.loader.loadRes("texture",cc.SpriteAtlas,function(t,e){var i=e.getSpriteFrame("fang1");o.show.getComponent(cc.Sprite).spriteFrame=i,cc.loader.releaseAsset("texture",cc.SpriteAtlas)}),this.state=s.nomal,this.show.opacity=255,this.anim.opacity=0,this.right.opacity=0,this.wrong.opacity=0)},optionClick:function(){this.updateState(!1),this.node.parent.pauseSystemEvents(!0),this.gameJS.playOptionAudio()},updateState:function(t){this.node.getComponent(cc.Button).interactable=t},resetState:function(){}}),cc._RF.pop()},{}],OptionJS:[function(t,e,i){"use strict";cc._RF.push(e,"f68b8bKtqdKzZB+uUCDXYlU","OptionJS");cc.Class({extends:cc.Component,properties:{parent_node:cc.Node,canMove:!1,exchangeParent:!0,content:""},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touch_start.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.touch_end.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_cancel.bind(this),this.node),this.audioPool=[];var t=this;document.addEventListener("resignActivePauseGame",function(){t.resetState()}),this.parent_node=this.parent_node.parent},onCollisionEnter:function(t,e){if(this.gameJS.tipsFinished||this.gameJS.tipsFormulaNode===t.node||0!==this.gameJS.nowQuestionID){var i=t.getComponent("FormulaItem");i&&!i.content?(this.node.isCollisioned=!0,this.sheepNode=t.node):i&&i.content&&(i.markNode&&i.markNode.getComponent("OptionJS").reloadState(),this.node.isCollisioned=!0,this.sheepNode=t.node)}},onCollisionStay:function(t,e){if(this.gameJS.tipsFinished||this.gameJS.tipsFormulaNode===t.node||0!==this.gameJS.nowQuestionID){var i=t.getComponent("FormulaItem");i&&(i.markNode=e.node)}},onCollisionExit:function(t,e){if(this.gameJS.tipsFinished||this.gameJS.tipsFormulaNode===t.node||0!==this.gameJS.nowQuestionID){this.node.isCollisioned=!1;var i=t.getComponent("FormulaItem");i&&(i.content=null,i.markNode=null,this.sheepNode=null)}},init:function(t,e,i){this.node.opacity=255,this.startx=this.node.x,this.starty=this.node.y,this.gameJS=t,this.option=e,this.hideContent()},hideContent:function(){this.node.getChildByName("bg").active=!1,this.node.getChildByName("content").active=!1},displayContent:function(){this.node.getChildByName("bg").active=!0,this.node.getChildByName("content").active=!0},setWhiteColor:function(){this.node.getChildByName("bg").opacity=0},resetColor:function(){this.node.getChildByName("bg").opacity=255},cloneOption:function(t){var e=cc.instantiate(this.node);e.tag=e.tag+9,t.addChild(e),this.gameJS.tipsFinished||(this.gameJS.tipsOptionNode=e);var i=e.getComponent("OptionJS");i&&(i.init(this.gameJS,{},4),i.parent_node=this.parent_node,i.canMove=!0,i.canMove=!0,i.content=this.content,i.exchangeParent=this.exchangeParent,i.updateState(!0))},touch_start:function(t){if(this.canMove=this.gameJS.changeMoveTag(this.node.tag),this.canMove){this.gameJS.tipsFinished||this.gameJS.pauseTipsAnimation(),this.gameJS.playOptionAudio(),this.dragX=this.node.x,this.dragY=this.node.y,this.displayContent(),this.setWhiteColor(),"option_node"===this.node.parent.name&&this.cloneOption(this.node.parent);var e=this.node.convertToWorldSpaceAR(cc.p(0,0));this.node.parent=this.gameJS.dragNode;var i=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(i)}},touch_end:function(t){this.canMove&&(this.gameJS.playOptionOutAudio(),this.check()?this.optionClick():this.reloadState())},touch_move:function(t){if(this.canMove){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y;var i=t.getTouches(),n=this.gameJS.scaleNode.parent,o=n.convertTouchToNodeSpaceAR(i[0]);Math.abs(o.x)<n.width/2-50&&Math.abs(o.y)<n.height/2-30||(CONSOLE_LOG_OPEN&&cc.log("出屏了"),this.reloadState())}},touch_cancel:function(t){this.canMove},check:function(){return CONSOLE_LOG_OPEN&&cc.log("this.node.isCollisioned="+this.node.isCollisioned),this.node.isCollisioned},resetState:function(){},reloadState:function(){if(this.canMove=!1,this.exchangeParent){var t=this.node.convertToWorldSpaceAR(cc.p(0,0)),e=this.parent_node.convertToNodeSpaceAR(t);this.node.setPosition(e),this.node.parent=this.parent_node,this.node.parent.zIndex=1}var i=cc.moveTo(this.calculateAnimTime(),cc.p(this.startx,this.starty));this.node.runAction(cc.sequence(i,cc.callFunc(function(){this.node.setPosition(this.startx,this.starty),this.node.parent.zIndex=0,this.updateState(!0),this.gameJS.moveOptionTag===this.node.tag&&(this.gameJS.changeMoveTag(0),this.gameJS.tipsFinished||0!==this.gameJS.nowQuestionID||this.gameJS.changeMoveTag(this.gameJS.tipsOptionNode.tag)),this.hideContent(),this.node.destroy(),this.node.removeFromParent(),this.gameJS.tipsFinished||0!==this.gameJS.nowQuestionID||this.gameJS.resumeTipsAnimation()},this)))},calculateAnimTime:function(){var t=cc.pDistance(this.node.position,cc.p(this.startx,this.starty))/1e3;return.2*(t=1<t?1:t)},optionClick:function(){this.exchangeParent&&(this.node.parent=this.sheepNode,this.node.setPosition(0,0)),this.canMove=!1,this.gameJS.changeMoveTag(0),this.gameJS.tipsFinished||0!==this.gameJS.nowQuestionID||(this.gameJS.changeMoveTag(this.gameJS.tipsOptionNode.tag),this.gameJS.nextTipsAnimation()),this.sheepNode.getComponent("FormulaItem").content=this.content},updateState:function(t){t?this.node.resumeSystemEvents(!0):this.node.pauseSystemEvents(!0)}}),cc._RF.pop()},{}],QuestionNumJS:[function(t,e,i){"use strict";cc._RF.push(e,"511ccnUhPdEV5sMRHkmPNf2","QuestionNumJS"),cc.Class({extends:cc.Component,properties:{label:cc.Label,selected_node:cc.Node},onLoad:function(){this.isSelect=!1,this.sp=this.node.getComponent("cc.Sprite")},init:function(t,e){this.gameJS=t;var i=""+((this.idx=e)+1);this.label.string=i,this.selected_node.opacity=0},onClick:function(){this.gameJS.changQustion(this.idx)},setSelected:function(t){this.isSelect=t,this.selected_node.opacity=t?255:0}}),cc._RF.pop()},{}],QuestionNumListJS:[function(t,e,i){"use strict";cc._RF.push(e,"7a656I23ulAK7kDASga7f0X","QuestionNumListJS"),cc.Class({extends:cc.Component,properties:{lastBtn:cc.Node,nextBtn:cc.Node,quertionNum:cc.Prefab,questionNum_node:cc.Node},onLoad:function(){this.itemPool=new cc.NodePool,this.defaultLen=7,this.targetIdx=0,this.nowQuestionID=0,this.qusetionItemPool=new cc.NodePool,this.qusetionNumJSArr=[],this.selectedQusetionJS=null},init:function(t,e){this.maxlen=t,this.cb=e,t<this.defaultLen?(this.lastBtn.opacity=0,this.nextBtn.opacity=0):(this.lastBtn.opacity=255,this.nextBtn.opacity=255);for(var i=0;i<t;i++){var n=cc.instantiate(this.quertionNum),o=n.getComponent("QuestionNumJS");this.qusetionNumJSArr.push(n),o.init(this,i)}this.changeQustionList(),this.selectedQusetionJS=this.qusetionNumJSArr[this.nowQuestionID].getComponent("QuestionNumJS"),this.selectedQusetionJS.setSelected(!0)},clickLast:function(){this.targetIdx>=this.defaultLen&&(this.targetIdx-=this.defaultLen,this.changeQustionList())},clickNext:function(){this.targetIdx+this.defaultLen<this.maxlen&&(this.targetIdx+=this.defaultLen,this.changeQustionList())},changeQustionList:function(){this.questionNum_node.removeAllChildren();for(var t=this.targetIdx,e=Math.min(this.defaultLen,this.maxlen-t),i=0;i<e;i++){var n=this.qusetionNumJSArr[i+t];this.questionNum_node.addChild(n)}},changQustion:function(t){this.nowQuestionID=t,this.selectedQusetionJS.setSelected(!1),this.selectedQusetionJS=this.qusetionNumJSArr[t].getComponent("QuestionNumJS"),this.selectedQusetionJS.setSelected(!0);var e=this.cb;e&&e(t)},changeOptionEnable:function(){this.questionNum_node.resumeSystemEvents(!0)},changeOptionDisable:function(){this.questionNum_node.pauseSystemEvents(!0)}}),cc._RF.pop()},{}],TitleJS:[function(t,e,i){"use strict";cc._RF.push(e,"5b283IiR/BBgLkN+zazJigp","TitleJS"),cc.Class({extends:cc.Component,properties:{label:cc.Label},init:function(t){this.label.string=t}}),cc._RF.pop()},{}],config:[function(t,e,i){"use strict";cc._RF.push(e,"cf7e7Hjl8pBApNKVzaPXR0c","config"),window.CONSOLE_LOG_OPEN=!1,window.AUDIO_OPEN=!1,window.REQUEST_URL=!1,cc._RF.pop()},{}],efailed:[function(t,e,i){"use strict";cc._RF.push(e,"9b649czY5lPE5+Bb2VZOMm4","efailed"),cc.Class({extends:cc.Component,properties:{label:cc.Label},onLoad:function(){},showHint:function(){this.node.stopAllActions(),this.node.opacity=255,this.label.string="当前分类已经有了哦！";var t=cc.callFunc(function(t){this.node.opacity=0},this);this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeTo(.5,0),t))},showLimitHint:function(t){this.node.stopAllActions(),this.node.opacity=255,this.label.string="啊哦！本题最多只能选择"+t+"个瓶子哦！";var e=cc.callFunc(function(t){this.node.opacity=0},this);this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeTo(.5,0),e))},start:function(){}}),cc._RF.pop()},{}],question_panel:[function(t,e,i){"use strict";cc._RF.push(e,"518c6EygmVF7aZ+N0GUpC9+","question_panel");var c=[];cc.Class({extends:cc.Component,properties:{oItemPrefab:cc.Prefab},onLoad:function(){this.oItemPool=new cc.NodePool},isEmpty:function(){return 0==c.length},copyAry:function(){var t=c.slice(0,c.length);return CONSOLE_LOG_OPEN&&console.log("questionAry.slice"+t+"  "+c),t},createOptions:function(){for(var t,e=0;e<c.length;e++){e==this.questionAry.length-1?(t=0<this.oItemPool.size()?this.oItemPool.get():cc.instantiate(this.oItemPrefab)).parent=this.node:t=this.node.children[e];var i=t.width,n=this.node.height,o=(e%3-1)*(i+15),s=e<3?n/3+10:e<6?30:-n/3+55;t.setPosition(cc.p(o,s))}},addOption:function(t){var e,i=this;e=t.slice(0,t.length),c.push(e.sort(_sortNumber)),i.createOptions(t),i.updateSum()},removeAllOption:function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].removeAllChildren(!0)}this.node.removeAllChildren(!0),c.splice(0,c.length),c=[],this.updateSum()},updateSum:function(){}}),cc._RF.pop()},{}],scalebg:[function(t,e,i){"use strict";cc._RF.push(e,"3093551zVpLp4AjCVzrt6iQ","scalebg"),cc.Class({extends:cc.Component,properties:{designSize:cc.Size,bg:cc.Node,lbg:cc.Node,rbg:cc.Node},onLoad:function(){var t=(cc.winSize.width-this.designSize.width)/2;if(0<t)this.lbg.width=Math.max(t,512),this.rbg.width=Math.max(t,512);else{var e=Math.min(cc.winSize.width/this.designSize.width,cc.winSize.height/this.designSize.height);this.node.setScale(e,1)}}}),cc._RF.pop()},{}],scale:[function(t,e,i){"use strict";cc._RF.push(e,"521434wupJHAqZevOCVOyWl","scale"),cc.Class({extends:cc.Component,properties:{designSize:cc.Size},onLoad:function(){var t=Math.min(cc.winSize.width/this.designSize.width,cc.winSize.height/this.designSize.height);this.node.setScale(t,t)}}),cc._RF.pop()},{}],settlement:[function(t,e,i){"use strict";cc._RF.push(e,"dd759DqBqVEVoLQFj9axoqs","settlement");var n="happy",o="sad";cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.background=this.node.getChildByName("background"),this.scale=this.node.getChildByName("scale"),this.glow=this.scale.getChildByName("glow"),this.glowDots=this.scale.getChildByName("glow_dots"),this.title=this.scale.getChildByName("title"),this.cutes=this.scale.getChildByName("cutes")},playWinAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("win",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(n);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("win")},playLoseAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("lose",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(o);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("lose")},playTimeUpAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("time_up",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(o);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("lose")},playDBAnim:function(t){for(var e=this.cutes.children,i=0;i<e.length;i++)e[i].getChildByName("cute").getComponent(dragonBones.ArmatureDisplay).playAnimation(t,-1)},reset:function(){this.background.opacity=0,this.background.active=!1,this.glow.scaleX=0,this.glow.scaleY=0,this.glow.opacity=255,this.glowDots.active=!1,this.title.getComponent(cc.Sprite).spriteFrame=null;for(var t=this.cutes.children,e=0;e<t.length;e++)t[e].getChildByName("cute").getComponent(dragonBones.ArmatureDisplay).animationName=null;this.node.active=!1},log:function(t){CONSOLE_LOG_OPEN&&cc.log(t)}}),cc._RF.pop()},{}]},{},["BaseGameJS","LocalSaveJS","NetworkJS","ColliderListener","OptionJS","OptionJS1","QuestionNumJS","QuestionNumListJS","TitleJS","efailed","question_panel","settlement","FormulaItem","GameJS","NetworkJS_Data","config","scale","scalebg"]);