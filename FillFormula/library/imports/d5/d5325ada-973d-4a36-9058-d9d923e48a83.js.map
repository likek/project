{"version":3,"sources":["../../../../assets/base/assets/base/BaseGameJS.js"],"names":["cc","Class","extends","Component","properties","timeLabel","Label","paopao_node","Node","feedback_node","loseTime_node","loseTime","time_node","question_node","quertionList_node","title_node","onLoad","self","document","addEventListener","gotoBackground","director","pause","game","CONSOLE_LOG_OPEN","console","log","isPaused","resume","gotoForeground","initFeedback","answerTime","lastAnswerTime","answerContext","countDown","timeCallback","timeCallbackFunc","isShowLossTime","nowQuestionID","questionArr","answerInfoArr","questionNumListJS","getComponent","opacity","onLoadChild","answerEnable","network","node","sendXHR","feedback","instantiate","feedback_pref","addChild","feedbackJS","getChildByName","createPaopao","width","height","paopaoX","posY","length","index","paopao","paopao_pref","x","y","createAnswerInfo","answerStatus","question","answerInfo","leveLQuestionDetailNum","levelQuestionDetailID","push","showFeedback","feedbackType","firstShowFeedback","firstFeedbackFinish","feedbackFinish","isTotalCd","interactiveJson","totalcd","t","i","isIts","settlementJs","reset","gameOver","gameLoadProgress","deleteOption","startloadOption","showLossTime","callFunc","target","runAction","sequence","fadeTo","scheduleTime","timeString","timeout","isShowFeed","string","unschedule","timeFormat","time","min","Math","floor","sec","fMin","fSec","showSchedule","schedule","createOption","selectedOption","questionID","setTimeout","changeOptionDisable","changeOptionEnable","startLoadGame","init","bind","REQUEST_URL","requestAllUrls","urls","quescontimgAry","Array","j","optionsArr","optioncontimg","loader","load","errors","texs","gameLoadFailed","spriteMaps","map","getSpriteFrame","spriteUrl","r","content","Texture2D","SpriteFrame","selectAnswer","isRight","rightSelect","showParticle","count","scheduleOnce","onDestroy","removeEventListener","setGameName","val","setPlatform","platform","active","resetOption","moveOptionTag","moveOption","option_node","getChildByTag","optionJs","reloadState","changeMoveTag","tag"],"mappings":"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","file":"BaseGameJS.js","sourceRoot":"../../../../assets/base","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeLabel: cc.Label,\n        paopao_node: cc.Node,//泡泡背景\n        //paopao_pref: cc.Prefab,//泡泡预制\n        feedback_node: cc.Node,//龙虾反馈\n        //feedback_pref: cc.Prefab,//龙虾预制        \n        loseTime_node: cc.Node,//减时间\n        loseTime: 0,//减时间3秒\n        time_node: cc.Node,\n        question_node: cc.Node,\n        quertionList_node: cc.Node,\n        title_node: cc.Node,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var self = this;\n        //注册监听home键事件\n        document.addEventListener('resignActivePauseGame', function () {\n            self.gotoBackground();\n            cc.director.pause();\n            cc.game.pause();\n\n            if (CONSOLE_LOG_OPEN) console.log('app just resign active.');\n        });\n        document.addEventListener('becomeActiveResumeGame', function () {\n            if (cc.game.isPaused) {\n                cc.game.resume();\n            }\n            if (cc.director.isPaused) {\n                cc.director.resume();\n            }\n            self.gotoForeground();\n            if (CONSOLE_LOG_OPEN) console.log('app just become active.');\n        });\n        this.initFeedback();\n        //气泡\n        //this.createPaopao();\n        //答题时间\n        this.answerTime = 0;\n        this.lastAnswerTime = 0;\n\n        //'A/B/C/D',用户答案选项\n        this.answerContext = '';\n        //倒计时\n        this.countDown = 300;\n        //倒计时回调\n        this.timeCallback = this.timeCallbackFunc();\n        //是否在显示减时间\n        this.isShowLossTime = false;\n        //当前题目序号\n        this.nowQuestionID = 0;\n        //题目列表\n        this.questionArr = [];\n        //收集数据\n        this.answerInfoArr = [];\n        //列表js\n        this.questionNumListJS = this.quertionList_node.getComponent(\"QuestionNumListJS\");\n        this.quertionList_node.opacity = 0;\n        //this.title_node.opacity = 0;\n        this.time_node.opacity = 0;\n        //子类初始化\n        this.onLoadChild();\n        //答完题\n        this.answerEnable = false;\n        //请求数据\n        this.network = this.node.getComponent('NetworkJS_Data');\n        this.network.sendXHR(this);\n    },\n    initFeedback: function() {\n        //创建龙虾\n        var feedback = cc.instantiate(this.feedback_pref);\n        this.feedback_node.addChild(feedback);\n        //反馈\n        //this.feedbackJS = feedback.getComponent('ShowFeedback');\n        //反馈JS\n        this.feedbackJS = feedback.getChildByName('Fish').getComponent('FishFeedback');\n\n    },\n    //子类初始化\n    onLoadChild: function() {\n\n    },\n    //转到后台\n    gotoBackground: function(){\n\n    },\n    //转到前台\n    gotoForeground: function(){\n\n    },\n\n    //加载泡泡\n    createPaopao: function () {\n        //左边\n        let width = this.node.width;\n        let height = 1012.0;\n        let paopaoX = [120, 40, 160, 80, 200];\n        let posY = height / (paopaoX.length);\n        for (var index = 0; index < paopaoX.length; index++) {\n            var paopao = cc.instantiate(this.paopao_pref);\n            paopao.x = paopaoX[index];\n            paopao.y = - posY * index;\n            this.paopao_node.addChild(paopao);\n        }\n        //右边\n        for (var index = 0; index < paopaoX.length; index++) {\n            var paopao = cc.instantiate(this.paopao_pref);\n            paopao.x = width - paopaoX[index];\n            paopao.y = - posY * index;\n            this.paopao_node.addChild(paopao);\n        }\n    },\n\n    // answerInfo['answerTime'] = '用时多少';\n    // answerInfo['leveLQuestionDetailNum'] = 'IPS题目（小题）序号';\n    // answerInfo['levelQuestionDetailID'] = 'IPS题目（小题） ID';\n    // answerInfo['answerStatus'] = '答题状态 1：正确 2：错误';\n    // answerInfo['answerContext'] = 'A/B/C/D';//用户答案选项\n    createAnswerInfo: function (answerStatus) {\n        var question = this.questionArr[this.nowQuestionID];\n        if (!question){\n            return;\n        }\n        //组装数据\n        var answerInfo = {\n            answerTime: this.answerTime- this.lastAnswerTime,\n            leveLQuestionDetailNum: question.leveLQuestionDetailNum,\n            levelQuestionDetailID: question.levelQuestionDetailID,\n            answerStatus: answerStatus,\n            answerContext: this.answerContext,\n        };\n\n        this.answerInfoArr.push(answerInfo);\n    },\n    //龙虾反馈\n    showFeedback: function (feedbackType) {\n        if (this.nowQuestionID === 0) {\n            //龙虾入场\n            this.feedbackJS.firstShowFeedback(this, feedbackType);\n        } else {\n            //龙虾反馈\n            this.feedbackJS.showFeedback(this, feedbackType);\n        }\n        //显示进度\n        //this.network.gameLoadProgress(this.nowQuestionID, this.questionArr.length);\n    },\n\n    //龙虾入场完成-自动执行反馈\n    firstFeedbackFinish: function () {\n\n    },\n\n    //龙虾反馈完成\n    feedbackFinish: function () {\n        this.nowQuestionID += 1;\n        //答题条数大于总条数  或者  时间用完\n        let isTotalCd = this.questionArr[0].interactiveJson.totalcd;\n        if (this.nowQuestionID >= this.questionArr.length || (this.countDown - this.answerTime) <= 0 && isTotalCd) {\n            if (CONSOLE_LOG_OPEN) console.log('答完了');\n            let t = this.questionArr.length - this.nowQuestionID;\n            for(var i = 0; i < t; i++) {\n                this.answerTime = 0;\n                this.lastAnswerTime = 0;                \n                this.createAnswerInfo('2');\n                this.nowQuestionID += 1;\n            }\n            //清除反馈\n            this.isIts && this.settlementJs.reset();           \n\n            this.network.gameOver(this.answerInfoArr);\n        } else {\n            //显示进度\n            this.network.gameLoadProgress(this.nowQuestionID+1, this.questionArr.length);\n            //移除当前所有选项\n            !this.isIts&&this.deleteOption();\n            //清除反馈\n            this.settlementJs.reset();           \n            //开始下一题\n            !this.isIts && this.startloadOption();\n        }\n    },\n    // //龙虾反馈\n    // showFeedback: function (type) {\n    //     //龙虾反馈\n    //     this.feedbackJS.showFeedback(type);\n\n    //     this.nowQuestionID += 1;\n    //     //显示进度\n    //     //this.network.gameLoadProgress(this.nowQuestionID, this.questionArr.length);\n\n    //     this.scheduleOnce(function () {\n    //         if (this.nowQuestionID >= this.questionArr.length) {\n    //             if (CONSOLE_LOG_OPEN) console.log('答完了');\n\n    //             this.network.gameOver(this.answerInfoArr);\n    //         } else {\n    //             this.feedbackJS.animationStop();\n    //             //移除当前所有选项\n    //             this.deleteOption();\n    //             //开始下一题\n    //             !this.isIts && this.startloadOption();\n    //         }\n    //     }, 2.0);\n    // },\n\n    //显示减时间\n    showLossTime: function () {\n        this.answerTime += this.loseTime;\n\n        this.isShowLossTime = true;\n        //透明度渐变\n        this.loseTime_node.opacity = 255;\n\n        var callFunc = cc.callFunc(function (target) {\n            this.isShowLossTime = false;\n            this.loseTime_node.opacity = 0;\n        }, this);\n\n        this.loseTime_node.runAction(cc.sequence(cc.fadeTo(1.0, 0), callFunc));\n    },\n\n    //倒计时回调\n    timeCallbackFunc: function () {\n        var timeCallback = function () {\n            //用户答题时间\n            this.answerTime += 1;\n            //倒计时次数\n            this.scheduleTime += 1;\n\n            var timeString = this.countDown - this.answerTime;\n\n            if (timeString <= 0) {\n                //时间到\n                if (CONSOLE_LOG_OPEN) console.log('时间到');\n                this.timeout();\n                this.isShowFeed = true;\n\n                this.answerTime = this.countDown;\n                this.timeLabel.string = '00:00';\n\n                this.createAnswerInfo('2');\n\n                this.showFeedback(3);\n\n                //是减时间，取消定时器,放在showFeedback，要不然会不执行scheduleOnce\n                if (this.answerTime > this.scheduleTime) {\n                    //取消定时器\n                    this.unschedule(this.timeCallback);\n                }\n            } else {\n                this.timeLabel.string = this.timeFormat(timeString);\n            }\n        }\n        return timeCallback;\n    },\n    timeFormat(time) {\n        let min = Math.floor(time / 60),\n            sec = time % 60,\n            fMin = min < 10 ? '0'+ min : min,\n            fSec = sec < 10 ? '0'+ sec : sec;\n        if(time > 59) {\n            return fMin + \":\" + fSec;\n        }else {\n            return '00:'+ fSec\n        }\n    },\n    timeout: function(){\n\n    },\n    //显示倒计时\n    showSchedule: function () {\n        this.scheduleTime = 0;\n        this.schedule(this.timeCallback, 1.0, this.countDown - 1);\n    },\n\n    //移除当前所有选项\n    deleteOption: function () {\n\n    },\n\n    //创建选项按钮\n    createOption: function (interactiveJson) {\n\n    },\n    //选择指定题目\n    selectedOption: function(questionID) {\n        this.nowQuestionID = questionID;\n        //移除当前所有选项\n        this.deleteOption();\n        var self = this;\n        setTimeout(function() {\n            self.startloadOption();\n        }, 0);\n\n    },\n    //开始加载选项\n    startloadOption: function () {\n        this.isIts && this.questionNumListJS.changeOptionDisable();\n\n        var question = this.questionArr[this.nowQuestionID];\n\n        // this.titlelabel.string = question.qescont;\n\n        // this.createOption(question.interactiveJson);\n\n        // //倒计时\n        // let countDown = parseInt(question.interactiveJson['countDown']);\n        // if (countDown > 0) {\n        //     this.countDown = countDown;\n\n        this.timeLabel.string = this.timeFormat(this.countDown);\n\n        this.answerTime = 0;\n\n        !this.isIts && this.showSchedule();\n        this.isIts && this.questionNumListJS.changeOptionEnable();\n        this.isShowFeed = false;\n    },\n\n    //题目下载完成，开始游戏\n    startLoadGame: function (questionArr) {\n        this.questionArr = questionArr;\n        // this.title_node.opacity = this.isIts ? 255 : 0;\n        this.quertionList_node.opacity = this.isIts ? 255 : 0;\n        this.time_node.opacity = this.isIts ? 0 : 255;\n        //its\n        if(this.isIts && questionArr && questionArr.length > 0 ){\n            this.questionNumListJS.init(questionArr.length, this.selectedOption.bind(this));\n        }\n        if(REQUEST_URL){\n            this.requestAllUrls();\n        }else{\n            this.startloadOption();\n        }\n    },\n    requestAllUrls: function() {\n        let urls = [];\n        //提取所有的图片地址\n        for (let i = 0; i < this.questionArr.length; i++) {\n            //获取题干图片\n            if (this.questionArr[i].quescontimgAry instanceof Array) {\n                for (let j = 0; j < this.questionArr[i].quescontimgAry.length; j++) {\n                    urls.push(this.questionArr[i].quescontimgAry[j]);\n                }\n                }\n            if (this.questionArr[i].optionsArr instanceof Array) {\n                for (let j = 0; j < this.questionArr[i].optionsArr.length; j++) {\n                    if (this.questionArr[i].optionsArr[j].optioncontimg) {\n                        urls.push(this.questionArr[i].optionsArr[j].optioncontimg);\n                    }\n                }\n            }\n        }\n        //开始加载\n        let self = this;\n        cc.loader.load(urls, function (errors, texs) {\n            if (errors) {\n                self.network.gameLoadFailed(1);\n                return;\n            }\n            //设置图片映射集合\n            self.spriteMaps = texs.map;\n            self.startloadOption();\n        });\n    },\n    //获取下载的图片例如:this.node.getComponent(cc.Sprite).spriteFrame = this.gameJS.getSpriteFrame(this.option.optioncontimg);\n    getSpriteFrame: function(spriteUrl){\n        if(!spriteUrl||spriteUrl.length==0)return null;\n        let r = this.spriteMaps[spriteUrl].content;\n        if(r instanceof cc.Texture2D){\n            return new cc.SpriteFrame(r);\n        }\n        return null;\n    },\n    //选中答案\n    selectAnswer: function (target, isRight) {\n        //显示状态过程中不接收事件\n        if (this.isShowFeed || this.isShowLossTime) {\n            return;\n        }\n\n        if (isRight) {\n            if (CONSOLE_LOG_OPEN) console.log('答对了');\n\n            this.rightSelect += 1;\n\n            target.showParticle();\n\n            //题打完了\n            if (this.rightSelect >= this.count) {\n                //取消定时器\n                this.unschedule(this.timeCallback);\n\n                this.isShowFeed = true;\n\n                this.createAnswerInfo('1');\n\n                this.scheduleOnce(function () {\n                    this.showFeedback(1);\n                }, 1.0);\n            }\n        } else {\n            if (CONSOLE_LOG_OPEN) console.log('答错了');\n\n            this.showLossTime();\n        }\n    },\n\n    onDestroy: function () {\n        document.removeEventListener('resignActivePauseGame');\n        document.removeEventListener('becomeActiveResumeGame');\n    },\n    //设置游戏标题名\n    setGameName: function(val){\n        this.title_node.getComponent(\"TitleJS\").init(val);\n    },\n\n    //its 兼容\n\tsetPlatform: function( val ){\n        this.platform = val;\n        this.isIts = val == \"its\";\n        var isIts = this.isIts;\n        this.quertionList_node.active = isIts ? true : false;\n        //this.title_node.active = isIts ? true : false;\n        this.time_node.active = isIts ? false : true;\n    },\n\n    //复位\n    resetOption: function () {\n        if (this.moveOptionTag != 0) {\n            var moveOption = this.option_node.getChildByTag(this.moveOptionTag);\n            var optionJs = moveOption.getComponent('Option');\n            optionJs.reloadState();\n            this.moveOptionTag = 0;\n        }\n    },\n\n    //moveTag\n    changeMoveTag: function (tag) {\n        // if (!this.answerEnable || this.isShowFeed || this.isShowLossTime) {\n        //     return false;\n        // }\n        if (this.isShowFeed){\n            return false;\n        }\n        if (this.moveOptionTag === 0 || this.moveOptionTag === tag || tag === 0) {\n            this.moveOptionTag = tag;\n            return true;\n        } else {\n            return false;\n        }\n    },\n});\n"]}