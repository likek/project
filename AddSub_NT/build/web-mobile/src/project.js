require=function n(a,r,c){function h(e,t){if(!r[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(p)return p(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var s=r[e]={exports:{}};a[e][0].call(s.exports,function(t){return h(a[e][1][t]||t)},s,s.exports,n,a,r,c)}return r[e].exports}for(var p="function"==typeof require&&require,t=0;t<c.length;t++)h(c[t]);return h}({abg:[function(t,e,i){"use strict";cc._RF.push(e,"0a165P9h4VAtbD+7e8c1lND","abg"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rainbow=null,t.maxSize=new cc.Size(0,0),t}return __extends(t,e),t.prototype.onLoad=function(){cc.winSize.width>this.maxSize.width?this.rainbow.x=cc.winSize.width/2-this.rainbow.width/2:this.rainbow.x=0},__decorate([n(cc.Node)],t.prototype,"rainbow",void 0),__decorate([n(cc.Size)],t.prototype,"maxSize",void 0),t=__decorate([s],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],absgroup:[function(t,e,i){"use strict";cc._RF.push(e,"d54c0u2O8FPJagXFkoOH5tE","absgroup"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../scripts/core/obj"),s=cc._decorator,n=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([n],e)}(o.default));i.default=a,cc._RF.pop()},{"../../scripts/core/obj":"obj"}],absprogress:[function(t,e,i){"use strict";cc._RF.push(e,"6ba2aAKDJtB7JxGoZG0Dejw","absprogress"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../scripts/core/layer"),s=cc._decorator,n=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([n],e)}(o.default));i.default=a,cc._RF.pop()},{"../../scripts/core/layer":"layer"}],abssettlement:[function(t,e,i){"use strict";cc._RF.push(e,"b19ebCUbtpHBqHW29k3wtUd","abssettlement"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../scripts/core/layer"),s=cc._decorator,n=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([n],e)}(o.default));i.AbsSettlement=a,cc._RF.pop()},{"../../scripts/core/layer":"layer"}],abstips:[function(t,e,i){"use strict";cc._RF.push(e,"55a4804edlI6oCVXdMx3GJ2","abstips"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../scripts/core/layer"),s=cc._decorator,n=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([n],e)}(o.default));i.default=a,cc._RF.pop()},{"../../scripts/core/layer":"layer"}],cjs:[function(t,e,i){"use strict";cc._RF.push(e,"85a6bSAXMJMw4skpc3C/k05","cjs"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./unit"),s=t("../../scripts/touch/touchobj"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unitjs=null,t.touchjs=null,t}return __extends(t,e),__decorate([r(o.default)],t.prototype,"unitjs",void 0),__decorate([r(s.default)],t.prototype,"touchjs",void 0),t=__decorate([a],t)}(cc.Component);i.default=c,cc._RF.pop()},{"../../scripts/touch/touchobj":"touchobj","./unit":"unit"}],cloud:[function(t,e,i){"use strict";cc._RF.push(e,"9ebf9rwLSxKfpWKARzzF1rC","cloud"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./touch/touchobj"),s=t("./touch/touchhandler"),n=t("./networkdata"),a=t("./game"),r=cc._decorator,c=r.ccclass,h=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=0,t.ox=0,t.id="",t.touchHandler=null,t.touchObj=null,t.game=null,t.xf=30,t.ia=.2,t.anim=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ox=this.node.x;var t=new n.UnitData;t.id=this.id,t.type=n.UNIT_TYPE.CLOUD,t.touchType=n.UNIT_TOUCH_TYPE.CLICK,this.touchObj.game=this.game,this.touchObj.setData(t,this.touchHandler),this.game.eventBus.register("cloudstart",this.startAnim.bind(this),this.id),this.game.eventBus.register("cloudend",this.endAnim.bind(this),this.id)},t.prototype.startAnim=function(t,e){var i=e.getUserData();"cloudstart"===t&&i.id===this.id&&this.node.setScale(cc.p(.7,.7))},t.prototype.endAnim=function(t,e){var i=e.getUserData();"cloudend"===t&&i.id===this.id&&this.anim.play("cloudr",0)},t.prototype.onEnable=function(){this.id&&(this.game.eventBus.register("cloudstart",this.startAnim.bind(this),this.id),this.game.eventBus.register("cloudend",this.endAnim.bind(this),this.id))},t.prototype.onDisable=function(){this.id&&(this.game.eventBus.unregister("cloudstart",this.startAnim.bind(this),this.id),this.game.eventBus.unregister("cloudend",this.endAnim.bind(this),this.id))},t.prototype.update=function(t){this.count+=t,this.node.x=this.xf*Math.sin(this.ia+this.count)+this.ox,this.count>2*Math.PI&&(this.count-=2*Math.PI)},__decorate([h(String)],t.prototype,"id",void 0),__decorate([h(s.default)],t.prototype,"touchHandler",void 0),__decorate([h(o.default)],t.prototype,"touchObj",void 0),__decorate([h(a.default)],t.prototype,"game",void 0),__decorate([h(Number)],t.prototype,"xf",void 0),__decorate([h(Number)],t.prototype,"ia",void 0),__decorate([h(cc.Animation)],t.prototype,"anim",void 0),t=__decorate([c],t)}(cc.Component);i.default=p,cc._RF.pop()},{"./game":"game","./networkdata":"networkdata","./touch/touchhandler":"touchhandler","./touch/touchobj":"touchobj"}],eventbus:[function(t,e,i){"use strict";cc._RF.push(e,"b0ba91xDTBMcpElnXiaaCvy","eventbus"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventList=new Map,t}return __extends(t,e),t.prototype.dispatchEvent=function(t,e,i){var o=new cc.Event.EventCustom(t,!0);i=i||this.node,e?e.area=i:e={area:i},o.setUserData(e),i?i.dispatchEvent(o):this.node.dispatchEvent(o)},t.prototype.register=function(t,e,i,o){var s;o?this.eventList.get(o)&&this.eventList.get(o).has(t)?(s=this.eventList.get(o).get(t))?s instanceof Array&&!this._isNotSame(s,i)&&(e.callbackID=i,s.push(e)):(e.callbackID=i,this.eventList.get(o).set(t,[e])):(this.eventList.get(o)||this.eventList.set(o,new Map),e.callbackID=i,this.eventList.get(o).set(t,[e]),o.on(t,this.callback,this)):this.eventList.get(this.node)&&this.eventList.get(this.node).has(t)?(s=this.eventList.get(this.node).get(t))?s instanceof Array&&!this._isNotSame(s,i)&&(e.callbackID=i,s.push(e)):(e.callbackID=i,this.eventList.get(this.node).set(t,[e])):(this.eventList.get(this.node)||this.eventList.set(this.node,new Map),e.callbackID=i,this.eventList.get(this.node).set(t,[e]),this.node.on(t,this.callback,this))},t.prototype._isNotSame=function(t,e){for(var i=0;i<t.length;i++)if(t[i].callbackID===e)return!0;return!1},t.prototype.callback=function(t){for(var e=t.getEventName(),i=t,o=this.eventList.get(i.getUserData().area)&&this.eventList.get(i.getUserData().area).get(e),s=0;o&&s<o.length;s++)o[s]&&o[s](e,i)},t.prototype.unregister=function(t,e,i,o){if(o)if(this.eventList.get(o)&&this.eventList.get(o).has(t)){for(var s=this.eventList.get(o).get(t),n=[],a=0;s instanceof Array&&a<s.length;a++)s[a].callbackID!==i&&n.push(s[a]);0===n.length?(this.eventList.get(o).delete(t),o.off(t,this.callback,this)):this.eventList.get(o).set(t,n)}else o.off(t,this.callback,this);else if(this.eventList.get(this.node)&&this.eventList.get(this.node).has(t)){for(s=this.eventList.get(this.node).get(t),n=[],a=0;s instanceof Array&&a<s.length;a++)s[a].callbackID!==i&&n.push(s[a]);0===n.length?(this.eventList.get(this.node).delete(t),this.node.off(t,this.callback,this)):this.eventList.get(this.node).set(t,n)}else this.node.off(t,this.callback,this)},t=__decorate([s],t)}(cc.Component));i.default=n,cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"a8c76j2RY5M+a0GeIcsOIj+","game"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./networkdata"),s=t("../prefabs/timer/timer"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.questionIndex=0,t.net=new o.default,t.showPlayAudio=!0,t.playdaudiotime=0,t.playdaudioable=!0,t.audioclips=new Array,t.audioMap={tipaudio:0,description:1,0:2,1:3,2:4,3:5,4:6,5:7,6:8,7:9,8:10,9:11,10:22,select:12,magic:13,nhappy:14,unhappy:15,think:16,falling:17,right:18,win:19,lose:20,timeup:21},t.tipsJs=null,t.tips=null,t.progressJs=null,t.progress=null,t.settlementJs=null,t.settlement=null,t.questionListJs=null,t.questionListNode=null,t.timerJs=null,t.timerNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){(this.net.game=this).eventBus=this.node.getComponent("eventbus"),this.tipsJs=this.tips.getComponent("tips"),this.progressJs=this.progress.getComponent("progress"),this.settlementJs=this.settlement.getComponent("settlement"),this.questionListJs=this.questionListNode.getComponent("questionlist"),this.timerJs=this.timerNode.getComponent("timer"),((this.tipsJs.game=this).settlementJs.game=this).progressJs.game=this,document.addEventListener("resignActivePauseGame",function(){this.settlement&&this.settlement.active&&this.settlementJs.pause(),this.tips&&this.tips.active&&this.tipsJs.pause(),this.progress&&this.progress.active&&this.progressJs.pause(),cc.director.pause(),cc.game.pause(),cc.log("app just resign active.")}.bind(this)),document.addEventListener("becomeActiveResumeGame",function(){cc.game.isPaused&&cc.game.resume(),cc.director.isPaused&&cc.director.resume(),this.settlement&&this.settlement.active&&this.settlementJs.resume(),this.tips&&this.tips.active&&this.tipsJs.resume(),this.progress&&this.progress&&this.progress.active&&this.progressJs.resume(),cc.log("app just become active.")}.bind(this)),this.loadData()},t.prototype.loadData=function(){var i=this;cc.loader.loadResArray(["config","tips"],function(t,e){t?i.net.gameLoadFailed(1):i.net.requestData(e[0],e[1])})},t.prototype.dataLoaded=function(t,e){"dataloaded"===t&&(this.gameData=e.getUserData(),this.playBgm(),this.gameData.platform===o.PLATFORM.IPS?(this.questionListNode.active=!1,this.timerNode.active=!0,this.timerJs.iniTimer(this.gameData.timerType,this.gameData.totalTimeList)):(this.questionListNode.active=!0,this.timerNode.active=!1,this.questionListJs.setData(this.gameData.questionlist.length)),this.loadScene())},t.prototype.loadScene=function(){cc.log("Load scene:"+this.questionIndex),this.randomY=[],this.randomAT=[];for(var t=0;t<30;t++)this.randomY.push(200*parseInt(""+-(5*cc.random0To1()-1))),this.randomAT.push(2.67*cc.random0To1());this.shouldShowTip()?(this.hideGame(),this.showTips(),this.hideSettle()):(this.hideTips(),this.showGame(),this.hideSettle(),this.startTimer())},t.prototype.nextScene=function(){cc.log("Next scene:"+this.questionIndex),this.questionIndex<this.gameData.questionlist.length-1?(this.questionIndex++,this.net.gameLoadProcess(this.questionIndex+1,this.gameData.questionlist.length),this.eventBus.dispatchEvent("loadscene",null)):this.showFinishAnim(function(){this.eventBus.dispatchEvent("gameover",null)}.bind(this))},t.prototype.showFinishAnim=function(t){for(var e=!0,i=0;i<this.gameData.playerData.length;i++)if("2"===this.gameData.playerData[i].answerStatus){e=!1;break}this.showSettle(),e?this.showWin(t):this.showLose(t)},t.prototype.loadSceneByIndex=function(t){this.questionIndex=t.getUserData(),this.eventBus.dispatchEvent("loadscene",null)},t.prototype.timeUp=function(){this.playTimeUpAudio(),this.progressJs.touchHandler.reset(),this.showSettle(),this.settlementJs.timeup(function(){this.timerJs.type===s.TimerType.COUNTDOWN?(this.collectPlayerDataByIndex("2",""),this.eventBus.dispatchEvent("nextscene",null)):this.timerJs.type!==s.TimerType.TOTAL_COUNTDOWN&&this.timerJs.type!==s.TimerType.COUNTUP||(this.collectPlayerDataByIndex("2",""),this.playdaudioable=!1,this.gameOver())}.bind(this))},t.prototype.gameOver=function(){this.net.gameOver(this.gameData.playerData)},t.prototype.shouldShowTip=function(){return 0===this.questionIndex&&!this.showTipsYet},t.prototype.showTips=function(){this.tips.active=!0,this.tipsJs.setData(this.gameData,this.questionIndex),this.tipsJs.startTip(),this.tipsJs.preAnimation(),this.showTipsYet=!0,this.progress.active=!0,this.progressJs.setData(this.gameData,-1),this.progressJs.preAnimation(),this.scheduleOnce(function(){this.playAudio(this.audioclips[this.audioMap.tipaudio],!1,1)}.bind(this),.1),this.scheduleOnce(function(){this.playdaudioId=this.playAudio(this.audioclips[this.audioMap.description],!1,1)}.bind(this),2.4),this.scheduleOnce(function(){}.bind(this),2.5)},t.prototype.showGame=function(){this.progress.active=!0,this.progressJs.setData(this.gameData,this.questionIndex),this.progressJs.preAnimation()},t.prototype.showSettle=function(){this.settlement.active=!0,this.settlementJs.setData(this.gameData,this.questionIndex)},t.prototype.hideTips=function(){this.tips.active=!1},t.prototype.hideGame=function(){this.progress.active=!1},t.prototype.hideSettle=function(){this.settlement.active=!1},t.prototype.startTimer=function(){this.gameData.platform===o.PLATFORM.IPS&&this.timerJs.startTimer()},t.prototype.stopTimer=function(){this.gameData.platform===o.PLATFORM.IPS&&this.timerJs.stopTimer()},t.prototype.showWin=function(t){this.settlementJs.win(t),this.playWinAudio()},t.prototype.showLose=function(t){this.settlementJs.lose(t),this.playFailAudio()},t.prototype.playAudio=function(t,e,i){return this.playAudio?cc.audioEngine.play(t,e,i):null},t.prototype.stopAudio=function(t){"number"==typeof t&&cc.audioEngine.stop(t)},t.prototype.playBgm=function(){var t=0<this.gameData.questionlist.length&&this.gameData.questionlist[0].quecontAudio instanceof Array&&0<this.gameData.questionlist[0].quecontAudio.length&&this.gameData.questionlist[0].quecontAudio[0];"string"==typeof t&&0<t.length&&cc.loader.load(t,function(t,e){t?cc.log("Audio play failed."):(this.playAudio(e,!0,1),cc.loader.releaseAsset(e))}.bind(this))},t.prototype.playNumAudio=function(t){this.audioclips[this.audioMap[t]]&&this.playAudio(this.audioclips[this.audioMap[t]],!1,1)},t.prototype.playSelectAudio=function(){this.playAudio(this.audioclips[this.audioMap.select],!1,1)},t.prototype.playMagicAudio=function(){this.playAudio(this.audioclips[this.audioMap.magic],!1,.4)},t.prototype.playNHappyAudio=function(){this.playAudio(this.audioclips[this.audioMap.nhappy],!1,1)},t.prototype.playNUnhappyAudio=function(){this.playAudio(this.audioclips[this.audioMap.unhappy],!1,1)},t.prototype.playThinkAudio=function(){this.playAudio(this.audioclips[this.audioMap.think],!1,1)},t.prototype.playFallingAudio=function(){this.stopAudio(this.playdaudioId),this.playAudio(this.audioclips[this.audioMap.falling],!1,1)},t.prototype.playRightAudio=function(){this.stopAudio(this.playdaudioId),this.playAudio(this.audioclips[this.audioMap.right],!1,1)},t.prototype.playWinAudio=function(){this.stopAudio(this.playdaudioId),this.playAudio(this.audioclips[this.audioMap.win],!1,1)},t.prototype.playFailAudio=function(){this.stopAudio(this.playdaudioId),this.playAudio(this.audioclips[this.audioMap.lose],!1,1)},t.prototype.playTimeUpAudio=function(){this.stopAudio(this.playdaudioId),this.playAudio(this.audioclips[this.audioMap.timeup],!1,1)},t.prototype.handled=function(){this.playdaudiotime=0},t.prototype.collectPlayerDataByIndex=function(t,e){var i=this.gameData.playerData[this.questionIndex];i.answerTime=this.timerJs._getTime().count,i.answerStatus=t,i.answerContext=e},t.prototype.onEnable=function(){this.eventBus.register("loadscene",this.loadScene.bind(this),"loadscene"),this.eventBus.register("nextscene",this.nextScene.bind(this),"nextscene"),this.eventBus.register("dataloaded",this.dataLoaded.bind(this),"dataloaded"),this.eventBus.register("gameover",this.gameOver.bind(this),"gameover"),this.eventBus.register("touchmovem",this.handled.bind(this),"touchmovemda")},t.prototype.onDisable=function(){this.eventBus.unregister("loadscene",this.loadScene,"loadscene"),this.eventBus.unregister("nextscene",this.nextScene,"nextscene"),this.eventBus.unregister("dataloaded",this.dataLoaded,"dataloaded"),this.eventBus.unregister("gameover",this.gameOver,"gameover"),this.eventBus.unregister("touchmovem",this.handled.bind(this),"touchmovemda")},t.prototype.update=function(t){this.playdaudiotime+=t,this.playdaudioable&&20<this.playdaudiotime&&(this.playdaudioId=this.playAudio(this.audioclips[this.audioMap.description],!1,1),this.playdaudiotime=0)},__decorate([r([cc.AudioClip])],t.prototype,"audioclips",void 0),__decorate([r(cc.Node)],t.prototype,"tips",void 0),__decorate([r(cc.Node)],t.prototype,"progress",void 0),__decorate([r(cc.Node)],t.prototype,"settlement",void 0),__decorate([r(cc.Node)],t.prototype,"questionListNode",void 0),__decorate([r(cc.Node)],t.prototype,"timerNode",void 0),t=__decorate([a],t)}(cc.Component);i.default=c,cc._RF.pop()},{"../prefabs/timer/timer":"timer","./networkdata":"networkdata"}],group:[function(t,e,i){"use strict";cc._RF.push(e,"7e3d0H6i2pM3Z0fr8V81zUo","group"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./absgroup"),s=t("../../scripts/networkdata"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oPrefabs=new Array,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.setData=function(t){this.data=t,this.node.removeAllChildren();for(var e,i=0,o=this.data.objs.length;this.data&&i<this.data.objs.length;i++)e=cc.instantiate(this.oPrefabs[0]),this.data.type===s.GROUP_TYPE.GRID?-1===this.data.colNum?(this.data.objs[i].x=-this.data.horizontalSpace*(o/2-.5)+i*this.data.horizontalSpace,this.data.objs[i].y=0):(this.data.objs[i].x=-this.data.horizontalSpace*(Math.min(this.data.colNum,o)/2-.5)+i%this.data.colNum*this.data.horizontalSpace,this.data.objs[i].y=this.data.verticalSpace*(Math.ceil(o/this.data.colNum)/2-.5)-Math.floor(i/this.data.colNum)*this.data.verticalSpace):(this.data.objs[i].x=-this.data.horizontalSpace*(o/2-.5)+i*this.data.horizontalSpace,this.data.objs[i].y=this.game.randomY[i]),this.data.objs[i].randomtime=this.game.randomAT[i],e.getComponent("cjs").unitjs.game=this.game,e.getComponent("cjs").touchjs.game=this.game,e.parent=this.node,e.getComponent("cjs").unitjs.setData(this.data.objs[i]),e.getComponent("cjs").touchjs.setData(this.data.objs[i],null);this.refresh()},t.prototype.refresh=function(){this.node.x=this.data.x,this.node.y=this.data.y,this.node.width=this.data.width,this.node.height=this.data.height},t.prototype.getState=function(){for(var t=[],e=0;e<this.node.children.length;e++)t.push(this.node.children[e].getComponent("cjs").unitjs.getState());return t},t.prototype.changeState=function(){},t.prototype.isNeedReset=function(){for(var t=0;t<this.node.children.length;t++)if(!this.node.children[t].getComponent("cjs").unitjs.isNeedReset())return!0;return!1},t.prototype.reset=function(){if(this.isNeedReset()){for(var t=0;t<this.node.children.length;t++)this.node.children[t].getComponent("cjs").unitjs.reset();return!0}return!1},t.prototype.getAllObjs=function(){for(var t=[],e=0;e<this.node.children.length;e++)t.push(this.node.children[e].getComponent("cjs"));return t},__decorate([r([cc.Prefab])],t.prototype,"oPrefabs",void 0),t=__decorate([a],t)}(o.default);i.default=c,cc._RF.pop()},{"../../scripts/networkdata":"networkdata","./absgroup":"absgroup"}],layer:[function(t,e,i){"use strict";cc._RF.push(e,"ad42bkQejZITIhYC3DmjPNB","layer"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../touch/touchhandler"),s=cc._decorator,n=s.ccclass,a=s.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t.scale=null,t.touchHandler=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.load()},__decorate([a(cc.Node)],t.prototype,"scale",void 0),__decorate([a(o.default)],t.prototype,"touchHandler",void 0),t=__decorate([n],t)}(cc.Component);i.default=r,cc._RF.pop()},{"../touch/touchhandler":"touchhandler"}],networkdata:[function(t,e,i){"use strict";cc._RF.push(e,"52da7BByq9OyJAU/RKLuPpt","networkdata"),Object.defineProperty(i,"__esModule",{value:!0});var p,o,s,n,a,r,h,c,u,d,l=cc._decorator,y=l.ccclass;l.property;(o=p=i.PLATFORM||(i.PLATFORM={}))[o.ITS=0]="ITS",o[o.IPS=1]="IPS",(n=s=i.TIMER_TYPE||(i.TIMER_TYPE={}))[n.COUNTDOWN=0]="COUNTDOWN",n[n.TOTAL_COUNTDOWN=1]="TOTAL_COUNTDOWN",n[n.COUNTUP=2]="COUNTUP",(a=i.QUESTION_TYPE||(i.QUESTION_TYPE={}))[a.SINGLE_CHOICE=1]="SINGLE_CHOICE",a[a.JUDGMENT=2]="JUDGMENT",a[a.SHORT_ANSWER=3]="SHORT_ANSWER",(r=i.GROUP_TYPE||(i.GROUP_TYPE={}))[r.GRID=0]="GRID",r[r.CUSTOM=1]="CUSTOM",(c=h=i.UNIT_TYPE||(i.UNIT_TYPE={}))[c.OPTION=0]="OPTION",c[c.TARGET=1]="TARGET",c[c.DEFAULT=2]="DEFAULT",c[c.TITLE=3]="TITLE",c[c.OPTION_AREA=4]="OPTION_AREA",c[c.NONE=5]="NONE",c[c.TREE=6]="TREE",c[c.CLOUD=7]="CLOUD",c[c.RAINBOW=8]="RAINBOW",(u=i.UNIT_TOUCH_TYPE||(i.UNIT_TOUCH_TYPE={}))[u.DARG_MOVE=0]="DARG_MOVE",u[u.CLICK=1]="CLICK",u[u.DRAG_SLIDE=2]="DRAG_SLIDE",u[u.NONE=3]="NONE",(d=i.PREFAB_TYPE||(i.PREFAB_TYPE={}))[d.TITLE=0]="TITLE",d[d.NUMBER=1]="NUMBER";var g=function(){function t(){}return t=__decorate([y],t)}();i.GroupData=g;var m,f=function(){function t(){}var e;return(e=t).prototype.clone=function(){var t=new e;return t.oid=this.oid,t.type=this.type,t.touchType=this.touchType,t.id=this.id,t.content=this.content,t.imgUrl=this.imgUrl,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.prefabtype=this.prefabtype,t.infinite=this.infinite,t.state=this.state,t.verify=this.verify,t.choosed=this.choosed,t.tipnextstep=this.tipnextstep,t},t.prototype.equal=function(t){return this.oid===t.oid&&this.type===t.type&&this.touchType===t.touchType&&this.id===t.id&&this.content===t.content&&this.imgUrl===t.imgUrl&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.prefabtype===t.prefabtype&&this.infinite===t.infinite&&this.state===t.state&&this.verify===t.verify&&this.choosed===t.choosed&&this.tipnextstep===t.tipnextstep},t=e=__decorate([y],t)}();i.UnitData=f,(m=i.RuleType||(i.RuleType={}))[m.SINGLE_CHOICE=0]="SINGLE_CHOICE",m[m.JUDGMENT=1]="JUDGMENT",m[m.SINGLE_CHOICE_CLICK=2]="SINGLE_CHOICE_CLICK",m[m.JUDGMENT_CLICK=3]="JUDGMENT_CLICK";var v=function(){function t(){}return t=__decorate([y],t)}();i.RuleData=v;var b=function(){function t(){this.spritUrls=[]}return t=__decorate([y],t)}();i.Question=b;var _=function(){function t(){this.valid=!1,this.spriteMaps={}}return t.prototype.getSpriteFrame=function(t){var e=this.spriteMaps&&this.spriteMaps[t]&&this.spriteMaps[t].content;return e instanceof cc.Texture2D?new cc.SpriteFrame(e):null},t=__decorate([y],t)}();i.GameData=_;var T=function(){function t(){this.answerTime=0,this.leveLQuestionDetailNum="",this.levelQuestionDetailID="",this.answerStatus="2",this.answerContext=""}return t=__decorate([y],t)}();i.PlayerData=T;var A=function(){function t(){}return t.prototype.requestData=function(t,e){var i=cc.loader.getXMLHttpRequest(),o=this.getQueryString("fileUrl");i.open("GET",o),cc.sys.isNative&&i.setRequestHeader("Accept-Encoding","gzip,deflate"),i.timeout=6e4;var s=this;i.onreadystatechange=function(){try{i.readyState===XMLHttpRequest.DONE&&(cc.log(i.responseText.substring(0,30)),200===i.status?s.parseData(i.responseText,t,e,function(t){t.valid?s.game.eventBus.dispatchEvent("dataloaded",t):(cc.log("There was a problem with the request."),s.gameLoadFailed(2))}.bind(s)):(cc.log("There was a problem with the request."),s.gameLoadFailed(1)))}catch(t){cc.log("Caught Exception: "+t.description),s.gameLoadFailed(1)}},i.send()},t.prototype.parseData=function(t,e,i,o){var s=JSON.parse(t),n=new _;if(s||0<s.length){var a="number"==typeof s[0].tipsIndex&&0<=s[0].tipsIndex&&s[0].tipsIndex<i.length?s[0].tipsIndex:0;n.tips=this.parseItem(i[a],e,i);for(var r,c=new Array,h=0;h<s.length;h++)r=this.parseItem(s[h],e,i),r=this.varifyItem(r),c.push(r);n.questionlist=c,n.gameName=this.getQueryString("gameName"),n.platform="its"===this.getQueryString("platform")?p.ITS:p.IPS,n.timerType=c[0].timerType,n.totalTimeList=this._getTotalTimeList(c),n.valid=!0,n.playerData=function(){for(var t,e=[],i=0;i<n.questionlist.length;i++)(t=new T).levelQuestionDetailID=n.questionlist[i].levelQuestionDetailID,t.leveLQuestionDetailNum=n.questionlist[i].leveLQuestionDetailNum,e.push(t);return e}(),this.loadPic(n,function(t){t.r?(this.gameLoadSuccess(c.length),o(n)):this.gameLoadFailed(1)}.bind(this))}},t.prototype.parseItem=function(o,s,t){var n=this,i=new b;if(i.timerType=o.interactiveJson&&o.interactiveJson.timerType&&this._getTimerType(o.interactiveJson.timerType),i.time=o.interactiveJson&&parseInt(""+o.interactiveJson.time),i.levelQuestionDetailID=o.questionid,i.leveLQuestionDetailNum=o.orderid,i.qescont=this.filteSpan(o.qescont),i.qescontImg=o.quescontimg,i.spritUrls=o.quescontimg,i.quecontAudio=o.qescontsound,i.type=o.queType,i.groups=o.interactiveJson&&o.interactiveJson.groups instanceof Array&&o.interactiveJson.groups.map(function(i){var t=new g;return t.id=i.id,t.objs=i.objs instanceof Array&&i.objs.map(function(t){var e=new f;return e.id=t.id,e.type="number"==typeof s.objstype[t.type]?s.objstype[t.type]:s.objstype[s.groups[i.id].objstype],e.content=n.filteSpan(t.content),e.imgUrl=o.quescontimg instanceof Array&&t.imgurl&&o.quescontimg[t.imgurl],e.touchType="number"==typeof s.objstouchType[t.touchType]?s.objstouchType[t.touchType]:s.objstouchType[s.groups[i.id].objstouchType],e.x=t.x,e.y=t.y,e.infinite="boolean"==typeof t.infinite?t.infinite:s.groups[i.id].infinite,e.width=s.groups[i.id].osizew,e.height=s.groups[i.id].osizeh,e.prefabtype=s.prefabtype[s.groups[i.id].prefabtype],e.verify="boolean"==typeof t.verify?t.verify:s.groups[i.id].verify,e.choosed=!1,e.state=t.state instanceof Array&&0<t.state.length?t.state:s.groups[i.id].state,e.tipnextstep="boolean"==typeof t.tipnextstep?t.tipnextstep:s.groups[i.id].tipnextstep,e}),t.type=s.grouptype[s.groups[i.id].type],t.colNum=s.groups[i.id].colNum,t.horizontalSpace=s.groups[i.id].horizontalSpace,t.verticalSpace=s.groups[i.id].verticalSpace,t.x=s.groups[i.id].x,t.y=s.groups[i.id].y,t.width=s.groups[i.id].width,t.height=s.groups[i.id].height,t}),i.rules=o.interactiveJson&&o.interactiveJson.rules instanceof Array&&o.interactiveJson.rules.map(function(t){var e=new v;return e.id=t.id,e.value=t.value,e.type=s.rules[t.type].type,e.objs=t.objs,e}),i.groups instanceof Array||(i.groups=[]),i.rules instanceof Array||(i.rules=[]),i.spritUrls instanceof Array?i.spritUrls.filter(function(t){return t}):i.spritUrls=[],(1===o.queType||2===o.queType)&&o.optionandanswers&&o.optionandanswers[0].options instanceof Array){var e=new g,a=new v;e.id="options",e.objs=o.optionandanswers[0].options.map(function(t){var e=new f;return e.id=t.optionno,e.type="number"==typeof s.objstype[t.type]?s.objstype[t.type]:s.objstype[s.groups.options.objstype],e.content=n.filteSpan(t.optioncontent),e.touchType="number"==typeof s.objstouchType[t.touchType]?s.objstouchType[t.touchType]:s.objstouchType[s.groups.options.objstouchType],e.imgUrl=t.optioncontimg,e.x=t.x,e.y=t.y,e.infinite="boolean"==typeof t.infinite?t.infinite:s.groups.options.infinite,e.width=s.groups.options.osizew,e.height=s.groups.options.osizeh,e.prefabtype=s.prefabtype[s.groups.options.prefabtype],e.verify="boolean"==typeof t.verify?t.verify:s.groups.options.verify,e.choosed=!1,e.state=t.state instanceof Array&&0<t.state.length?t.state:s.groups.options.state,e.tipnextstep="boolean"==typeof t.tipnextstep?t.tipnextstep:s.groups.options.tipnextstep,t.optioncontimg&&i.spritUrls.push(t.optioncontimg),e}),e.type=s.grouptype[s.groups.options.type],e.colNum=s.groups.options.colNum,e.horizontalSpace=s.groups.options.horizontalSpace,e.verticalSpace=s.groups.options.verticalSpace,e.x=s.groups.options.x,e.y=s.groups.options.y,e.width=s.groups.options.width,e.height=s.groups.options.height,a.id="options",a.value=this.filteSpan(o.optionandanswers[0].rightanswer),a.type=s.rules[s.groups.options.ruletype].type,a.objs=o.optionandanswers[0].options.map(function(t){return t.optionno}),i.rules.forEach(function(t){"options"===t.id&&("string"==typeof t.value&&(a.value=t.value),"number"==typeof t.type&&(a.type=t.type))}),i.groups.push(e),i.rules.push(a)}if(this.filteSpan(o.qescont)){var r=new g;r.id="title";var c=new f;c.id="title",c.type=h.TITLE,c.content=this.filteSpan(o.qescont),c.imgUrl="",c.x=0,c.y=0,c.width=s.groups.title.osizew,c.height=s.groups.title.osizeh,c.prefabtype=s.prefabtype[s.groups.title.prefabtype],r.objs=[c],r.type=s.grouptype[s.groups.title.type],r.colNum=s.groups.title.colNum,r.horizontalSpace=s.groups.title.horizontalSpace,r.verticalSpace=s.groups.title.verticalSpace,r.x=s.groups.title.x,r.y=s.groups.title.y,r.width=s.groups.title.width,r.height=s.groups.title.height}return i.groups.push(r),i.interactiveJson=o.interactiveJson,i},t.prototype.varifyItem=function(t){return t.isvalid=!0,t.invalidalert="",t},t.prototype._getTimerType=function(t){switch(t){case 0:return s.COUNTDOWN;case 1:return s.TOTAL_COUNTDOWN;case 2:return s.COUNTUP;default:return s.COUNTDOWN}},t.prototype._getTotalTimeList=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].time);return e},t.prototype.loadPic=function(i,o){for(var e=[],t=0;t<i.questionlist.length;t++)i.questionlist[t].spritUrls instanceof Array&&0<i.questionlist[t].spritUrls.length&&i.questionlist[t].spritUrls.forEach(function(t){e.push(t)});if(0<e.length){cc.loader.load(e,function(t,e){t?o({d:i,r:!1}):(i.spriteMaps=e.map,o({d:i,r:!0}))})}else o({d:i,r:!0})},t.prototype.gameLoadSuccess=function(t){var e=encodeURI("isShow=1&totalNumber="+t);window.location.href="optionBlank://gameLoadSuccess?"+e},t.prototype.gameLoadFailed=function(t){if(1==t){var e=encodeURI("errcode=10001&errmsg=下载失败");window.location.href="optionBlank://gameLoadFailed?"+e}else{e=encodeURI("errcode=10002&errmsg=解析失败");window.location.href="optionBlank://gameLoadFailed?"+e}},t.prototype.gameLoadProcess=function(t,e){var i=encodeURI("nowNumber="+t+"&totalNumber="+e);window.location.href="optionBlank://gameLoadProgress?"+i},t.prototype.gameOver=function(t){cc.log(t);var e=encodeURI(JSON.stringify(t));window.location.href="optionBlank://gameOver?status=1&data="+e},t.prototype.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null},t.prototype.filteSpan=function(t){return void 0===t&&(t=""),t&&(t=(t=t.replace("<span>","")).replace("</span>","")),t},t=__decorate([y],t)}();i.default=A,cc._RF.pop()},{}],numSpineJs:[function(t,e,i){"use strict";cc._RF.push(e,"1e957f9+hJD0I91pzAPXk7N","numSpineJs"),Object.defineProperty(i,"__esModule",{value:!0});var n=["stand","grasp","happy","happy_coterie","sad","jump","original_number"],o=cc._decorator,s=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine0=null,t.spine1=null,t.spine2=null,t.spine3=null,t.spine4=null,t.spine5=null,t.spine6=null,t.spine7=null,t.spine8=null,t.spine9=null,t.objs=new Array,t}return __extends(t,e),t.prototype.onLoad=function(){this.stand=null,this.number=null},t.prototype.init=function(t){if(t=t.toString(),this.number!==t){for(var e=0;this.number&&e<this.number.length;e++){this["spine"+(o=t.charAt(e))+e]=null,this["spineEyel"+o+e]=null,this["spineEyer"+o+e]=null,this["_Eyelx"+o+e]=null,this["_Eyely"+o+e]=null}for(;0<this.objs.length;)this.objs.shift().destroy();if("string"==typeof(this.number=t))for(var i=0;i<t.length;i++){var o=t.charAt(i),s=cc.instantiate(this["spine"+o]);this.objs.push(s),this.node.addChild(s),s.position=cc.p(-t.length/2*160+160*i+5+75,0),this["spine"+o+i]=s.getComponent("sp.Skeleton"),this["spineEyel"+o+i]=this["spine"+o+i].findBone("eye_l"),this["spineEyer"+o+i]=this["spine"+o+i].findBone("eye_r"),this["_Eyelx"+o+i]=this["spineEyel"+o+i].x,this["_Eyely"+o+i]=this["spineEyer"+o+i].y}this.stand=null,this.setStand(0)}},t.prototype.setStand=function(t){var e=null;if("string"==typeof t){for(var i=0;i<n.length;i++)if(n[i]==t){e=t;break}}else{if("number"!=typeof t)return;e=n[t]}if(e&&e!==this.stand){this.stand=e;for(var o=0;o<this.number.length;o++){var s=this.number.charAt(o);this["spineEyel"+s+o].x=this["_Eyelx"+s+o],this["spineEyel"+s+o].y=this["_Eyely"+s+o],this["spineEyer"+s+o].x=this["_Eyelx"+s+o],this["spineEyer"+s+o].y=this["_Eyely"+s+o],this["spine"+s+o].setAnimation(0,e,!0)}this.resetEyePos()}},t.prototype.getStand=function(){return this.stand||""},t.prototype.getNumber=function(){return this.number||""},t.prototype.getEyseParent=function(){return this.node.convertToWorldSpaceAR(cc.p(0,0))},t.prototype.getEyseRotatePos=function(t,e){var i=cc.p(t.x-e.x,t.y-e.y),o=cc.pNormalize(i),s=cc.pDistance(e,cc.p(t.x,t.y)),n=Math.min(s/70*2,10);return cc.pAdd(cc.p(0,0),cc.pMult(o,n))},t.prototype.setEysePos=function(t){if("string"!=typeof this.stand||"stand"===this.stand)for(var e=this.getEyseRotatePos(t,this.getEyseParent()),i=0;i<this.number.length;i++){var o=this.number.charAt(i);this["spineEyel"+o+i]&&this["spineEyer"+o+i]&&(this["spineEyel"+o+i].x=-e.y+this["_Eyelx"+o+i],this["spineEyel"+o+i].y=e.x+this["_Eyely"+o+i],this["spineEyer"+o+i].x=-e.y+this["_Eyelx"+o+i],this["spineEyer"+o+i].y=e.x+this["_Eyely"+o+i])}},t.prototype.resetEyePos=function(){for(var t=0;this.number&&t<this.number.length;t++){var e=this.number.charAt(t);this["spineEyel"+e+t]&&this["spineEyer"+e+t]&&(this["spineEyel"+e+t].x=this["_Eyelx"+e+t],this["spineEyel"+e+t].y=this["_Eyely"+e+t],this["spineEyer"+e+t].x=this["_Eyelx"+e+t],this["spineEyer"+e+t].y=this["_Eyely"+e+t])}},t.prototype.onEnable=function(){for(var t=0;this.number&&t<this.number.length;t++){var e=this.number.charAt(t);this["spine"+e+t]&&(this["spine"+e+t].setAnimation(0,this.stand,!0),this["spineEyel"+e+t]=this["spine"+e+t].findBone("eye_l"),this["spineEyer"+e+t]=this["spine"+e+t].findBone("eye_r"),this["_Eyelx"+e+t]=this["spineEyel"+e+t].x,this["_Eyely"+e+t]=this["spineEyer"+e+t].y)}},t.prototype.onDisable=function(){},__decorate([a(cc.Prefab)],t.prototype,"spine0",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine1",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine2",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine3",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine4",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine5",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine6",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine7",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine8",void 0),__decorate([a(cc.Prefab)],t.prototype,"spine9",void 0),t=__decorate([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],number:[function(t,e,i){"use strict";cc._RF.push(e,"64df4kjObxOXZx1x6XskT8v","number"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.setData=function(t){this.label.string=t?t.replace(/\+/g,",").replace(/\=/g,".").replace(/\?/g,"/"):""},__decorate([n(cc.Label)],t.prototype,"label",void 0),t=__decorate([s],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],obj:[function(t,e,i){"use strict";cc._RF.push(e,"de467N5mV5K5pSQBk8fxSWd","obj"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../game"),s=cc._decorator,n=s.ccclass,a=s.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t}return __extends(t,e),__decorate([a(o.default)],t.prototype,"game",void 0),t=__decorate([n],t)}(cc.Component);i.default=r,cc._RF.pop()},{"../game":"game"}],progress:[function(t,e,i){"use strict";cc._RF.push(e,"1f7439zrZFDKIL/1mwVCHcs","progress"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./absprogress"),n=t("../../scripts/networkdata"),a=t("../../scripts/touch/touchone"),s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t.objs=new Array,t.objsMap={},t.groups=new Array,t.groupPrefab=null,t.scale=null,t}return __extends(t,e),t.prototype.load=function(){},t.prototype.setData=function(t,e){var i=this;cc.log("Set data in process."),cc.log("Progress data is: %o",-1===e?t.tips:t.questionlist[e]),this.data=-1===e?t.tips:t.questionlist[e],this.touchHandler.game=this.game,-1===e?this.touchHandler.disable():this.touchHandler.enable(),this.objs.splice(0),this.objsMap={},this.groups.forEach(function(t,e){t.node.destroy()}),this.groups.splice(0);for(var o,s=0;s<this.data.groups.length;s++){(o=cc.instantiate(this.groupPrefab)).parent=this.scale,o.getComponent("group").game=this.game,o.getComponent("group").setData(this.data.groups[s]);var n=this;this.groups.push(o.getComponent("group")),o.getComponent("group").getAllObjs().forEach(function(t){i.objs.push(t),t.touchjs.handler=n.touchHandler})}this.objs.forEach(function(t){i.objsMap[t.unitjs.data.id]=t})},t.prototype.preAnimation=function(e){var i=0;this.game.playdaudiotime=0,this.game.playdaudioable=!0;for(var t=0;t<this.groups.length;t++)"options"===this.groups[t].data.id&&this.groups[t].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=a.TouchType.NONE,t.y=500,i=Math.max(1/360*Math.abs(t.getComponent("cjs").unitjs.data.y-t.y),i),t.runAction(cc.moveTo(1/360*Math.abs(t.getComponent("cjs").unitjs.data.y-t.y),t.getComponent("cjs").unitjs.data.x,t.getComponent("cjs").unitjs.data.y).easing(cc.easeCubicActionOut()))});this.scheduleOnce(function(){for(var t=0;t<this.groups.length;t++)"options"===this.groups[t].data.id&&this.groups[t].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=a.TouchType.CLICK});e&&e()}.bind(this),Math.max(.5,i-1))},t.prototype.postAnimation=function(e,t,i){var o=0;this.game.playdaudioable=!1;for(var s=0;s<this.groups.length;s++)"options"===this.groups[s].data.id&&this.groups[s].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=a.TouchType.NONE,"string"==typeof i&&t.getComponent("cjs").unitjs.getState().id===i&&(t.getComponent("cjs").unitjs.getState().choosed=!0),t.getComponent("cjs").unitjs.getState().choosed?e?(t.getComponent("cjs").unitjs.playHappyAudio(),t.getComponent("cjs").unitjs.playHappyResult(),o=Math.max(1/360*Math.abs(-1200-t.y)+3,o),t.runAction(cc.sequence(cc.delayTime(3),cc.moveTo(1/360*Math.abs(-1200-t.y)*.7,t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionIn())))):(t.getComponent("cjs").unitjs.playUnHappyAudio(),t.getComponent("cjs").unitjs.playSadResult(),o=Math.max(1/360*Math.abs(-1200-t.y),o),t.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveBy(.1,15,10).easing(cc.easeCubicActionOut()),cc.moveBy(.1,-15,-10)).easing(cc.easeCubicActionOut()),5),cc.moveTo(1/360*Math.abs(-1200-t.y)*.6,t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut())))):e?(o=Math.max(1/360*Math.abs(-1200-t.y)+.1,o),t.runAction(cc.sequence(cc.delayTime(.1),cc.moveTo(1/360*Math.abs(-1200-t.y),t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut())))):(o=Math.max(1/360*Math.abs(-1200-t.y)+2,o),t.runAction(cc.sequence(cc.delayTime(2),cc.moveTo(1/360*Math.abs(-1200-t.y),t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut()))))});this.scheduleOnce(function(){t&&t()}.bind(this),Math.max(.5,o))},t.prototype.pause=function(){cc.log("Progress pause.")},t.prototype.resume=function(){cc.log("Progress resume.")},t.prototype.isRight=function(){for(var t,e=0;e<this.data.rules.length;e++)if((t=this.data.rules[e]).type===n.RuleType.SINGLE_CHOICE);else if(t.type===n.RuleType.JUDGMENT);else{if(t.type===n.RuleType.SINGLE_CHOICE_CLICK){for(var i=[],o=0;t.objs&&o<t.objs.length;o++)i.push(this.objsMap[t.objs[o]]);var s=i.filter(function(t){return t.unitjs.getState().choosed});return t.value===(0<s.length?s[0].unitjs.getState().id:void 0)}t.type,n.RuleType.JUDGMENT_CLICK}return 0<this.data.rules.length},t.prototype.getAnswer=function(){for(var t,e=0;e<this.data.rules.length;e++){if((t=this.data.rules[e]).type===n.RuleType.SINGLE_CHOICE)return"";if(t.type===n.RuleType.JUDGMENT)return"";if(t.type===n.RuleType.SINGLE_CHOICE_CLICK){for(var i=[],o=0;t.objs&&o<t.objs.length;o++)i.push(this.objsMap[t.objs[o]]);var s=i.filter(function(t){return t.unitjs.getState().choosed});return 0<s.length?s[0].unitjs.getState().id:""}if(t.type===n.RuleType.JUDGMENT_CLICK)return""}return""},t.prototype.isNeedReset=function(){for(var t=0;t<this.groups.length;t++)if(this.groups[t].isNeedReset())return!0;return!1},t.prototype.isFinish=function(){return!0},t.prototype.reset=function(){if(this.isNeedReset()){for(var t=0;t<this.groups.length;t++)this.groups[t].reset();return!0}return!1},t.prototype.onEnable=function(){this.game.eventBus.register("verify",this.commit.bind(this),"progress",this.node),this.game.eventBus.register("touchmovem",this.moveEyes.bind(this),"touchmovem"),this.game.eventBus.register("touchreset",this.moveEyes.bind(this),"touchreset")},t.prototype.onDisable=function(){this.game.eventBus.unregister("verify",this.commit.bind(this),"progress",this.node),this.game.eventBus.unregister("touchmovem",this.moveEyes.bind(this),"touchmovem"),this.game.eventBus.unregister("touchreset",this.moveEyes.bind(this),"touchreset")},t.prototype.moveEyes=function(t,e){"touchmovem"===t?this.objs.forEach(function(t){t.unitjs.moveEye(e.getUserData())}):"touchreset"===t&&this.objs.forEach(function(t){t.unitjs.moveEye(null)})},t.prototype.commit=function(){cc.log("commit"),this.game.stopTimer(),this.isRight()?(this.game.collectPlayerDataByIndex("1",this.getAnswer()),this.game.playRightAudio(),this.postAnimation(!0,function(){this.game.gameData.platform===n.PLATFORM.IPS&&this.game.eventBus.dispatchEvent("nextscene",null)}.bind(this))):(this.game.collectPlayerDataByIndex("2",this.getAnswer()),this.game.playFallingAudio(),this.postAnimation(!1,function(){this.game.gameData.platform===n.PLATFORM.IPS&&this.game.eventBus.dispatchEvent("nextscene",null)}.bind(this)))},__decorate([c(cc.Prefab)],t.prototype,"groupPrefab",void 0),__decorate([c({override:!0,type:cc.Node})],t.prototype,"scale",void 0),t=__decorate([r],t)}(o.default);i.default=h,cc._RF.pop()},{"../../scripts/networkdata":"networkdata","../../scripts/touch/touchone":"touchone","./absprogress":"absprogress"}],questionlist:[function(t,e,i){"use strict";cc._RF.push(e,"5c23bzGB/tIAo2bDxNRP4eA","questionlist"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbtnbg=null,t.btnbg=null,t.btnsc=new Array,t.count=0,t.clickCallbackFunc=new Array,t}return __extends(t,e),t.prototype.onLoad=function(){this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right"),this.btns=this.node.getChildByName("btns"),this.pageNum=parseInt(""+this.count/7)+(0<this.count%7?1:0),this.cPageNum=0,this.selectNum=0,this.clickable=!0,this.btnsPos=[];for(var t=0;t<this.btnsc.length;t++)this.btnsPos.push(cc.p(this.btnsc[t].x,this.btnsc[t].y));this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.refreshBtns()},t.prototype.setData=function(t){this.count="number"==typeof t?t:0,this.pageNum=parseInt(""+this.count/7)+(0<this.count%7?1:0),this.cPageNum=0,this.selectNum=0,this.clickable=!0,this.count<7?(this.left.active=!1,this.right.active=!1):(this.left.active=!0,this.right.active=!0),this.refreshBtns()},t.prototype.addClickListener=function(t){t instanceof cc.Component.EventHandler&&this.clickCallbackFunc.push(t)},t.prototype.refreshBtns=function(){for(var t=this.cPageNum<this.pageNum-1?7:(this.count-7*this.cPageNum)%8,e=0;e<t;e++)this.btnsc[e].active=!0,this.btnsc[e].getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.selectNum===7*this.cPageNum+e?this.lbtnbg:this.btnbg,this.btnsc[e].getChildByName("lable").getComponent(cc.Label).string=""+(7*this.cPageNum+e+1);for(e=t;e<7;e++)this.btnsc[e].active=!1},t.prototype.hint=function(t){cc.log(t)},t.prototype.leftVectorClick=function(){1<=this.cPageNum&&this.cPageNum--,this.refreshBtns()},t.prototype.rightVectorClick=function(){this.cPageNum<this.pageNum-1&&this.cPageNum++,this.refreshBtns()},t.prototype.touchStart=function(t){for(var e=this.btns.convertToNodeSpaceAR(t.getLocation()),i=0,o=void 0,s=void 0;i<this.btnsPos.length;i++)if(cc.pDistance(this.btnsPos[i],e)<40&&this.btnsc[i].active){0<=(o=this.selectNum-7*this.cPageNum)&&o<7&&(this.btnsc[o].getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.btnbg),this.selectNum=i+7*this.cPageNum,0<=(s=this.selectNum-7*this.cPageNum)&&s<7&&(this.btnsc[s].getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.lbtnbg);for(var n=0;n<this.clickCallbackFunc.length;n++){var a=this.clickCallbackFunc[n].target,r=a&&a.getComponent(this.clickCallbackFunc[n].component),c=r&&r[this.clickCallbackFunc[n].handler],h=this.clickCallbackFunc[n].customEventData;if(a&&r&&c){var p=new cc.Event.EventCustom("Click",!0);p.setUserData(i+7*this.cPageNum),c.call(r,p,h)}}break}},__decorate([n(cc.SpriteFrame)],t.prototype,"lbtnbg",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"btnbg",void 0),__decorate([n([cc.Node])],t.prototype,"btnsc",void 0),__decorate([n(Number)],t.prototype,"count",void 0),__decorate([n([cc.Component.EventHandler])],t.prototype,"clickCallbackFunc",void 0),t=__decorate([s],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],rainbow:[function(t,e,i){"use strict";cc._RF.push(e,"5b2dbfaAsRF8LM+57AG7zn6","rainbow"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./game"),s=t("./touch/touchhandler"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t.touchHandler=null,t.stars=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.rainbowTouch=function(t,e){var i=e.getUserData();if("touchmovem"===t)if(i){for(var o=!1,s=0;s<this.node.children.length;s++)if(cc.rectContainsPoint(this.node.children[s].getBoundingBoxToWorld(),i)){o=!0;break}this.stars.active=o,this.stars.position=this.stars.parent.convertToNodeSpaceAR(i),o&&this.game.playMagicAudio()}else this.stars.active=!1;else"touchreset"===t&&(this.stars.active=!1)},t.prototype.onEnable=function(){this.game.eventBus.register("touchmovem",this.rainbowTouch.bind(this),"rtouchmovem"),this.game.eventBus.register("touchreset",this.rainbowTouch.bind(this),"rtouchreset")},t.prototype.onDisable=function(){this.game.eventBus.unregister("touchmovem",this.rainbowTouch.bind(this),"rtouchmovem"),this.game.eventBus.unregister("touchreset",this.rainbowTouch.bind(this),"rtouchreset")},__decorate([r(o.default)],t.prototype,"game",void 0),__decorate([r(s.default)],t.prototype,"touchHandler",void 0),__decorate([r(cc.Node)],t.prototype,"stars",void 0),t=__decorate([a],t)}(cc.Component);i.default=c,cc._RF.pop()},{"./game":"game","./touch/touchhandler":"touchhandler"}],scale:[function(t,e,i){"use strict";cc._RF.push(e,"86be4zcyERM+7FeFPzq1x5b","scale"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.designSize=new cc.Size(0,0),t}return __extends(t,e),t.prototype.onLoad=function(){var t=Math.min(cc.winSize.width/this.designSize.width,cc.winSize.height/this.designSize.height);this.node.setScale(t,t)},__decorate([n(cc.Size)],t.prototype,"designSize",void 0),t=__decorate([s],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],settlement:[function(t,e,i){"use strict";cc._RF.push(e,"a9619CFwnhKPYqLQ+UIbmWj","settlement"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./abssettlement"),s=cc._decorator,n=s.ccclass,a=s.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winanim=null,t.loseanim=null,t.timeupanim=null,t}return __extends(t,e),t.prototype.load=function(){},t.prototype.setData=function(t,e){cc.log("Set data in settlement.")},t.prototype.pause=function(){cc.log("Settle pause.")},t.prototype.resume=function(){cc.log("Settle resume.")},t.prototype.win=function(t){cc.log("Win"),this.winanim.node.active=!0,this.winanim.setAnimation(0,"animation",!1),this.winanim.setCompleteListener(function(){this.winanim.clearTrack(0),this.winanim.node.active=!1,t&&t()}.bind(this))},t.prototype.lose=function(t){cc.log("Lose"),this.loseanim.node.active=!0,this.loseanim.setAnimation(0,"animation",!1),this.loseanim.setCompleteListener(function(){this.loseanim.clearTrack(0),this.loseanim.node.active=!1,t&&t()}.bind(this))},t.prototype.timeup=function(t){cc.log("Time up"),this.timeupanim.node.active=!0,this.timeupanim.setAnimation(0,"animation",!1),this.timeupanim.setCompleteListener(function(){this.timeupanim.clearTrack(0),this.timeupanim.node.active=!1,t&&t()}.bind(this))},__decorate([a(sp.Skeleton)],t.prototype,"winanim",void 0),__decorate([a(sp.Skeleton)],t.prototype,"loseanim",void 0),__decorate([a(sp.Skeleton)],t.prototype,"timeupanim",void 0),t=__decorate([n],t)}(o.AbsSettlement);i.default=r,cc._RF.pop()},{"./abssettlement":"abssettlement"}],stepdata:[function(t,e,i){"use strict";cc._RF.push(e,"aa8d0QpqsBJVq5t58f3zyX6","stepdata"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,n=(o.property,function(){function t(){}return t=__decorate([s],t)}());i.default=n,cc._RF.pop()},{}],step:[function(t,e,i){"use strict";cc._RF.push(e,"912a8xf4ttNlYi0SBlbLX5j","step"),Object.defineProperty(i,"__esModule",{value:!0});var o,s=cc._decorator;s.ccclass,s.property;(o=i.StepType||(i.StepType={}))[o.MANUAL=0]="MANUAL",o[o.AUTO=1]="AUTO";var n=function(){this.game=null,this.touchHandler=null},a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showhandAnim=!1,t}return __extends(t,e),t.prototype.setData=function(t){this.data=t},t.prototype.start=function(){this._tip()},t.prototype._tip=function(){this.pre(),this.progress(),this.game.scheduleOnce(function(){this.post()}.bind(this),this.data.totalduration)},t.prototype.pre=function(){cc.log("Step pre"),this.touchHandler.disable(),this.data.objs.forEach(function(e,t){var i=this;if(this.data.pre[e])if("hand"===e){if(this.hand.active=this.showhandAnim,"number"==typeof this.data.pre[e].zIndex&&(this.hand.zIndex=this.data.pre[e].zIndex),"string"==typeof this.data.pre[e].position){var o=this.hand.parent.convertToNodeSpaceAR(this.objsMap[this.data.pre[e].position].node.convertToWorldSpaceAR(cc.p(0,0)));"number"==typeof this.data.pre[e].offsetx&&(o.x=o.x+this.data.pre[e].offsetx),"number"==typeof this.data.pre[e].offsety&&(o.y=o.y+this.data.pre[e].offsety),this.hand.position=o}this.data.post[e]&&this.data.post[e].forEach(function(t){i.hand["o"+t]=i.hand[t]})}else this.objsMap[e].node.active=!0,"number"==typeof this.data.pre[e].zIndex&&(this.objsMap[e].node.zIndex=this.data.pre[e].zIndex),"number"==typeof this.data.pre[e].parentzIndex&&(this.objsMap[e].node.parent.zIndex=this.data.pre[e].parentzIndex),this.data.post[e]&&this.data.post[e].forEach(function(t){i.objsMap[e].node["o"+t]=i.objsMap[e].node[t]}),this.objsMap[e].unitjs.playStandResult()}.bind(this))},t.prototype.progress=function(){cc.log("Step progress"),this.data.objs.forEach(function(t,e){var i=this;if(this.data.actions[t]instanceof Array)if("hand"===t){var o=[];this.data.actions[t].forEach(function(t){if("moveto"===t.type){var e=i.hand.parent.convertToNodeSpaceAR(i.objsMap[t.target].node.convertToWorldSpaceAR(cc.p(0,0)));"number"==typeof t.offsetx&&(e.x=e.x+t.offsetx),"number"==typeof t.offsety&&(e.y=e.y+t.offsety),o.push(cc.moveTo(t.duration,e))}else"scaleto"===t.type?o.push(cc.scaleTo(t.duration,t.target)):"delaytime"===t.type?o.push(cc.delayTime(t.duration)):"fadein"===t.type&&o.push(cc.fadeIn(t.duration))}),0<o.length&&o.push(cc.delayTime(.1)),0<o.length&&this.hand.runAction(cc.sequence(o))}else{o=[];var s=this.objsMap[t].node.parent;this.data.actions[t].forEach(function(t){if("moveto"===t.type){var e=s.convertToNodeSpaceAR(i.objsMap[t.target].node.convertToWorldSpaceAR(cc.p(0,0)));o.push(cc.moveTo(t.duration,e))}}),0<o.length&&o.push(cc.delayTime(.1)),0<o.length&&this.objsMap[t].node.runAction(cc.sequence(o))}}.bind(this))},t.prototype.post=function(){cc.log("Step post"),this.data.objs.forEach(function(e,t){var i=this;this.data.post[e]instanceof Array&&("hand"===e?(this.data.post[e].forEach(function(t){i.hand[t]=i.hand["o"+t]}),this.hand.active=!1):this.data.post[e].forEach(function(t){i.objsMap[e].node[t]=i.objsMap[e].node["o"+t]}))}.bind(this)),this.touchHandler.enable()},t}(i.default=n);i.Step=a,cc._RF.pop()},{}],timer:[function(t,e,i){"use strict";cc._RF.push(e,"0ed2cmk7LRLDKLrpicMIwEP","timer"),Object.defineProperty(i,"__esModule",{value:!0});var o,s,n=cc._decorator,a=n.ccclass,r=n.property;(s=o=i.TimerType||(i.TimerType={}))[s.COUNTDOWN=0]="COUNTDOWN",s[s.TOTAL_COUNTDOWN=1]="TOTAL_COUNTDOWN",s[s.COUNTUP=2]="COUNTUP";var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeupCallFunc=new Array,t.timelable=null,t.type=o.COUNTDOWN,t.count=0,t.totalcount=0,t.ctotaltime=0,t.totaltime=[],t.isinit=!1,t.stimecount=0,t.isTiming=!1,t.validstate=!1,t.istoend=!1,t}return __extends(t,e),t.prototype.iniTimer=function(t,e){this.count=0,this.totalcount=0,this.ctotaltime=0,this.totaltime=[],this.isinit=!1,this.stimecount=0,this.isTiming=!1,this.validstate=!0,this.istoend=!1,this.isTiming&&this.unschedule(this._timecallback),this.stimecount=0,this.type=0!==t&&1!==t&&2!==t?0:t,0!==t&&1!==t&&2!==t&&(cc.warn("Timer type should be 0,1,2. Look up the Timer TYPE for detail."),this.validstate=!1),0===t?(this.totaltime=e instanceof Array?e:[],this.ctotaltime="number"==typeof this.totaltime[this.stimecount]?this.totaltime[this.stimecount]:0,e instanceof Array&&!(e instanceof Array&&0===e.length)||(cc.warn("Total time should be a array of int and at least one element."),this.validstate=!1)):1===t?(this.totaltime="number"==typeof e&&0<e?e:e instanceof Array&&0<e.length&&0<e[0]?e[0]:0,this.ctotaltime=this.totaltime,"number"!=typeof e&&e<=0&&(cc.warn("Total time should be nagative integer."),this.validstate=!1)):2===t&&(this.totaltime=3601,this.ctotaltime=3601),this.isinit=!0,this.totalcount=0,this.timelable.string=this._getTime().showtimetext},t.prototype._timecallback=function(){this.count++,this.totalcount++,0===this.type?this.count>=this.ctotaltime&&(this.unschedule(this._timecallback),this.isTiming=!1,this._timeup()):1===this.type?this.totalcount>=this.ctotaltime&&(this.unschedule(this._timecallback),this.isTiming=!1,this._timeup(),this.istoend=!0):2===this.type&&this.totalcount>=this.ctotaltime&&(this.unschedule(this._timecallback),this.isTiming=!1,this._timeup(),this.istoend=!0),this.timelable.string=this._getTime().showtimetext},t.prototype.startTimer=function(){this.isinit?this.validstate?this.isTiming?cc.warn("Timer is working."):this.istoend?cc.warn("Timer's life is to end."):0===this.type&&this.stimecount>=this.totaltime.length?cc.warn("Total time data is run out, can not start timer any more."):((this.count=0)===this.type&&(this.ctotaltime=this.totaltime[this.stimecount]),this.schedule(this._timecallback,1),this.stimecount++,this.isTiming=!0):cc.warn("Timer state is not valid, check your init data."):cc.warn("You shoul init the timer before using it.")},t.prototype.timeformat=function(t){var e=Math.floor(t/60),i=t%60,o=i<10?"0"+i:i;return 59<t?(e<10?"0"+e:e)+":"+o:"00:"+o},t.prototype.stopTimer=function(t,e){this.isTiming?(this.unschedule(this._timecallback),t&&t.call&&t.call(e||this,this._getTime()),this.isTiming=!1):cc.warn("Timer is not working.")},t.prototype._getTime=function(){var t=0;return 0===this.type?t=this.ctotaltime-this.count:1===this.type?t=this.ctotaltime-this.totalcount:2===this.type&&(t=this.totalcount),{type:this.type,count:this.count,totaltime:this.ctotaltime,totalcount:this.totalcount,showtime:t,showtimetext:this.timeformat(t)}},t.prototype.startTimeTest=function(){this.startTimer()},t.prototype.stopTimeTest=function(){this.stopTimer(function(t){cc.log(t)})},t.prototype.hint=function(t){cc.log(t)},t.prototype._timeup=function(){for(var t=0;t<this.timeupCallFunc.length;t++){var e=this.timeupCallFunc[t].target,i=e&&e.getComponent(this.timeupCallFunc[t].component),o=i&&i[this.timeupCallFunc[t].handler],s=this.timeupCallFunc[t].customEventData;if(e&&i&&o){var n=new cc.Event.EventCustom("TimeUp",!0);n.setUserData(this._getTime()),o.call(i,n,s)}}},t.prototype.addTimeUpListener=function(t){t instanceof cc.Component.EventHandler&&this.timeupCallFunc.push(t)},__decorate([r([cc.Component.EventHandler])],t.prototype,"timeupCallFunc",void 0),__decorate([r(cc.Label)],t.prototype,"timelable",void 0),__decorate([r({type:cc.Enum(o)})],t.prototype,"type",void 0),t=__decorate([a],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],tips:[function(t,e,i){"use strict";cc._RF.push(e,"7801fSAKYlOGqJGKdgeO9rP","tips"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./abstips"),r=t("./step"),s=t("../../scripts/touch/touchone"),n=cc._decorator,a=n.ccclass,c=n.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipSteps=new Array,t.stepIndex=0,t.data=null,t.objs=new Array,t.objsMap={},t.groups=new Array,t.groupPrefab=null,t.hand=null,t.scale=null,t.showTipTime=0,t}return __extends(t,e),t.prototype.load=function(){},t.prototype.setData=function(t,e){var i=this;cc.log("Set data in tips."),cc.log("Tips data is: %o",t.tips),this.touchHandler.game=this.game,this.objs.splice(0),this.objsMap={},this.groups.forEach(function(t,e){t.node.destroy()}),this.groups.splice(0),this.data=t.tips;for(var o,s=0;s<this.data.groups.length;s++){(o=cc.instantiate(this.groupPrefab)).parent=this.scale,o.getComponent("group").game=this.game,o.getComponent("group").setData(this.data.groups[s]),o.children.forEach(function(t){t.active=!1});var n=this;this.groups.push(o.getComponent("group")),o.getComponent("group").getAllObjs().forEach(function(t){i.objs.push(t),t.touchjs.handler=n.touchHandler})}this.objs.forEach(function(t){i.objsMap[t.unitjs.data.id]=t});for(s=0;s<this.data.interactiveJson.steps.length;s++){var a=new r.Step;a.showhandAnim=0!==s,a.setData(this.data.interactiveJson.steps[s]),a.game=this.game,a.objs=this.objs,a.objsMap=this.objsMap,a.hand=this.hand,a.touchHandler=this.touchHandler,this.tipSteps.push(a)}},t.prototype.preAnimation=function(){if(0<this.tipSteps.length){for(var e=0,t=0;t<this.groups.length;t++)"options"===this.groups[t].data.id&&this.groups[t].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=s.TouchType.NONE,t.y=500,e=Math.max(1/360*Math.abs(t.getComponent("cjs").unitjs.data.y-t.y),e),t.runAction(cc.moveTo(1/360*Math.abs(t.getComponent("cjs").unitjs.data.y-t.y),t.getComponent("cjs").unitjs.data.x,t.getComponent("cjs").unitjs.data.y).easing(cc.easeCubicActionOut()))});this.scheduleOnce(function(){for(var t=0;t<this.groups.length;t++)"options"===this.groups[t].data.id&&this.groups[t].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=s.TouchType.CLICK});0===this.stepIndex&&(this.tipSteps[this.stepIndex].showhandAnim=!0)}.bind(this),Math.max(.5,e-1))}},t.prototype.postAnimation=function(e,t){var i=0;this.game.playdaudioable=!1;for(var o=0;o<this.groups.length;o++)"options"===this.groups[o].data.id&&this.groups[o].node.children.forEach(function(t){t.getComponent("cjs").touchjs.touchType=s.TouchType.NONE,t.getComponent("cjs").unitjs.getState().choosed?e?(t.getComponent("cjs").unitjs.playHappyResult(),i=Math.max(1/360*Math.abs(-1200-t.y)+3,i),t.runAction(cc.sequence(cc.delayTime(3),cc.moveTo(1/360*Math.abs(-1200-t.y)*.7,t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionIn())))):(t.getComponent("cjs").unitjs.playSadResult(),i=Math.max(1/360*Math.abs(-1200-t.y),i),t.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveBy(.1,15,10).easing(cc.easeCubicActionOut()),cc.moveBy(.1,-15,-10)).easing(cc.easeCubicActionOut()),5),cc.moveTo(1/360*Math.abs(-1200-t.y)*.6,t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut())))):e?(i=Math.max(1/360*Math.abs(-1200-t.y)+.1,i),t.runAction(cc.sequence(cc.delayTime(.1),cc.moveTo(1/360*Math.abs(-1200-t.y),t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut())))):(i=Math.max(1/360*Math.abs(-1200-t.y)+2,i),t.runAction(cc.sequence(cc.delayTime(2),cc.moveTo(1/360*Math.abs(-1200-t.y),t.getComponent("cjs").unitjs.data.x,-1200).easing(cc.easeCubicActionOut()))))});this.scheduleOnce(function(){t&&t()}.bind(this),Math.max(.5,i))},t.prototype.pause=function(){cc.log("Tips pause.")},t.prototype.resume=function(){cc.log("Tips resume.")},t.prototype.startTip=function(){(this.stepIndex=0)<this.tipSteps.length?this.showStep():this.finish()},t.prototype.showStep=function(){this.tipSteps[this.stepIndex].start()},t.prototype.handled=function(){this.showTipTime=0},t.prototype.close=function(){this.node.active=!1,this.game.startTimer()},t.prototype.finish=function(){var t=this.objs.filter(function(t){return t.unitjs.getState().choosed});this.game.progressJs.postAnimation(!0,null,t&&0<t.length?t[0].unitjs.getState().id:null),this.postAnimation(!0,function(){this.node.active=!1,this.game.startTimer(),this.game.showGame()}.bind(this))},t.prototype.skip=function(){this.node.active=!1,this.game.startTimer(),this.game.showGame()},t.prototype.nextstep=function(){this.stepIndex++,this.stepIndex>=this.tipSteps.length?this.finish():this.showStep()},t.prototype.update=function(t){this.showTipTime+=t,2<this.showTipTime&&this.stepIndex<this.tipSteps.length&&(this.showTipTime=0,this.showStep())},t.prototype.onEnable=function(){this.game.eventBus.register("tipnextstep",this.nextstep.bind(this),"tipnextstep",this.node),this.game.eventBus.register("handled",this.handled.bind(this),"tiphandled",this.node),this.game.eventBus.register("touchmovem",this.moveEyes.bind(this),"touchmovemt"),this.game.eventBus.register("touchreset",this.moveEyes.bind(this),"touchresett")},t.prototype.onDisable=function(){this.game.eventBus.unregister("tipnextstep",this.nextstep,"tipnextstep",this.node),this.game.eventBus.unregister("handled",this.nextstep,"tiphandled",this.node),this.game.eventBus.unregister("touchmovem",this.moveEyes.bind(this),"touchmovemt"),this.game.eventBus.unregister("touchreset",this.moveEyes.bind(this),"touchresett")},t.prototype.moveEyes=function(t,e){"touchmovem"===t?this.objs.forEach(function(t){t.node.active&&t.unitjs.moveEye(e.getUserData())}):"touchreset"===t&&this.objs.forEach(function(t){t.node.active&&t.unitjs.moveEye(null)})},__decorate([c(cc.Prefab)],t.prototype,"groupPrefab",void 0),__decorate([c(cc.Node)],t.prototype,"hand",void 0),__decorate([c({override:!0,type:cc.Node})],t.prototype,"scale",void 0),t=__decorate([a],t)}(o.default);i.default=h,cc._RF.pop()},{"../../scripts/touch/touchone":"touchone","./abstips":"abstips","./step":"step"}],touchhandler:[function(t,e,i){"use strict";cc._RF.push(e,"85bfdOF//xKzKJmFTUJfPh3","touchhandler"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./touchone"),s=cc._decorator,n=s.ccclass,a=s.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unTouchAreas=new Array,t.touchAble=!0,t.dragoption=null,t.dragoptionJs=null,t.game=null,t.touchNodes=new Array,t}return __extends(t,e),t.prototype.onLoad=function(){this.touchId=void 0,this.touchNodes=new Array,this.cTouchNode=null,this.dragoptionJs=this.dragoption.getComponent("unit"),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancle,this)},t.prototype.getTouchNodes=function(){var e=[],i=function(t){t.active&&t.children.forEach(function(t){t.active&&t.getComponent("touchobj")instanceof o.default?e.push(t.getComponent("touchobj")):0<t.childrenCount&&i(t)})};return i(this.node),e},t.prototype.getTouchNodesByPos=function(t,e){for(var i=this.getTouchNodes(),o=0,s=void 0;o<i.length;o++)if(s=i[o].getBoundingBox(),cc.rectContainsPoint(s,t)&&e!==i[o])return i[o];return null},t.prototype.enable=function(){this.touchAble=!0},t.prototype.disable=function(){this.touchAble=!1},t.prototype.onTouchStart=function(t){if(this.touchAble&&(this.touchId===t.getID()||void 0===this.touchId)){for(var e,i=t.getLocation(),o=this.getTouchNodes(),s=null,n=null,a=null,r=0;r<o.length;r++)if(e=o[r].getBoundingBox(),cc.rectContainsPoint(e,i)){if(this.isNumberNode(o[r])){s=o[r];break}n=o[r]}(a=s||n||null)&&(this.cTouchNode&&(this.cTouchNode.restoreState(),this.touchId=void 0),a.canTouch()&&(this.cTouchNode=a,this.cTouchNode.saveState(i),this.touchId=t.getID(),this.touchAMT=0))}},t.prototype.isNumberNode=function(t){return"unit"===t.node.name},t.prototype.onTouchMove=function(t){if(this.touchAble&&this.touchId===t.getID()&&this.cTouchNode){this.touchId=t.getID();var e=t.getLocation(),i=cc.rect(0,-30,cc.winSize.width,cc.winSize.height+30);cc.rectContainsRect(i,this.dragoption.active?this.dragoption.getBoundingBoxToWorld():this.cTouchNode.node.getBoundingBoxToWorld())?this._isInUnTouchArea(this.dragoption.active?this.dragoption.getBoundingBoxToWorld():this.cTouchNode.node.getBoundingBoxToWorld())?(this.cTouchNode.restoreState(),this.touchId=void 0,this.cTouchNode=null):(this.cTouchNode.move(e),this.touchAMT=0):(this.cTouchNode.restoreState(),this.touchId=void 0,this.cTouchNode=null)}var o=t.getLocation();this.game.eventBus.dispatchEvent("touchmovem",o)},t.prototype.onTouchEnd=function(t){if(this.touchAble&&this.touchId===t.getID()&&this.cTouchNode){this.touchId=void 0;var e=t.getLocation(),i=this.cTouchNode.isToTarget(e);i?this.cTouchNode.dropAction(i):this.cTouchNode.restoreState(),this.cTouchNode=null}this.game.eventBus.dispatchEvent("touchreset",null)},t.prototype.onTouchCancle=function(t){this.touchAble&&this.touchId===t.getID()&&this.cTouchNode&&(this.touchId=void 0,this.cTouchNode.restoreState(),this.cTouchNode=null),this.game.eventBus.dispatchEvent("touchreset",null)},t.prototype._isInUnTouchArea=function(t){for(var e=0;e<this.unTouchAreas.length;e++)if(cc.rectIntersectsRect(this.unTouchAreas[e].getBoundingBoxToWorld(),t))return!0;return!1},t.prototype.reset=function(){this.cTouchNode&&(this.cTouchNode.restoreState(),this.cTouchNode=null),this.touchId=void 0,this.dragoption.active=!1},t.prototype.update=function(t){this.touchAMT+=t,5<this.touchAMT&&this.cTouchNode&&(this.reset(),this.touchAMT=0)},__decorate([a([cc.Node])],t.prototype,"unTouchAreas",void 0),__decorate([a(Boolean)],t.prototype,"touchAble",void 0),__decorate([a(cc.Node)],t.prototype,"dragoption",void 0),t=__decorate([n],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./touchone":"touchone"}],touchobj:[function(t,e,i){"use strict";cc._RF.push(e,"de6a7VIhqFA0YMyeHX2w+Op","touchobj"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./touchone"),s=cc._decorator,n=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoadObj=function(){},e=__decorate([n],e)}(o.default));i.default=a,cc._RF.pop()},{"./touchone":"touchone"}],touchone:[function(t,e,i){"use strict";cc._RF.push(e,"16f6aJmbtxDG5wtYe9ZSI2+","touchone"),Object.defineProperty(i,"__esModule",{value:!0});var o,s,n,a,r=cc._decorator,c=r.ccclass;r.property;(s=o=i.TouchOneType||(i.TouchOneType={}))[s.OPTION=0]="OPTION",s[s.TARGET=1]="TARGET",s[s.DEFAULT=2]="DEFAULT",s[s.TITLE=3]="TITLE",s[s.OPTION_AREA=4]="OPTION_AREA",s[s.NONE=5]="NONE",s[s.TREE=6]="TREE",s[s.CLOUD=7]="CLOUD",s[s.RAINBOW=8]="RAINBOW",(a=n=i.TouchType||(i.TouchType={}))[a.DARG_MOVE=0]="DARG_MOVE",a[a.CLICK=1]="CLICK",a[a.DRAG_SLIDE=2]="DRAG_SLIDE",a[a.NONE=3]="NONE";var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t.type=o.NONE,t.touchType=n.NONE,t}return __extends(t,e),t.prototype.onLoad=function(){this.touchOffset=cc.p(0,0),this.onLoadObj()},t.prototype.setData=function(t,e){this.id=t.id,this.content=t.content,this.type=this._getType(t.type),this.touchType=this._getTouchType(t.touchType),this.infinity=t.infinite,this.handler=e},t.prototype._getType=function(t){switch(t){case 0:return o.OPTION;case 1:return o.TARGET;case 2:return o.DEFAULT;case 3:return o.TITLE;case 4:return o.OPTION_AREA;case 5:return o.NONE;case 6:return o.TREE;case 7:return o.CLOUD;case 8:return o.RAINBOW}},t.prototype._getTouchType=function(t){switch(t){case 0:return n.DARG_MOVE;case 1:return n.CLICK;case 2:return n.DRAG_SLIDE;case 3:return n.NONE}},t.prototype.getBoundingBox=function(){return this.node.getBoundingBoxToWorld()},t.prototype.canTouch=function(){return this.type===o.OPTION?this.touchType!==n.NONE:this.type!==o.DEFAULT&&(this.type!==o.NONE&&(this.type!==o.OPTION_AREA&&(this.type===o.TARGET?this.touchType!==n.NONE:this.type!==o.TITLE&&(this.type===o.TREE||(this.type===o.CLOUD||this.type===o.RAINBOW)))))},t.prototype.saveState=function(t){if(this.touchType==n.DARG_MOVE||this.touchType==n.DRAG_SLIDE){var e=this.node.convertToWorldSpaceAR(cc.p(0,0));this.touchOffset=cc.p(t.x-e.x,t.y-e.y),this.originOpacity=this.node.opacity,this.node.opacity=this.infinity?this.originOpacity:0,this.handler.dragoption.position=this.handler.dragoption.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.p(0,0))),this.handler.dragoption.active=!0,this.handler.dragoption.opacity=this.originOpacity,this.handler.dragoptionJs.changeState(this.node.getComponent("unit").getState())}else this.touchType==n.CLICK&&(this.originScale=new cc.Vec2(this.node.scaleX,this.node.scaleY),this.originOpacity=this.node.opacity,this.node.scaleX=1*this.originScale.x,this.node.scaleY=1*this.originScale.y,this.type===o.TREE?(this.game.playSelectAudio(),this.game.eventBus.dispatchEvent("treestart",{id:this.id})):this.type===o.CLOUD?(this.game.playSelectAudio(),this.game.eventBus.dispatchEvent("cloudstart",{id:this.id})):this.type===o.OPTION&&(this.game.playSelectAudio(),this.game.playNumAudio(this.content)))},t.prototype.move=function(t){if(this.touchType==n.DARG_MOVE||this.touchType==n.DRAG_SLIDE){var e=this.node.parent.convertToNodeSpaceAR(t);this.handler.dragoption.position=this.handler.dragoption.parent.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(cc.p(e.x-this.touchOffset.x,e.y-this.touchOffset.y)))}else if(this.touchType==n.CLICK){this.node.getBoundingBoxToWorld().contains(t)?this.type===o.RAINBOW&&this.game.eventBus.dispatchEvent("rainbowtouch",{pos:t}):this.reset()}this.game.eventBus.dispatchEvent("handled",{id:this.id,type:this.touchType,state:this.node.getComponent("cjs")&&this.node.getComponent("cjs").unitjs.getState()},this.node.parent.parent.parent)},t.prototype.dropAction=function(t){this.touchType==n.DARG_MOVE?this.canCollide(t)&&this.canExchange(t)?this.exChange(t):this.restoreState():this.touchType==n.DRAG_SLIDE||this.touchType==n.CLICK&&(this.game.eventBus.dispatchEvent("click",{id:this.id,type:this.touchType,state:this.node.getComponent("cjs")&&this.node.getComponent("cjs").unitjs.getState()},this.node.parent.parent.parent),this.restoreState())},t.prototype.isToTarget=function(t){return this.touchType==n.DARG_MOVE?this.handler.getTouchNodesByPos(t,this):this.touchType==n.DRAG_SLIDE?null:this.touchType==n.CLICK?this:void 0},t.prototype.restoreState=function(){this.touchType==n.DARG_MOVE||this.touchType==n.DRAG_SLIDE?(this.touchOffset=cc.p(0,0),this.handler.dragoption.active=!1,this.node.opacity=this.originOpacity):this.touchType==n.CLICK&&(this.node.scaleX=this.originScale.x,this.node.scaleY=this.originScale.y,this.node.opacity=this.originOpacity,this.type===o.TREE?this.game.eventBus.dispatchEvent("treeend",{id:this.id}):this.type===o.CLOUD&&this.game.eventBus.dispatchEvent("cloudend",{id:this.id}))},t.prototype.disableTouch=function(){this.handler.disable()},t.prototype.enableTouch=function(){this.handler.enable()},t.prototype.reset=function(){this.handler.reset()},t.prototype.canCollide=function(t){if(this.type===o.OPTION&&t.type===o.TARGET){if(this.touchType===n.DARG_MOVE&&t.touchType===n.DARG_MOVE)return!0;if(this.touchType===n.DARG_MOVE&&t.touchType===n.NONE)return!0}else if(this.type===o.TARGET&&t.type===o.TARGET){if(this.touchType===n.DARG_MOVE&&t.touchType===n.DARG_MOVE)return!0;if(this.touchType===n.DARG_MOVE&&t.touchType===n.NONE)return!0}else if(this.type===o.TARGET&&t.type===o.OPTION_AREA)return!0;return!1},t.prototype.canExchange=function(t){if(this.type===o.OPTION&&t.type===o.TARGET){if(this.touchType===n.DARG_MOVE&&t.touchType===n.DARG_MOVE)return!0;if(this.touchType===n.DARG_MOVE&&t.touchType===n.NONE)return!0}else if(this.type===o.TARGET&&t.type===o.TARGET){if(this.touchType===n.DARG_MOVE&&t.touchType===n.DARG_MOVE)return!0;if(this.touchType===n.DARG_MOVE&&t.touchType===n.NONE)return!0}else if(this.type===o.TARGET&&t.type===o.OPTION_AREA)return!0;return!1},t.prototype.exChange=function(t){this.infinity||(this.touchType=n.NONE),this.handler.dragoption.active=!1,this.type===o.OPTION?t.type===o.TARGET&&this.game.eventBus.dispatchEvent("changestate",{id:t.id,oid:this.id,state:this.node.getComponent("cjs").unitjs.getState()},this.node.parent.parent.parent):this.type===o.TARGET&&(t.type===o.TARGET?(this.game.eventBus.dispatchEvent("changestate",{id:t.id,oid:this.oid,state:this.node.getComponent("cjs").unitjs.getState()},this.node.parent.parent.parent),this.game.eventBus.dispatchEvent("changestate",{id:this.id,oid:t.oid,state:t.node.getComponent("cjs").unitjs.getState()},this.node.parent.parent.parent)):t.type===o.OPTION_AREA&&(this.game.eventBus.dispatchEvent("toinit",{id:this.id},this.node.parent.parent.parent),this.game.eventBus.dispatchEvent("toinit",{id:this.oid},this.node.parent.parent.parent)))},t=__decorate([c],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],tree:[function(t,e,i){"use strict";cc._RF.push(e,"edc36LeN01Ml66kBF84VKBn","tree"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./touch/touchhandler"),s=t("./touch/touchobj"),n=t("./game"),a=t("./networkdata"),r=cc._decorator,c=r.ccclass,h=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="",t.touchHandler=null,t.touchObj=null,t.game=null,t.anim=null,t}return __extends(t,e),t.prototype.onLoad=function(){var t=new a.UnitData;t.id=this.id,t.type=a.UNIT_TYPE.TREE,t.touchType=a.UNIT_TOUCH_TYPE.CLICK,this.touchObj.game=this.game,this.touchObj.setData(t,this.touchHandler),this.game.eventBus.register("treestart",this.startAnim.bind(this),this.id),this.game.eventBus.register("treeend",this.endAnim.bind(this),this.id)},t.prototype.startAnim=function(t,e){var i=e.getUserData();"treestart"===t&&i.id===this.id&&this.node.getChildByName("bottom").setScale(cc.p(1,.7))},t.prototype.endAnim=function(t,e){var i=e.getUserData();"treeend"===t&&i.id===this.id&&this.anim.playAdditive("treer",0)},t.prototype.onEnable=function(){this.id&&(this.game.eventBus.register("treestart",this.startAnim.bind(this),this.id),this.game.eventBus.register("treeend",this.endAnim.bind(this),this.id))},t.prototype.onDisable=function(){this.id&&(this.game.eventBus.unregister("treestart",this.startAnim.bind(this),this.id),this.game.eventBus.unregister("treeend",this.endAnim.bind(this),this.id))},__decorate([h(String)],t.prototype,"id",void 0),__decorate([h(o.default)],t.prototype,"touchHandler",void 0),__decorate([h(s.default)],t.prototype,"touchObj",void 0),__decorate([h(n.default)],t.prototype,"game",void 0),__decorate([h(cc.Animation)],t.prototype,"anim",void 0),t=__decorate([c],t)}(cc.Component);i.default=p,cc._RF.pop()},{"./game":"game","./networkdata":"networkdata","./touch/touchhandler":"touchhandler","./touch/touchobj":"touchobj"}],unit:[function(t,e,i){"use strict";cc._RF.push(e,"a8b36SCFcRAZJn3rniX0Lt5","unit"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../scripts/core/obj"),s=t("../../scripts/networkdata"),n=t("../number/number"),a=t("../numSpineJs"),r=cc._decorator,c=r.ccclass,h=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lable=null,t.sprite=null,t.slabel=null,t.sanim=null,t.result=null,t.data=new s.UnitData,t.initState=new s.UnitData,t.currentState=new s.UnitData,t.lastState=new s.UnitData,t.playthinkAudioTime=0,t.playthinkAudioWaitTime=20*cc.random0To1()+20,t.playthinkAudioAble=!0,t}return __extends(t,e),t.prototype.setData=function(t){this.data=t,this.initState=t,this.currentState=t,this.lastState=t,this.refresh(),"number"==typeof this.data.type&&(this.node.getComponent("touchobj").type=this.data.type),"number"==typeof this.data.touchType&&(this.node.getComponent("touchobj").touchType=this.data.touchType),this.game.eventBus.register("changestate",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent),this.game.eventBus.register("toinit",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent),this.game.eventBus.register("click",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent)},t.prototype.refresh=function(){if(this.currentState.prefabtype===s.PREFAB_TYPE.TITLE)this.sprite.node.active=!1,this.currentState.content&&(this.lable.node.parent.active=!0),this.lable.setData(this.currentState.content),this.sanim.node.active=!1,this.node.x=this.currentState.x,this.node.y=this.currentState.y;else if(this.currentState.prefabtype===s.PREFAB_TYPE.NUMBER){this.sprite.node.active=!0,this.lable.node.parent.active=!1,this.sanim.node.active=!0;var t=this.sanim.getAnimationState("number")&&this.sanim.getAnimationState("number").isPlaying&&this.sanim.getAnimationState("number").time;this.sanim.play("number","number"==typeof t?t:this.currentState.randomtime),this.slabel.init(this.currentState.content),this.node.x=this.currentState.x,this.node.y=this.currentState.y}},t.prototype.moveEye=function(t){this.currentState.prefabtype===s.PREFAB_TYPE.NUMBER&&(t?this.slabel.setEysePos(t):this.slabel.resetEyePos())},t.prototype.getState=function(){return this.currentState},t.prototype.changeState=function(t){this.lastState=this.currentState.clone(),this.currentState=t.clone(),this.refresh()},t.prototype.playHappyResult=function(t){this.result.node.active=!0,this.result.addAnimation(0,"animation",!1),this.slabel.setStand(3),this.result.setCompleteListener(function(){this.result.node.active=!1,t&&t()}.bind(this))},t.prototype.playSadResult=function(t){this.slabel.setStand(4)},t.prototype.playStandResult=function(t){this.slabel.setStand(0)},t.prototype.changeStateF=function(t,e){if("changestate"===t)(i=e.getUserData()).id===this.data.id&&((o=i.state.clone()).choosed=!0,o.oid=i.oid,o.id=this.data.id,this.changeState(o),this.data.verify&&this.game.eventBus.dispatchEvent("verify",null,this.node.parent.parent.parent),this.data.tipnextstep&&this.game.eventBus.dispatchEvent("tipnextstep",null,this.node.parent.parent.parent));else if("toInit"===t){(i=e.getUserData()).id===this.data.id&&this.reset()}else if("click"===t){var i,o;if((i=e.getUserData()).id===this.data.id)(o=i.state.clone()).choosed=!0,o.oid=i.oid,o.id=this.data.id,this.changeState(o),this.data.verify&&this.game.eventBus.dispatchEvent("verify",null,this.node.parent.parent.parent),this.data.tipnextstep&&this.game.eventBus.dispatchEvent("tipnextstep",null,this.node.parent.parent.parent)}},t.prototype.playHappyAudio=function(){this.node.active&&this.game&&this.game.playNHappyAudio()},t.prototype.playUnHappyAudio=function(){this.node.active&&this.game&&this.game.playNUnhappyAudio()},t.prototype.playThinkAudio=function(){this.node.active&&this.game&&this.game.playThinkAudio()},t.prototype.isNeedReset=function(){return this.initState.equal(this.currentState)},t.prototype.reset=function(){return!!this.isNeedReset()&&(this.lastState=this.initState.clone(),this.currentState=this.initState.clone(),this.refresh(),!0)},t.prototype.onEnable=function(){this.data&&this.data.id&&(this.game.eventBus.register("changestate",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent),this.game.eventBus.register("toinit",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent),this.game.eventBus.register("click",this.changeStateF.bind(this),this.data.id,this.node.parent.parent.parent))},t.prototype.onDisable=function(){this.data&&this.data.id&&(this.game.eventBus.unregister("changestate",this.changeStateF,this.data.id,this.node.parent.parent.parent),this.game.eventBus.unregister("toinit",this.changeStateF,this.data.id,this.node.parent.parent.parent),this.game.eventBus.unregister("click",this.changeStateF,this.data.id,this.node.parent.parent.parent))},t.prototype.update=function(t){this.playthinkAudioTime+=t,this.playthinkAudioTime>this.playthinkAudioWaitTime&&(this.playThinkAudio(),this.playthinkAudioTime=0)},__decorate([h(n.default)],t.prototype,"lable",void 0),__decorate([h(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([h(a.default)],t.prototype,"slabel",void 0),__decorate([h(cc.Animation)],t.prototype,"sanim",void 0),__decorate([h(sp.Skeleton)],t.prototype,"result",void 0),t=__decorate([c],t)}(o.default);i.default=p,cc._RF.pop()},{"../../scripts/core/obj":"obj","../../scripts/networkdata":"networkdata","../numSpineJs":"numSpineJs","../number/number":"number"}]},{},["absgroup","group","numSpineJs","number","absprogress","progress","questionlist","abssettlement","settlement","timer","abstips","step","stepdata","tips","cjs","unit","abg","cloud","eventbus","layer","obj","game","networkdata","rainbow","scale","touchhandler","touchobj","touchone","tree"]);