{"version":3,"sources":["settlement.js"],"names":["DB_ANIM_ASSET","cc","Class","extends","Component","properties","failSpine","Node","twoStarSpine","successSpine","timeOutSpine","onLoad","background","node","getChildByName","scale","playWinAnim","callback","active","R2","R1","L2","L1","three_star","three_star_p","getComponent","setAnimation","scheduleOnce","anim","Animation","on","that","ParticleSystem","stopSystem","call","game","playTwoStarAnim","two_star","two_star_p","playLoseAnim","star","one_star","playTimeUpAnim","reset","log","msg","CONSOLE_LOG_OPEN"],"mappings":"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","file":"settlement.js","sourceRoot":"../../../../../assets/components/settlement","sourcesContent":["let DB_ANIM_ASSET = {\n    'win': 'happy',\n    'lose': 'tear'\n};\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        failSpine: cc.Node, //1颗星\n        twoStarSpine: cc.Node, //2颗星\n        successSpine: cc.Node, //3颗星\n        timeOutSpine: cc.Node,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.background = this.node.getChildByName('background');\n        this.scale = this.node.getChildByName('scale');\n    },\n\n    //播放获胜动画\n    playWinAnim: function (callback) {\n        this.node.active = true;\n        this.background.active = true;\n        this.successSpine.active = true\n\n        var R2 = this.successSpine.getChildByName('R2');\n        var R1 = this.successSpine.getChildByName('R1');\n        var L2 = this.successSpine.getChildByName('L2');\n        var L1 = this.successSpine.getChildByName('L1');\n        var three_star = this.successSpine.getChildByName('three_star_');\n        var three_star_p = this.successSpine.getChildByName('three_star');\n        R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        R1.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        L2.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        L1.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        three_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        this.scheduleOnce(function () {\n            let anim =  three_star_p.getComponent(cc.Animation);\n            anim.on('stop', function(){\n            }, this);\n        },0.33);\n\n        let that = this\n        this.scheduleOnce(function () {\n            R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            R1.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            L2.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            L1.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            three_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            // three_star_p.removeFromParent();\n\n        }, 1.5);     \n        this.scheduleOnce(function () {\n            three_star_p.getChildByName('green').getComponent(cc.ParticleSystem).stopSystem(),\n            three_star_p.getChildByName('orange').getComponent(cc.ParticleSystem).stopSystem(),\n            three_star_p.getChildByName('pink').getComponent(cc.ParticleSystem).stopSystem(),\n            three_star_p.getChildByName('red').getComponent(cc.ParticleSystem).stopSystem();\n\n        }, 2.5);     \n\n        this.scheduleOnce(function () {\n            callback && callback.call(that.game);\n        }, 2.5);\n\n    },\n    //播放获胜动画\n    playTwoStarAnim: function (callback) {\n        this.node.active = true;\n        this.background.active = true;\n        this.twoStarSpine.active = true\n        var R2 = this.twoStarSpine.getChildByName('R2');\n        var L2 = this.twoStarSpine.getChildByName('L2');\n        var two_star = this.twoStarSpine.getChildByName('two_star');\n        var two_star_p = this.twoStarSpine.getChildByName('two_star1');\n\n        R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        L2.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        two_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n\n        this.scheduleOnce(function () {\n            R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            L2.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            two_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n        }, 1.5);     \n        this.scheduleOnce(function () {\n            two_star_p.getChildByName('green').getComponent(cc.ParticleSystem).stopSystem(),\n            two_star_p.getChildByName('orange').getComponent(cc.ParticleSystem).stopSystem(),\n            two_star_p.getChildByName('pink').getComponent(cc.ParticleSystem).stopSystem(),\n            two_star_p.getChildByName('red').getComponent(cc.ParticleSystem).stopSystem();\n\n        }, 2.5);     \n        let that = this\n        this.scheduleOnce(function () {\n            callback && callback.call(that.game);\n        }, 2.5);\n\n    },\n    //播放失败动画\n    playLoseAnim: function (callback) {\n\n        this.node.active = true;\n        this.background.active = true;\n        this.failSpine.active = true\n        var star = this.failSpine.getChildByName('star');\n        var R2 = this.failSpine.getChildByName('R2');\n        var one_star = this.failSpine.getChildByName('one_star');\n\n        star.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n        one_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"in\", false)\n\n        let that = this\n        this.scheduleOnce(function () {\n            star.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            R2.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n            one_star.getComponent(\"sp.Skeleton\").setAnimation(0, \"stand\", true)\n\n        }, 1.5);\n        this.scheduleOnce(function () {\n            callback && callback.call(that.game);\n        }, 2.5);\n\n    },\n\n    //播放失败动画\n    playTimeUpAnim: function (callback) {\n\n        this.node.active = true;\n        this.background.active = true;\n        this.timeOutSpine.active = true\n        this.timeOutSpine.getComponent(\"sp.Skeleton\").setAnimation(0, \"time_over\", false)\n        let that = this\n\n        this.scheduleOnce(function () {\n            callback && callback.call(that.game);\n        }, 1);\n\n    },\n\n    //重置\n    reset: function () {\n\n        this.background.active = false;\n        this.failSpine.active = false\n        this.twoStarSpine.active = false\n        this.successSpine.active = false\n        this.timeOutSpine.active = false\n        this.node.active = false;\n\n    },\n\n    log: function (msg) {\n        if (CONSOLE_LOG_OPEN) cc.log(msg);\n    },\n\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});"]}