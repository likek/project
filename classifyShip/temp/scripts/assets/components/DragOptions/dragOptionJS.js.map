{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "option_node",
    "Node",
    "label",
    "Label",
    "canMove",
    "onLoad",
    "node",
    "on",
    "EventType",
    "TOUCH_START",
    "touch_start",
    "bind",
    "TOUCH_MOVE",
    "touch_move",
    "TOUCH_END",
    "touch_end",
    "TOUCH_CANCEL",
    "touch_cancel",
    "init",
    "gameJS",
    "option",
    "optionLength",
    "opacity",
    "string",
    "optionContent",
    "optionNo",
    "startx",
    "x",
    "starty",
    "y",
    "evt",
    "changeMoveTag",
    "tag",
    "isTouch",
    "check",
    "optionClick",
    "reloadState",
    "touches",
    "getTouches",
    "parentNode",
    "parent",
    "judgePos",
    "convertTouchToNodeSpaceAR",
    "Math",
    "abs",
    "width",
    "height",
    "moveToPos",
    "position",
    "qNode",
    "questionNode",
    "self",
    "nodePosition",
    "convertToWorldSpaceAR",
    "p",
    "selfPosition",
    "updateState",
    "scheduleOnce",
    "selectAnswer",
    "interactable",
    "buttonCom",
    "getComponent",
    "Button",
    "setQuestionNode"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        option_node: cc.Node,\n        label: cc.Label,\n        canMove: false,\n    },\n    onLoad: function () {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touch_start.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.touch_move.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touch_end.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touch_cancel.bind(this), this.node);\n    },\n    init: function (gameJS, option, optionLength) {\n        this.node.opacity = 255;\n        this.gameJS = gameJS;\n        this.option = option;//选项（选项，选项答案）\n        this.label.string = option.optionContent;//读取选项答案\n        this.optionNo = option.optionNo;\n\n        this.startx = this.node.x;\n        this.starty = this.node.y;\n    },\n    touch_start: function(evt){\n        this.canMove = this.gameJS.changeMoveTag(this.node.tag);\n        if (!this.canMove) {\n            return;\n        }\n        this.opacity = 150;\n    },\n    touch_end:function(evt){\n        if (!this.canMove) {\n            return;\n        }\n        this.node.opacity = 255;\n        var isTouch = this.check();\n        isTouch && this.optionClick();\n        this.reloadState();\n    },\n    touch_move:function(evt){\n        if (!this.canMove) {\n            return;\n        }\n        var touches = evt.getTouches();\n        var parentNode = this.node.parent.parent;\n        var judgePos = parentNode.convertTouchToNodeSpaceAR(touches[0]);\n        if(Math.abs(judgePos.x) < (parentNode.width/2 - 50) \n        && Math.abs(judgePos.y) < (parentNode.height/2 - 30)){\n            var moveToPos = this.node.parent.convertTouchToNodeSpaceAR(touches[0]);\n            this.node.position = moveToPos;\n        }else{\n            this.reloadState();\n        }\n    },\n    touch_cancel: function (evt) {\n        this.reloadState();\n    },\n    reloadState: function () {\n        this.node.x = this.startx;\n        this.node.y = this.starty;\n\n        this.canMove = false;\n\n        this.gameJS.changeMoveTag(0);\n    },\n    check:function(){\n        var qNode = this.questionNode;\n        if(qNode){           \n            var self = this.node;\n            var nodePosition = qNode.convertToWorldSpaceAR(cc.p(0, 0));\n            var selfPosition = this.node.convertToWorldSpaceAR(cc.p(0, 0));\n            if( Math.abs(nodePosition.x - selfPosition.x) < (qNode.width + self.width) / 2 \n                && Math.abs(nodePosition.y - selfPosition.y) < (qNode.height + self.height) / 2){\n                return true;\n            }\n        }\n        return false;\n    },\n    optionClick: function () {\n        this.node.opacity = 0;\n        var self = this;\n        self.updateState(false);\n        this.scheduleOnce(function () {\n            self.gameJS.selectAnswer(self.option);\n        }, 0.2);\n    },\n    //按钮是否可点击\n    updateState: function (interactable) {\n        var buttonCom = this.option_node.getComponent(cc.Button);\n        buttonCom.interactable = interactable;\n    },\n    setQuestionNode: function(questionNode){\n        this.questionNode = questionNode;\n    }\n});\n"
  ]
}