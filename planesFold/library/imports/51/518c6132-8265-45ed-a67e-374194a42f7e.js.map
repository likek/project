{"version":3,"sources":["../../../../../assets/components/panel/assets/components/panel/question_panel.js"],"names":["questionAry","cc","Class","extends","Component","properties","oItemPrefab","Prefab","onLoad","oItemPool","NodePool","isEmpty","length","copyAry","newAry","slice","CONSOLE_LOG_OPEN","console","log","createOptions","i","option","optionJs","size","get","instantiate","parent","node","children","width","height","paddingX","paddingY","wcount","index","x","y","setPosition","p","addOption","contentAry","cb","push","sort","_sortNumber","updateSum","removeAllOption","contentNode","removeAllChildren","splice"],"mappings":"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","file":"question_panel.js","sourceRoot":"../../../../../assets/components/panel","sourcesContent":["let questionAry = []; \n//选项区域\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        oItemPrefab: cc.Prefab, //背景预制\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.oItemPool = new cc.NodePool();\n\n    },\n    isEmpty: function () {\n        return questionAry.length == 0;\n    },\n    copyAry: function () {\n        //return Array.from(questionAry);//不支持9以下系统\n        var newAry = questionAry.slice(0, questionAry.length);\n        if (CONSOLE_LOG_OPEN) console.log('questionAry.slice' + newAry + '  ' + questionAry);\n\n        return newAry;\n\n    },\n   //创建选项floor向下取整,ceil向上取整\n   createOptions: function () {\n\n    for (let i = 0, option, optionJs; i < questionAry.length; i++) {\n\n        if (i == this.questionAry.length - 1) {\n            if(this.oItemPool.size() > 0){\n                option =  this.oItemPool.get();\n            }else{\n            option = cc.instantiate(this.oItemPrefab);\n            }\n            option.parent = this.node;\n        } else {\n            option = this.node.children[i];\n        }\n        let width = option.width,\n            height = this.node.height,\n            paddingX = 15,\n            paddingY = 10,\n            wcount = 3,\n            index = i % 3,\n            // x = (-wcount / 2 + index + 0.5) * (width + paddingX),\n            x = (index -1) * (width + paddingX),\n            y = i < 3 ? (height/3 + paddingY) : i < 6 ? paddingY*3 : (-height/3 + paddingY*5.5);\n             option.setPosition(cc.p(x, y));\n\n    }\n},\n    \n    addOption: function (contentAry) {\n        let cb = () => {\n           //node.zIndex = this.num++; //不设置zIndex,数组里取值顺序错乱\n           var newAry = contentAry.slice(0, contentAry.length);\n            questionAry.push(newAry.sort(_sortNumber));\n            this.createOptions(contentAry);\n            // this.numLabel.string = questionAry.length;\n            this.updateSum();\n        };\n        cb();\n    },\n  \n    /* 还原所有状态 */\n    removeAllOption: function () {\n\n        for (var i = 0; i < this.node.children.length; i++) {\n            let contentNode = this.node.children[i];\n            contentNode.removeAllChildren(true);\n        }\n        this.node.removeAllChildren(true);\n       \n        questionAry.splice(0, questionAry.length);\n        questionAry = [];\n        this.updateSum();\n\n    },\n    //更新显示\n    updateSum: function (){\n        //this.textLabel.string = this.questionAry.length;\n    }\n\n\n});"]}