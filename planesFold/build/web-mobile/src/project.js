require=function s(a,c,r){function h(e,t){if(!c[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=c[e]={exports:{}};a[e][0].call(o.exports,function(t){return h(a[e][1][t]||t)},o,o.exports,s,a,c,r)}return c[e].exports}for(var l="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({BaseGameJS:[function(t,e,i){"use strict";cc._RF.push(e,"d5325ralz1KNpBY2dkj5IqD","BaseGameJS"),cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,paopao_node:cc.Node,feedback_node:cc.Node,loseTime_node:cc.Node,loseTime:0,time_node:cc.Node,question_node:cc.Node,quertionList_node:cc.Node,title_node:cc.Node},onLoad:function(){var t=this;document.addEventListener("resignActivePauseGame",function(){t.gotoBackground(),cc.director.pause(),cc.game.pause(),CONSOLE_LOG_OPEN&&console.log("app just resign active.")}),document.addEventListener("becomeActiveResumeGame",function(){cc.game.isPaused&&cc.game.resume(),cc.director.isPaused&&cc.director.resume(),t.gotoForeground(),CONSOLE_LOG_OPEN&&console.log("app just become active.")}),this.initFeedback(),this.answerTime=0,this.lastAnswerTime=0,this.answerContext="",this.countDown=300,this.timeCallback=this.timeCallbackFunc(),this.isShowLossTime=!1,this.nowQuestionID=0,this.questionArr=[],this.answerInfoArr=[],this.questionNumListJS=this.quertionList_node.getComponent("QuestionNumListJS"),this.quertionList_node.opacity=0,this.time_node.opacity=0,this.onLoadChild(),this.answerEnable=!1,this.network=this.node.getComponent("NetworkJS_Data"),this.network.sendXHR(this)},initFeedback:function(){var t=cc.instantiate(this.feedback_pref);this.feedback_node.addChild(t),this.feedbackJS=t.getChildByName("Fish").getComponent("FishFeedback")},onLoadChild:function(){},gotoBackground:function(){},gotoForeground:function(){},createPaopao:function(){for(var t=this.node.width,e=[120,40,160,80,200],i=1012/e.length,n=0;n<e.length;n++){(o=cc.instantiate(this.paopao_pref)).x=e[n],o.y=-i*n,this.paopao_node.addChild(o)}for(n=0;n<e.length;n++){var o;(o=cc.instantiate(this.paopao_pref)).x=t-e[n],o.y=-i*n,this.paopao_node.addChild(o)}},createAnswerInfo:function(t){var e=this.questionArr[this.nowQuestionID];if(e){var i={answerTime:this.answerTime-this.lastAnswerTime,leveLQuestionDetailNum:e.leveLQuestionDetailNum,levelQuestionDetailID:e.levelQuestionDetailID,answerStatus:t,answerContext:this.answerContext};this.answerInfoArr.push(i)}},showFeedback:function(t){0===this.nowQuestionID?this.feedbackJS.firstShowFeedback(this,t):this.feedbackJS.showFeedback(this,t)},firstFeedbackFinish:function(){},feedbackFinish:function(){this.nowQuestionID+=1;var t=this.questionArr[0].interactiveJson.totalcd;if(this.nowQuestionID>=this.questionArr.length||this.countDown-this.answerTime<=0&&t){CONSOLE_LOG_OPEN&&console.log("答完了");for(var e=this.questionArr.length-this.nowQuestionID,i=0;i<e;i++)this.answerTime=0,this.lastAnswerTime=0,this.createAnswerInfo("2"),this.nowQuestionID+=1;this.isIts&&this.settlementJs.reset(),this.network.gameOver(this.answerInfoArr)}else this.network.gameLoadProgress(this.nowQuestionID+1,this.questionArr.length),!this.isIts&&this.deleteOption(),this.settlementJs.reset(),!this.isIts&&this.startloadOption()},showLossTime:function(){this.answerTime+=this.loseTime,this.isShowLossTime=!0,this.loseTime_node.opacity=255;var t=cc.callFunc(function(t){this.isShowLossTime=!1,this.loseTime_node.opacity=0},this);this.loseTime_node.runAction(cc.sequence(cc.fadeTo(1,0),t))},timeCallbackFunc:function(){return function(){this.answerTime+=1,this.scheduleTime+=1;var t=this.countDown-this.answerTime;t<=0?(CONSOLE_LOG_OPEN&&console.log("时间到"),this.timeout(),this.isShowFeed=!0,this.answerTime=this.countDown,this.timeLabel.string="00:00",this.createAnswerInfo("2"),this.showFeedback(3),this.answerTime>this.scheduleTime&&this.unschedule(this.timeCallback)):this.timeLabel.string=this.timeFormat(t)}},timeFormat:function(t){var e=Math.floor(t/60),i=t%60,n=i<10?"0"+i:i;return 59<t?(e<10?"0"+e:e)+":"+n:"00:"+n},timeout:function(){},showSchedule:function(){this.scheduleTime=0,this.schedule(this.timeCallback,1,this.countDown-1)},deleteOption:function(){},createOption:function(t){},selectedOption:function(t){this.nowQuestionID=t,this.deleteOption();var e=this;setTimeout(function(){e.startloadOption()},0)},startloadOption:function(){this.isIts&&this.questionNumListJS.changeOptionDisable();this.questionArr[this.nowQuestionID];this.timeLabel.string=this.timeFormat(this.countDown),this.answerTime=0,!this.isIts&&this.showSchedule(),this.isIts&&this.questionNumListJS.changeOptionEnable(),this.isShowFeed=!1},startLoadGame:function(t){this.questionArr=t,this.quertionList_node.opacity=this.isIts?255:0,this.time_node.opacity=this.isIts?0:255,this.isIts&&t&&0<t.length&&this.questionNumListJS.init(t.length,this.selectedOption.bind(this)),REQUEST_URL?this.requestAllUrls():this.startloadOption()},requestAllUrls:function(){for(var t=[],e=0;e<this.questionArr.length;e++){if(this.questionArr[e].quescontimgAry instanceof Array)for(var i=0;i<this.questionArr[e].quescontimgAry.length;i++)t.push(this.questionArr[e].quescontimgAry[i]);if(this.questionArr[e].optionsArr instanceof Array)for(var n=0;n<this.questionArr[e].optionsArr.length;n++)this.questionArr[e].optionsArr[n].optioncontimg&&t.push(this.questionArr[e].optionsArr[n].optioncontimg)}var o=this;cc.loader.load(t,function(t,e){t?o.network.gameLoadFailed(1):(o.spriteMaps=e.map,o.startloadOption())})},getSpriteFrame:function(t){if(!t||0==t.length)return null;var e=this.spriteMaps[t].content;return e instanceof cc.Texture2D?new cc.SpriteFrame(e):null},selectAnswer:function(t,e){this.isShowFeed||this.isShowLossTime||(e?(CONSOLE_LOG_OPEN&&console.log("答对了"),this.rightSelect+=1,t.showParticle(),this.rightSelect>=this.count&&(this.unschedule(this.timeCallback),this.isShowFeed=!0,this.createAnswerInfo("1"),this.scheduleOnce(function(){this.showFeedback(1)},1))):(CONSOLE_LOG_OPEN&&console.log("答错了"),this.showLossTime()))},onDestroy:function(){document.removeEventListener("resignActivePauseGame"),document.removeEventListener("becomeActiveResumeGame")},setGameName:function(t){this.title_node.getComponent("TitleJS").init(t)},setPlatform:function(t){this.platform=t,this.isIts="its"==t;var e=this.isIts;this.quertionList_node.active=!!e,this.time_node.active=!e},resetOption:function(){0!=this.moveOptionTag&&(this.option_node.getChildByTag(this.moveOptionTag).getComponent("Option").reloadState(),this.moveOptionTag=0)},changeMoveTag:function(t){return!this.isShowFeed&&((0===this.moveOptionTag||this.moveOptionTag===t||0===t)&&(this.moveOptionTag=t,!0))}}),cc._RF.pop()},{}],ColliderListener:[function(t,e,i){"use strict";cc._RF.push(e,"b0b466dPFFI1ZCDMEewg3qk","ColliderListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){this.node.isCollisioned=!0,this.node.opacity=100},onCollisionExit:function(t,e){CONSOLE_LOG_OPEN&&console.log("on collision exit"),this.node.isCollisioned=!1,this.node.opacity=255}}),cc._RF.pop()},{}],GameJS:[function(t,e,i){"use strict";cc._RF.push(e,"d92c8sRpIBMBKs/RzLIjTLN","GameJS");var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("BaseGameJS");function o(i){var h,e,r,l,a,c,n,d,u=new THREE.Scene,p=new THREE.Object3D,o=!0;function m(t){if("plane"===t.type){var e=new THREE.PlaneGeometry(r,r);e.applyMatrix((new THREE.Matrix4).makeTranslation(t.translate.x,t.translate.y,t.translate.z));var i={side:THREE.DoubleSide};"number"==typeof t.bgColor?i.color=t.bgColor:"object"===g(t.bgColor)&&(i.map=new THREE.CanvasTexture(function(t,e,i,n,o){var s=document.createElement("canvas");s.width=64,s.height=64;var a=s.getContext("2d");a.rect(0,0,64,64);for(var c=a.createLinearGradient(64*e,64*i,64*n,64*o),r=0;r<t.length;r++)c.addColorStop(r/(t.length-1),t[r]);return a.fillStyle=c,a.fill(),s}(t.bgColor.colors,t.bgColor.startX,t.bgColor.startY,t.bgColor.endX,t.bgColor.endY)));var n=new THREE.MeshBasicMaterial(i);return(c=new THREE.Mesh(e,n)).translateX(t.position.x),c.translateY(t.position.y),c.translateZ(t.position.z),u.add(c),t.plane=c,"function"==typeof t.ondrawplane&&t.ondrawplane(c),c}if("group"===t.type){var o=t.planes,s=new THREE.Object3D;if(s.applyMatrix((new THREE.Matrix4).makeTranslation(t.translate.x,t.translate.y,t.translate.z)),s.translateX(t.position.x),s.translateY(t.position.y),s.translateZ(t.position.z),t.plane=s,"function"==typeof t.ondrawplane&&t.ondrawplane(s),Array.isArray(o))for(var a=0;a<o.length;a++){var c=m(o[a]);s.add(c),o[a].plane=c,"function"==typeof t.ondrawplane&&t.ondrawplane(c)}return s}}this.planesData=[],this.eachAnimationHandler=null,this.setData=function(t){h=t.planes.data,e=t.camera,r=t.planes.planeSize,l=t.planes.rotateSpeed||.01,a=t.controls,c=t.transform,(n=new THREE.PerspectiveCamera(e.frustum.fov,i.getSize().width/i.getSize().height,e.frustum.near,e.frustum.far)).position.set(e.position.x,e.position.y,e.position.z),n.lookAt(new THREE.Vector3(e.lookAt.x,e.lookAt.y,e.lookAt.z)),d=new THREE.OrbitControls(n)},this.createPlanes=function(){for(var t,e=0;e<h.length;e++)t=m(h[e]),p.add(t);var i=c&&c.translate,n=c&&c.rotate,o=c&&c.scale;if(p.position.set(i&&i.x||0,i&&i.y||0,i&&i.z||0),p.rotation.set(n&&n.x||0,n&&n.y||0,n&&n.z||0),p.scale.set(o&&o.x||1,o&&o.y||1,o&&o.z||1),u.add(p),"object"===(void 0===a?"undefined":g(a)))for(var s in a)a.hasOwnProperty(s)&&(d[s]=a[s]);d.enableZoom=!1,d.enablePan=!1},this.update=function(){if(o&&d){if(d.update(),"function"==typeof this.animationHandler&&this.animationHandler(h),"function"==typeof this.eachAnimationHandler)for(var t,e=0;e<this.planesData.length;e++)t=this.planesData[e],this.eachAnimationHandler(t);i.render(u,n)}},this.setAnimationHandler=function(t){this.animationHandler=t},this.setEachAnimationHandler=function(t){this.eachAnimationHandler=t},this.fold=function(n){var o=this,s=[],a=[],c=!1,r=!1;(function t(e){for(var i=0;i<e.length;i++)"plane"===e[i].type?e[i].animationIndex&&1!==e[i].animationIndex?2===e[i].animationIndex&&(a[a.length]=e[i]):s[s.length]=e[i]:"group"===e[i].type&&(e[i].animationIndex&&1!==e[i].animationIndex?2===e[i].animationIndex&&(a[a.length]=e[i]):s[s.length]=e[i],t(e[i].planes))})(h),this.planesData=s,this.setEachAnimationHandler(function t(e){var i=e.plane;e.axis&&(-1===e.rotateDirection?i.rotation[e.axis]>-.5*Math.PI?i.rotation[e.axis]-=l:(i.rotation[e.axis]=-.5*Math.PI,1!==e.animationIndex&&e.animationIndex||c?2===e.animationIndex&&(this.setEachAnimationHandler(null),r||(r=!0,"function"==typeof n&&n(o))):(c=!0,this.planesData=a,this.setEachAnimationHandler(t))):1===e.rotateDirection&&(i.rotation[e.axis]<.5*Math.PI?i.rotation[e.axis]+=l:(i.rotation[e.axis]=.5*Math.PI,1!==e.animationIndex&&e.animationIndex||c?2===e.animationIndex&&(this.setEachAnimationHandler(null),r||(r=!0,"function"==typeof n&&n(o))):(c=!0,this.planesData=a,this.setEachAnimationHandler(t)))))})},this.unfold=function(o){for(var s=this,a=[],t=[],c=!1,r=!1,e=0;e<h.length;e++)if("plane"===h[e].type)h[e].animationIndex&&1!==h[e].animationIndex?2===h[e].animationIndex&&(t[t.length]=h[e]):a[a.length]=h[e];else if("group"===h[e].type){h[e].animationIndex&&1!==h[e].animationIndex?2===h[e].animationIndex&&(a[a.length]=h[e]):t[t.length]=h[e];for(var i=h[e].planes||[],n=0;n<i.length;n++)i[n].animationIndex&&1!==i[n].animationIndex?2===i[n].animationIndex&&(t[t.length]=i[n]):a[a.length]=i[n]}this.planesData=t,this.setEachAnimationHandler(function t(e,i){var n=e.plane;e.axis&&(-1===e.rotateDirection?n.rotation[e.axis]<0?n.rotation[e.axis]+=l:(n.rotation[e.axis]=0,1!==e.animationIndex&&e.animationIndex?2!==e.animationIndex||c||(c=!0,this.planesData=a,this.setEachAnimationHandler(t)):(this.setEachAnimationHandler(null),r||(r=!0,"function"==typeof o&&o(s)))):1===e.rotateDirection&&(0<n.rotation[e.axis]?n.rotation[e.axis]-=l:(n.rotation[e.axis]=0,1!==e.animationIndex&&e.animationIndex?2!==e.animationIndex||c||(c=!0,this.planesData=a,this.setEachAnimationHandler(t)):(this.setEachAnimationHandler(null),r||(r=!0,"function"==typeof o&&o(s))))))})},this.render=function(){i.render(u,n)},this.clearScene=function(){for(;0<p.children.length;)p.remove(p.children[0]);for(;0<u.children.length;)u.remove(u.children[0])},this.getBoxObject=function(){return p},this.getCamera=function(){return n},this.getScene=function(){return u},this.pause=function(){o=!1},this.start=function(){o=!0}}cc.Class({extends:n,properties:{optionItem_pref:cc.Prefab,settlePrefab:cc.Prefab,resetBtnNSF:cc.SpriteFrame,commitBtnNSF:cc.SpriteFrame,questionLabel:cc.Node,winAudio:cc.AudioClip,loseAudio:cc.AudioClip,resetAudio:cc.AudioClip,optionAudio:cc.AudioClip,option_outAudio:cc.AudioClip,option_foldAudio:cc.AudioClip},onLoadChild:function(){this._super(),this.scaleNode=this.node.getChildByName("scale"),this.option_node=this.scaleNode.getChildByName("option_node"),this.tipsNode=this.node.getChildByName("TipsNode"),this.tipsNode&&(this.tipsNode.active=!0),this.answerItemPool=new cc.NodePool,this.changeMoveTag(0),this.initToast(),this.renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setClearColor(16777215,0),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.overflow="visible",this.renderer.domElement.style.transform="translateZ(0)",this.renderer.domElement.style.webkitTransform="translateZ(0)",e.call(this),this.box=new o(this.renderer),document.body.appendChild(this.renderer.domElement);var t=this;function e(){var t=460*THREE.getScaleRatio(),e=window.innerWidth;this.renderer.setSize(e,t),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.domElement.style.left=window.innerWidth/2-e/2+"px",this.renderer.domElement.style.top=window.innerHeight/2-t/2+"px"}window.addEventListener("resize",function(){e.call(t)})},initToast:function(){var t=this.node.getChildByName("scale").getChildByName("efailed");this.efailedJs=t.getComponent("efailed"),this.efailedJs.game=this},tipsClick:function(){this.tipsNode.removeFromParent(),this.tipsNode.destroy(),!this.isIts&&this.showSchedule(),this.questionArr[0].interactiveJson.totalcd&&(this.lastAnswerTime=this.answerTime),this.renderer.domElement.style.opacity=1},initFeedback:function(){this.settlement=cc.instantiate(this.settlePrefab),this.settlementJs=this.settlement.getComponent("settlement"),(this.settlementJs.game=this).node.getChildByName("feedback_node").addChild(this.settlement),this.settlement.active=!1},gotoBackground:function(){var t=this.node.getChildByName("button_node").getChildByName("commit"),e=this.node.getChildByName("button_node").getChildByName("cancel");t.setScale(1,1),e.setScale(1,1),t._pressed=!1,t._hovered=!1,e._pressed=!1,e._hovered=!1,t.normalSprite=this.commitBtnNSF,t.hoverSprite=this.commitBtnNSF,e.normalSprite=this.resetBtnNSF,e.hoverSprite=this.resetBtnNSF,this.box.pause()},gotoForeground:function(){this.box.start()},timeout:function(){this.box.clearScene()},deleteOption:function(){},createOption:function(t){for(var e=0;e<t.length;++e){var i=null;(i=0<this.answerItemPool.size()?this.answerItemPool.get():cc.instantiate(this.optionItem_pref)).setPosition(cc.p(-(t.length/2-.5-e)*(i.width+20),10));var n=i.getChildByName("button_bg");n.tag=1e3+e;var o=n.getComponent("OptionJS");o.init(this,t[e],t.length),o.updateState(!0),this.option_node.addChild(i)}},startloadOption:function(){this.updateGameState(!0),this.isIts&&this.questionNumListJS.changeOptionDisable();var t=this.questionArr[this.nowQuestionID],e=this.questionLabel.getComponent("pinyin"),i=t.qescont.split("_");e.setData(0<i.length?i[0]:"",1<i.length?i[1]:""),this.rightOptionNo=t.rightOptionNo;var n=this.questionArr[0].interactiveJson.totalcd;if(0===this.nowQuestionID&&n||!n){this.answerTime=0;var o=parseInt(t.interactiveJson.countDown);0<o&&(this.countDown=o),this.timeLabel.string=this.timeFormat(this.countDown)}this.box.clearScene(),this.box.setData(t),this.box.createPlanes(),this.box.render(),this.tipsNode&&!this.tipsNode.activeInHierarchy?(!this.isIts&&this.showSchedule(),n&&(this.lastAnswerTime=this.answerTime),this.renderer.domElement.style.opacity=1):this.renderer.domElement.style.opacity=.3,this.isIts&&this.questionNumListJS.changeOptionEnable(),this.isShowFeed=!1,this.changeMoveTag(0),this.isShowAnim=!1},selectAnswer:function(t){this.isShowFeed||this.isShowLossTime||(this.unschedule(this.timeCallback),this.isShowFeed=!0,this.updateGameState(!1),t?(CONSOLE_LOG_OPEN&&console.log("答对了"),this.createAnswerInfo("1"),this.showFeedback(1)):(CONSOLE_LOG_OPEN&&console.log("答错了"),this.createAnswerInfo("2"),this.showFeedback(2)))},showFeedback:function(t){1===t?(AUDIO_OPEN&&this.playWinAudio(),this.settlementJs.playWinAnim(this.feedbackFinish)):2===t?(AUDIO_OPEN&&this.playLoseAudio(),this.settlementJs.playLoseAnim(this.feedbackFinish)):3===t&&(AUDIO_OPEN&&this.playLoseAudio(),this.settlementJs.playTimeUpAnim(this.feedbackFinish))},updateGameState:function(t){t?(this.question_node.resumeSystemEvents(!0),this.option_node.resumeSystemEvents(!0)):(this.question_node.pauseSystemEvents(!0),this.option_node.pauseSystemEvents(!0))},otherClicked:function(){this.playCancelAudio(),this.isShowFeed},rightBtnClick:function(){if(!this.isShowFeed&&!this.isShowAnim){this.isShowAnim=!0,this.playOptionAudio();var e=this,i=this.questionArr[this.nowQuestionID].foldable;this.startAnimation(function(t){t.clearScene(),e.selectAnswer(i)})}},wrongBtnClick:function(){if(!this.isShowFeed&&!this.isShowAnim){this.isShowAnim=!0,this.playOptionAudio();var e=this,i=this.questionArr[this.nowQuestionID].foldable;this.startAnimation(function(t){t.clearScene(),e.selectAnswer(!i)})}},checkIsEmpty:function(){var t=this.option_node.children,n=!0;return t.forEach(function(t,e){var i=t.getComponent("OptionJS");i&&1<i.state&&(n=!1)},this),n},playWinAudio:function(){this.playAudio(this.winAudio)},playLoseAudio:function(){this.playAudio(this.loseAudio)},playCancelAudio:function(){this.playAudio(this.resetAudio)},playOptionAudio:function(){this.playAudio(this.optionAudio)},playOptionOutAudio:function(){this.playAudio(this.option_outAudio)},playFoldAudio:function(){this.playAudio(this.option_foldAudio)},playAudio:function(t){AUDIO_OPEN&&cc.audioEngine.play(t,!1,1)},startAnimation:function(n){this.box.setAnimationHandler(function(t){var e=this.box.getBoxObject();if(e.rotation.y<=.3)e.rotation.y+=.01,e.rotation.x-=.02;else{this.playFoldAudio(),this.box.setAnimationHandler(null);var i=this;this.box.fold(function(){setTimeout(function(){"function"==typeof n&&n(i.box)},1e3)})}this.box.render()}.bind(this))},update:function(){this.box&&this.box.update()}}),cc._RF.pop()},{BaseGameJS:"BaseGameJS"}],LocalSaveJS:[function(t,e,i){"use strict";cc._RF.push(e,"f4c57nVhA1DEK8uDdBUQDFX","LocalSaveJS"),cc.Class({extends:cc.Component,properties:{},save:function(t,e){var i=cc.sys.localStorage;i?function(t,e,i){var n="";null!=i&&(n="; expires="+(n=new Date((new Date).getTime()+1e3*i)).toGMTString());n+="; path=/",document.cookie=t+"="+escape(e)+n}(t,e):i.setItem(t,e)},load:function(t){var e=cc.sys.localStorage;return e?function(t){var e="",i=t+"=";if(0<document.cookie.length){var n=document.cookie.indexOf(i);if(-1!=n){n+=i.length;var o=document.cookie.indexOf(";",n);-1==o&&(o=document.cookie.length),e=unescape(document.cookie.substring(n,o))}}return e}(t):e.getItem(t)}}),cc._RF.pop()},{}],NetworkJS_Data:[function(t,e,i){"use strict";cc._RF.push(e,"8febaBdc6ZNMK6NnHe3UpZb","NetworkJS_Data");var n=t("NetworkJS");cc.Class({extends:n,properties:{},analysisDict:function(t){var e=t.interactiveJson;if(e&&0!=e.length){"string"==typeof e&&(e=JSON.parse(e));for(var i=t.optionandanswers[0],n=i.options,o=[],s=0;s<n.length;++s){var a=n[s],c=a.optioncontent,r={optionNo:a.optionno,optionContent:this.removeSpan(c),optioncontimg:a.optioncontimg,optionFlip:this.removeSpan(c)};o.push(r)}var h=t.quescontimg;if(e.rightAry&&e.questionAry&&e.optionCount&&e.countDown||this.gameLoadFailed(2),o||0<o.length)return{answerTime:"0",levelQuestionDetailID:t.questionid,leveLQuestionDetailNum:t.orderid,qescont:this.removeSpan(t.qescont),optionsArr:o,rightOptionNo:this.removeSpan(i.rightanswer),questionPositon:e.questionPositon,quescontimgAry:h,question_img:0<h.length&&h[0],answer_img:1<h.length&&h[1],answer_finish:2<h.length&&h[2],interactiveJson:e,foldable:e.foldable,camera:e.camera,controls:e.controls,planes:e.planes,transform:e.transform};this.gameLoadFailed(2)}else this.gameLoadFailed(2)}}),cc._RF.pop()},{NetworkJS:"NetworkJS"}],NetworkJS:[function(t,e,i){"use strict";cc._RF.push(e,"cd804MyCfRHi4BLiy+Orkth","NetworkJS");cc.Class({extends:cc.Component,properties:{},GetQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null},sendXHR:function(t){this.racingjs=t;var e=cc.loader.getXMLHttpRequest();this.streamXHREventsToLabel(e,"GET");var i=this.GetQueryString("fileUrl");e.open("GET",i),cc.sys.isNative&&e.setRequestHeader("Accept-Encoding","gzip,deflate"),e.timeout=6e4,e.send()},streamXHREventsToLabel:function(t,e,i){var n=i||function(t){return e+" Response: "+t.substring(0,30)+"..."},o=this;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(CONSOLE_LOG_OPEN&&console.log(n(t.responseText)),200===t.status?o.analysisData(t.responseText):(CONSOLE_LOG_OPEN&&console.log("There was a problem with the request."),o.gameLoadFailed(1)))}},analysisData:function(t){var e=JSON.parse(t);if(e||0<e.length){for(var i=[],n=0;n<e.length;++n){var o=this.analysisDict(e[n]);if(!o)break;i.push(o)}i&&0<i.length&&e.length==i.length?(this.racingjs.setPlatform(this.GetQueryString("platform")),this.racingjs.setGameName(this.GetQueryString("gameName")),this.racingjs.startLoadGame(i),this.gameLoadSuccess(i.length)):this.gameLoadFailed(2)}else this.gameLoadFailed(2)},analysisDict:function(t){var e=t.interactiveJson;if(e&&0!=e.length)return"string"==typeof e&&(e=JSON.parse(e)),{answerTime:"0",levelQuestionDetailID:t.questionid,leveLQuestionDetailNum:t.orderid,qescont:this.removeSpan(t.qescont),interactiveJson:e};this.gameLoadFailed(2)},removeSpan:function(t){var e=t.replace("<span>","");return e=e.replace("</span>","")},gameLoadFailed:function(t){if(1==t){var e=encodeURI("errcode=10001&errmsg=下载失败");window.location.href="optionBlank://gameLoadFailed?"+e}else{e=encodeURI("errcode=10002&errmsg=解析失败");window.location.href="optionBlank://gameLoadFailed?"+e}},gameLoadSuccess:function(t){var e=encodeURI("isShow=1&totalNumber="+t);window.location.href="optionBlank://gameLoadSuccess?"+e},gameOver:function(t){var e=encodeURI(JSON.stringify(t));window.location.href="optionBlank://gameOver?status=1&data="+e},gameLoadProgress:function(t,e){var i=encodeURI("nowNumber="+t+"&totalNumber="+e);window.location.href="optionBlank://gameLoadProgress?"+i}});cc._RF.pop()},{}],OptionJS1:[function(t,e,i){"use strict";cc._RF.push(e,"cec4fBlGJ1Nw5Qzjr1JzrRx","OptionJS1");var s=new cc.Enum({unable:0,nomal:1,right:2,wrong:3});cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.show=this.node.getChildByName("show"),this.anim=this.node.getChildByName("anim"),this.right=this.node.getChildByName("right"),this.wrong=this.node.getChildByName("wrong"),this.text=this.node.getChildByName("text");var t=this;document.addEventListener("resignActivePauseGame",function(){t.reloadState()})},reloadState:function(){},init:function(t,e,i,n){this.gameJS=t;var o=this;n?(this.text.active=!0,this.text.getComponent(cc.Label).string=e,cc.loader.loadRes("texture",cc.SpriteAtlas,function(t,e){var i=e.getSpriteFrame("fang2");o.show.getComponent(cc.Sprite).spriteFrame=i,cc.loader.releaseAsset("texture",cc.SpriteAtlas)}),this.state=s.unable,this.show.opacity=255,this.anim.opacity=0,this.right.opacity=0,this.wrong.opacity=0,this.updateState(!1)):(this.text.active=!1,this.text.getComponent(cc.Label).string="",cc.loader.loadRes("texture",cc.SpriteAtlas,function(t,e){var i=e.getSpriteFrame("fang1");o.show.getComponent(cc.Sprite).spriteFrame=i,cc.loader.releaseAsset("texture",cc.SpriteAtlas)}),this.state=s.nomal,this.show.opacity=255,this.anim.opacity=0,this.right.opacity=0,this.wrong.opacity=0)},optionClick:function(){this.updateState(!1),this.node.parent.pauseSystemEvents(!0),this.gameJS.playOptionAudio()},updateState:function(t){this.node.getComponent(cc.Button).interactable=t},resetState:function(){}}),cc._RF.pop()},{}],OptionJS:[function(t,e,i){"use strict";cc._RF.push(e,"f68b8bKtqdKzZB+uUCDXYlU","OptionJS");cc.Class({extends:cc.Component,properties:{parent_node:cc.Node,canMove:!1,exchangeParent:!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touch_start.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touch_move.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.touch_end.bind(this),this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touch_cancel.bind(this),this.node),this.audioPool=[];var t=this;document.addEventListener("resignActivePauseGame",function(){t.resetState()})},init:function(t,e,i){this.node.opacity=255,this.startx=this.node.x,this.starty=this.node.y,this.gameJS=t,this.option=e},touch_start:function(t){this.canMove=this.gameJS.changeMoveTag(this.node.tag),this.canMove&&(this.gameJS.playOptionAudio(),this.dragX=this.node.x,this.dragY=this.node.y,this.parent_node.zIndex=1)},touch_end:function(t){this.canMove&&(this.gameJS.playOptionOutAudio(),this.node.opacity=255,this.check()?this.optionClick():this.reloadState())},touch_move:function(t){if(this.canMove){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y;var i=t.getTouches(),n=this.node.parent.parent.parent,o=n.convertTouchToNodeSpaceAR(i[0]);Math.abs(o.x)<n.width/2-50&&Math.abs(o.y)<n.height/2-30||(CONSOLE_LOG_OPEN&&cc.log("出屏了"),this.reloadState())}},touch_cancel:function(t){this.canMove&&this.reloadState()},check:function(){return CONSOLE_LOG_OPEN&&cc.log("this.node.isCollisioned="+this.node.isCollisioned),this.node.isCollisioned},resetState:function(){},reloadState:function(){if(this.canMove=!1,this.exchangeParent){var t=this.node.convertToWorldSpaceAR(cc.p(0,0));this.node.parent=this.parent_node;var e=this.node.parent.convertToNodeSpaceAR(t);this.node.setPosition(e)}var i=cc.moveTo(this.calculateAnimTime(),cc.p(this.startx,this.starty));this.node.runAction(cc.sequence(i,cc.callFunc(function(){this.node.setPosition(this.startx,this.starty),this.parent_node.zIndex=0,this.updateState(!0),this.gameJS.changeMoveTag(0)},this)))},calculateAnimTime:function(){var t=cc.pDistance(this.node.position,cc.p(this.startx,this.starty))/1e3;return.3*(t=1<t?1:t)},optionClick:function(){if(this.exchangeParent){var t=this.node.convertToWorldSpaceAR(cc.p(0,0));this.setZindex(this.node),this.node.parent=this.sheepNode;var e=this.node.parent.convertToNodeSpaceAR(t);this.node.setPosition(e)}this.node.parent.zIndex=0,this.canMove=!1,this.gameJS.changeMoveTag(0)},updateState:function(t){t?this.node.resumeSystemEvents(!0):this.node.pauseSystemEvents(!0)}}),cc._RF.pop()},{}],QuestionNumJS:[function(t,e,i){"use strict";cc._RF.push(e,"511ccnUhPdEV5sMRHkmPNf2","QuestionNumJS"),cc.Class({extends:cc.Component,properties:{label:cc.Label,selected_node:cc.Node},onLoad:function(){this.isSelect=!1,this.sp=this.node.getComponent("cc.Sprite")},init:function(t,e){this.gameJS=t;var i=""+((this.idx=e)+1);this.label.string=i,this.selected_node.opacity=0},onClick:function(){this.gameJS.changQustion(this.idx)},setSelected:function(t){this.isSelect=t,this.selected_node.opacity=t?255:0}}),cc._RF.pop()},{}],QuestionNumListJS:[function(t,e,i){"use strict";cc._RF.push(e,"7a656I23ulAK7kDASga7f0X","QuestionNumListJS"),cc.Class({extends:cc.Component,properties:{lastBtn:cc.Node,nextBtn:cc.Node,quertionNum:cc.Prefab,questionNum_node:cc.Node},onLoad:function(){this.itemPool=new cc.NodePool,this.defaultLen=7,this.targetIdx=0,this.nowQuestionID=0,this.qusetionItemPool=new cc.NodePool,this.qusetionNumJSArr=[],this.selectedQusetionJS=null},init:function(t,e){this.maxlen=t,this.cb=e,t<this.defaultLen?(this.lastBtn.opacity=0,this.nextBtn.opacity=0):(this.lastBtn.opacity=255,this.nextBtn.opacity=255);for(var i=0;i<t;i++){var n=cc.instantiate(this.quertionNum),o=n.getComponent("QuestionNumJS");this.qusetionNumJSArr.push(n),o.init(this,i)}this.changeQustionList(),this.selectedQusetionJS=this.qusetionNumJSArr[this.nowQuestionID].getComponent("QuestionNumJS"),this.selectedQusetionJS.setSelected(!0)},clickLast:function(){this.targetIdx>=this.defaultLen&&(this.targetIdx-=this.defaultLen,this.changeQustionList())},clickNext:function(){this.targetIdx+this.defaultLen<this.maxlen&&(this.targetIdx+=this.defaultLen,this.changeQustionList())},changeQustionList:function(){this.questionNum_node.removeAllChildren();for(var t=this.targetIdx,e=Math.min(this.defaultLen,this.maxlen-t),i=0;i<e;i++){var n=this.qusetionNumJSArr[i+t];this.questionNum_node.addChild(n)}},changQustion:function(t){this.nowQuestionID=t,this.selectedQusetionJS.setSelected(!1),this.selectedQusetionJS=this.qusetionNumJSArr[t].getComponent("QuestionNumJS"),this.selectedQusetionJS.setSelected(!0);var e=this.cb;e&&e(t)},changeOptionEnable:function(){this.questionNum_node.resumeSystemEvents(!0)},changeOptionDisable:function(){this.questionNum_node.pauseSystemEvents(!0)}}),cc._RF.pop()},{}],TitleJS:[function(t,e,i){"use strict";cc._RF.push(e,"5b283IiR/BBgLkN+zazJigp","TitleJS"),cc.Class({extends:cc.Component,properties:{label:cc.Label},init:function(t){this.label.string=t}}),cc._RF.pop()},{}],config:[function(t,e,i){"use strict";cc._RF.push(e,"cf7e7Hjl8pBApNKVzaPXR0c","config"),window.CONSOLE_LOG_OPEN=!0,window.AUDIO_OPEN=!0,window.REQUEST_URL=!1,cc._RF.pop()},{}],efailed:[function(t,e,i){"use strict";cc._RF.push(e,"9b649czY5lPE5+Bb2VZOMm4","efailed"),cc.Class({extends:cc.Component,properties:{label:cc.Label},onLoad:function(){},showHint:function(){this.node.stopAllActions(),this.node.opacity=255,this.label.string="当前分类已经有了哦！";var t=cc.callFunc(function(t){this.node.opacity=0},this);this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeTo(.5,0),t))},showLimitHint:function(t){this.node.stopAllActions(),this.node.opacity=255,this.label.string="啊哦！本题最多只能选择"+t+"个瓶子哦！";var e=cc.callFunc(function(t){this.node.opacity=0},this);this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeTo(.5,0),e))},start:function(){}}),cc._RF.pop()},{}],pinyin:[function(t,e,i){"use strict";cc._RF.push(e,"48d50di7W9Lj5ZqwBg6B4xZ","pinyin");var c=cc.Enum({TOP:0,MIDDLE:1,BOTTOM:2}),a=cc.Enum({LEFT:0,CENTER:1,RIGHT:2});cc.Class({extends:cc.Component,properties:{calpinyin:cc.Node,calhanzi:cc.Node,calcontainer:cc.Node,hanzi:"",pinyin:"",maxwidth:1600,gap:20,verticalAlign:{type:c,default:c.MIDDLE},textAlign:{type:a,default:a.CENTER}},onLoad:function(){this.plPool=new cc.NodePool,this.hlPool=new cc.NodePool,this.refresh()},setData:function(t,e){this.hanzi=t,this.pinyin=e,this.refresh()},refresh:function(){var t=this.splitCString(this.hanzi),e=this.toLengthMap(t,this.calhanzi),i=this.toGroupHanzi(e);if(this.pinyin){var n=this.pinyin?this.pinyin.split(" "):[],o=this.toLengthMap(n,this.calpinyin),s=this.toGrouppinyin(i,o);this.createLabels(i,s)}else this.createLabelsH(i)},createLabels:function(t,e){var i=this,n=0;this.verticalAlign===c.TOP?n=0:this.verticalAlign===c.MIDDLE?n=+t.length/2*(this.calhanzi.height+this.calpinyin.height):this.verticalAlign===c.BOTTOM&&(n=+t.length*(this.calhanzi.height+this.calpinyin.height));for(var o=0;o<this.calcontainer.childrenCount;)0===this.calcontainer.children[0].tag?this.hlPool.put(this.calcontainer.children[0]):1===this.calcontainer.children[0].tag&&this.plPool.put(this.calcontainer.children[0]);var s,a;for(o=0;o<t.length;o++)t[o].forEach(function(t,e){(s=0<i.hlPool.size()?i.hlPool.get():cc.instantiate(i.calhanzi)).position=cc.p(t.x,n-o*(i.calhanzi.height+i.calpinyin.height)-i.calpinyin.height),s.getComponent(cc.Label).string=t.data,s.opacity=255,s.parent=i.calcontainer,s.tag=0}),e[o].forEach(function(t,e){(a=0<i.plPool.size()?i.plPool.get():cc.instantiate(i.calpinyin)).position=cc.p(t.x,n-o*(i.calhanzi.height+i.calpinyin.height)),a.getComponent(cc.Label).string=t.data,a.opacity=255,a.parent=i.calcontainer,a.tag=1})},createLabelsH:function(t){var i=this,n=0;this.verticalAlign===c.TOP?n=0:this.verticalAlign===c.MIDDLE?n=+t.length/2*this.calhanzi.height:this.verticalAlign===c.BOTTOM&&(n=+t.length*this.calhanzi.height);for(var o=0;o<this.calcontainer.childrenCount;)0===this.calcontainer.children[0].tag?this.hlPool.put(this.calcontainer.children[0]):1===this.calcontainer.children[0].tag&&this.plPool.put(this.calcontainer.children[0]);var s;for(o=0;o<t.length;o++)t[o].forEach(function(t,e){(s=0<i.hlPool.size()?i.hlPool.get():cc.instantiate(i.calhanzi)).position=cc.p(t.x,n-o*i.calhanzi.height),s.getComponent(cc.Label).string=t.data,s.opacity=255,s.parent=i.calcontainer,s.tag=0})},toGrouppinyin:function(t,e){var i=[];i.count=e.count;for(var n=0,o=0,s=[];n<t.length;n++){for(var a=0;a<t[n].length&&o+a<e.count;a++)s.push({data:e[o+a].data,length:e[o+a].length,x:t[n][a].x});i.push(s),s=[],0,o+=a}return i},toGroupHanzi:function(t){var e=[];e.count=t.count;for(var i=0,n=[],o=0;i<t.count;i++)o+t[i].length<this.maxwidth||(n.glength=o,e.push(n),n=[],o=0),t[i].x=o+t[i].length/2,n.push(t[i]),o+=t[i].length+this.gap;n&&(n.glength=o,e.push(n));var s;for(i=0;i<e.length;i++)this.textAlign===a.CENTER?s=e[i].glength/2:this.textAlign===a.LEFT?s=this.maxwidth/2:this.textAlign===a.RIGHT&&(s=e[i].glength-this.maxwidth/2),e[i].forEach(function(t){t.x=t.x-s});return e},toLengthMap:function(t,e){var i={};i.count=t instanceof Array?t.length:0;for(var n=0;t instanceof Array&&e instanceof cc.Node&&n<t.length;n++)i[n]={},i[n].data=t[n],e.getComponent(cc.Label).string=t[n],i[n].length=e.width;return i},splitCString:function(t){for(var e=[],i=0;"string"==typeof t&&i<t.length;i++)e.push(t.charAt(i));return e}}),cc._RF.pop()},{}],question_panel:[function(t,e,i){"use strict";cc._RF.push(e,"518c6EygmVF7aZ+N0GUpC9+","question_panel");var a=[];cc.Class({extends:cc.Component,properties:{oItemPrefab:cc.Prefab},onLoad:function(){this.oItemPool=new cc.NodePool},isEmpty:function(){return 0==a.length},copyAry:function(){var t=a.slice(0,a.length);return CONSOLE_LOG_OPEN&&console.log("questionAry.slice"+t+"  "+a),t},createOptions:function(){for(var t,e=0;e<a.length;e++){e==this.questionAry.length-1?(t=0<this.oItemPool.size()?this.oItemPool.get():cc.instantiate(this.oItemPrefab)).parent=this.node:t=this.node.children[e];var i=t.width,n=this.node.height,o=(e%3-1)*(i+15),s=e<3?n/3+10:e<6?30:-n/3+55;t.setPosition(cc.p(o,s))}},addOption:function(t){var e,i=this;e=t.slice(0,t.length),a.push(e.sort(_sortNumber)),i.createOptions(t),i.updateSum()},removeAllOption:function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].removeAllChildren(!0)}this.node.removeAllChildren(!0),a.splice(0,a.length),a=[],this.updateSum()},updateSum:function(){}}),cc._RF.pop()},{}],scalebg:[function(t,e,i){"use strict";cc._RF.push(e,"3093551zVpLp4AjCVzrt6iQ","scalebg"),cc.Class({extends:cc.Component,properties:{designSize:cc.Size,bg:cc.Node,lbg:cc.Node,rbg:cc.Node},onLoad:function(){var t=Math.max(cc.winSize.width/this.designSize.width,cc.winSize.height/this.designSize.height);this.node.setScale(t,1)}}),cc._RF.pop()},{}],scale:[function(t,e,i){"use strict";cc._RF.push(e,"521434wupJHAqZevOCVOyWl","scale"),cc.Class({extends:cc.Component,properties:{designSize:cc.Size},onLoad:function(){var t=Math.min(cc.winSize.width/this.designSize.width,cc.winSize.height/this.designSize.height);this.node.setScale(t,t)}}),cc._RF.pop()},{}],settlement:[function(t,e,i){"use strict";cc._RF.push(e,"dd759DqBqVEVoLQFj9axoqs","settlement");var n="happy",o="sad";cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.background=this.node.getChildByName("background"),this.scale=this.node.getChildByName("scale"),this.glow=this.scale.getChildByName("glow"),this.glowDots=this.scale.getChildByName("glow_dots"),this.title=this.scale.getChildByName("title"),this.cutes=this.scale.getChildByName("cutes")},playWinAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("win",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(n);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("win")},playLoseAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("lose",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(o);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("lose")},playTimeUpAnim:function(t){this.node.active=!0;var i=this;cc.loader.loadRes("time_up",cc.SpriteFrame,function(t,e){t?i.log(t):i.title.getComponent(cc.Sprite).spriteFrame=e}),this.playDBAnim(o);var e=this.node.getComponent(cc.Animation);this.scheduleOnce(function(){t.call(i.game)},1.5),e.play("lose")},playDBAnim:function(t){for(var e=this.cutes.children,i=0;i<e.length;i++)e[i].getChildByName("cute").getComponent(dragonBones.ArmatureDisplay).playAnimation(t,-1)},reset:function(){this.background.opacity=0,this.background.active=!1,this.glow.scaleX=0,this.glow.scaleY=0,this.glow.opacity=255,this.glowDots.active=!1,this.title.getComponent(cc.Sprite).spriteFrame=null;for(var t=this.cutes.children,e=0;e<t.length;e++)t[e].getChildByName("cute").getComponent(dragonBones.ArmatureDisplay).animationName=null;this.node.active=!1},log:function(t){CONSOLE_LOG_OPEN&&cc.log(t)}}),cc._RF.pop()},{}]},{},["BaseGameJS","LocalSaveJS","NetworkJS","ColliderListener","OptionJS","OptionJS1","QuestionNumJS","QuestionNumListJS","TitleJS","efailed","question_panel","settlement","GameJS","NetworkJS_Data","config","pinyin","scale","scalebg"]);