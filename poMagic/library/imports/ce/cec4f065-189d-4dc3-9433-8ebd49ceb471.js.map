{"version":3,"sources":["../../../../../assets/components/Options/assets/components/Options/OptionJS1.js"],"names":["scDuration","cc","Class","extends","Component","properties","parent_node","Node","canMove","onLoad","node","on","EventType","TOUCH_START","touch_start","bind","TOUCH_MOVE","touch_move","TOUCH_END","touch_end","TOUCH_CANCEL","touch_cancel","audioPool","self","init","gameJS","opacity","startx","x","starty","y","evt","pos","reloadState","update","dt","option_node","children","forEach","obj","idx","button","getChildByName","getComponent","setEysePos","delta","touch","getDelta","touches","getTouches","parentNode","parent","judgePos","convertTouchToNodeSpaceAR","getLocation","resetEyePos"],"mappings":"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","file":"OptionJS1.js","sourceRoot":"../../../../../assets/components/Options","sourcesContent":["var scDuration = 0.2;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        parent_node: cc.Node,\n        canMove: false,\n    },\n    onLoad: function () {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touch_start.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.touch_move.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touch_end.bind(this), this.node);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.touch_cancel.bind(this), this.node);\n        this.audioPool = [];\n        var self = this;\n        //等同于切后台监听\n    },\n\n    init: function (gameJS) {\n        this.node.opacity = 255;\n        this.startx = this.node.x;\n        this.starty = this.node.y;\n        this.gameJS = gameJS;\n\n    },\n    touch_start: function (evt) {\n        this.canMove = true;//this.gameJS.changeMoveTag(this.node.tag);\n        if (!this.canMove) {\n            return;\n        }\n        this.pos = null;\n    },\n    touch_end: function (evt) {\n        if (!this.canMove) {\n            return;\n        }\n        this.reloadState();\n       \n    },\n    update:function (dt) {//this.canMove &&\n        if (this.pos) {\n            // cc.log('this.pos1='+this.pos);\n             this.gameJS.option_node.children.forEach((obj, idx)=> {\n                 let button = obj.getChildByName('button_bg');\n                 button && button.getComponent('numSpineJs').setEysePos(this.pos);\n            },this);             \n        }\n    },\n\n    touch_move: function (evt) {\n        if (!this.canMove) {\n            return;\n        }\n        var delta = evt.touch.getDelta();\n        //出屏还原\n        var touches = evt.getTouches();\n        var parentNode = this.node.parent;\n        var judgePos = parentNode.convertTouchToNodeSpaceAR(touches[0]);\n            this.pos = evt.getLocation();//以0,0为起点的坐标\n      \n    },\n    touch_cancel: function (evt) {\n        if (!this.canMove) {\n            return;\n        }\n        this.reloadState();\n    },\n    reloadState: function () {\n        this.canMove = false; //防止超屏多次触发\n        // this.gameJS.changeMoveTag(0);\n        this.pos = null;\n        this.gameJS.option_node.children.forEach((obj, idx)=> {\n            let button = obj.getChildByName('button_bg');\n            button && button.getComponent('numSpineJs').resetEyePos();\n        },this);    \n    }\n   \n    \n   \n});"]}