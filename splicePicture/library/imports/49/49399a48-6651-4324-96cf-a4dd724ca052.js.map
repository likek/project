{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Flags.js"],"names":["cc","Class","extends","Component","properties","flagL","Node","flagR","option","Prefab","start","initData","data","gameJS","removeAllChildren","checkInitData","len","length","i","instantiate","imgNode","getChildByName","border","opacity","setScale","item","parent","addChild","console","log","sizeY","height","offset","loader","load","optioncontimg","err","res","spriteFrame","SpriteFrame","getComponent","Sprite","init","width","releaseAsset","x","y","CircleCollider","radius","Math","min","Array","isArray"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAOL,GAAGM,IADF,EACO;AACfC,eAAOP,GAAGM,IAFF;AAGRE,gBAAQR,GAAGS;AAHH,KAHP;;AASL;;AAEA;;AAEAC,SAbK,mBAaI,CAER,CAfI;;;AAiBL;;AAEAC,YAnBK,oBAmBIC,IAnBJ,EAmBSC,MAnBT,EAmBgB;AAAA;;AACjB,aAAKR,KAAL,CAAWS,iBAAX;AACA,aAAKP,KAAL,CAAWO,iBAAX;AACA,YAAG,CAAC,KAAKC,aAAL,CAAmBH,IAAnB,CAAJ,EAA6B;AAC7B,YAAII,MAAMJ,KAAKK,MAAL,GAAY,CAAtB;AACA,aAAI,IAAIC,IAAG,CAAX,EAAaA,IAAEN,KAAKK,MAApB,EAA2BC,GAA3B,EAA+B;AAC3B,aAAC,UAACA,CAAD,EAAK;AACF,oBAAIV,SAASR,GAAGmB,WAAH,CAAe,MAAKX,MAApB,CAAb;AACA,oBAAIY,UAAUZ,OAAOa,cAAP,CAAsB,WAAtB,CAAd;AACA,oBAAIC,SAASF,QAAQC,cAAR,CAAuB,QAAvB,CAAb;AACAC,uBAAOC,OAAP,GAAiB,CAAjB;AACAH,wBAAQI,QAAR,CAAiB,GAAjB;AACA,oBAAIC,OAAOb,KAAKM,CAAL,CAAX;AACA,oBAAIQ,SAASR,IAAIF,GAAJ,GAAU,MAAKX,KAAf,GAAuB,MAAKE,KAAzC;AACAmB,uBAAOC,QAAP,CAAgBnB,MAAhB;AACAoB,wBAAQC,GAAR,CAAYX,IAAIF,GAAJ,GAAU,YAAV,GAAyB,YAArC;AACA,oBAAIc,QAAQJ,OAAOK,MAAP,GAAc,GAA1B,CAVE,CAU4B;AAC9B,oBAAIC,SAASF,QAAMd,GAAnB;AACAhB,mBAAGiC,MAAH,CAAUC,IAAV,CAAeT,KAAKU,aAApB,EAAkC,UAACC,GAAD,EAAKC,GAAL,EAAW;AACzC,wBAAI,CAACD,GAAL,EAAU;AACN,4BAAIE,cAAc,IAAItC,GAAGuC,WAAP,CAAmBF,GAAnB,CAAlB;AACAjB,gCAAQoB,YAAR,CAAqBxC,GAAGyC,MAAxB,EAAgCH,WAAhC,GAA8CA,WAA9C;AACAlB,gCAAQoB,YAAR,CAAqB,UAArB,EAAiCE,IAAjC,CAAsC7B,MAAtC,EAA6CY,IAA7C;AACAH,+BAAOqB,KAAP,GAAevB,QAAQuB,KAAR,GAAgB,EAA/B;AACArB,+BAAOS,MAAP,GAAgBX,QAAQW,MAAR,GAAiB,EAAjC;AACA/B,2BAAGiC,MAAH,CAAUW,YAAV,CAAuBP,GAAvB;AACA7B,+BAAOqC,CAAP,GAAW,CAAX;AACArC,+BAAOsC,CAAP,GAAWd,UAAUd,IAAEF,GAAZ,IAAmBgB,SAAO,CAA1B,GAA8BF,QAAM,CAA/C;AACAV,gCAAQoB,YAAR,CAAqBxC,GAAG+C,cAAxB,EAAwCC,MAAxC,GAAiDC,KAAKC,GAAL,CAAS9B,QAAQW,MAAjB,EAAwBX,QAAQuB,KAAhC,IAAyC,KAAzC,GAAiD,CAAjD,GAAmD,GAApG;AACH;AACJ,iBAZD;AAaH,aAzBD,EAyBGzB,CAzBH;AA0BH;AACJ,KApDI;AAsDLH,iBAtDK,yBAsDSJ,QAtDT,EAsDkB;AACnB,eAAOwC,MAAMC,OAAN,CAAczC,QAAd,CAAP;AACH;AAxDI,CAAT","file":"Flags.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        flagL: cc.Node,//左边旗子\n        flagR: cc.Node,\n        option: cc.Prefab\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    initData(data,gameJS){\n        this.flagL.removeAllChildren();\n        this.flagR.removeAllChildren();\n        if(!this.checkInitData(data))return;\n        let len = data.length/2;\n        for(let i= 0;i<data.length;i++){\n            ((i)=>{\n                let option = cc.instantiate(this.option);\n                let imgNode = option.getChildByName(\"button_bg\");\n                let border = imgNode.getChildByName('border');\n                border.opacity = 0;\n                imgNode.setScale(0.7);\n                let item = data[i];\n                let parent = i < len ? this.flagL : this.flagR;\n                parent.addChild(option);\n                console.log(i < len ? \"this.flagL\" : \"this.flagR\")\n                let sizeY = parent.height*0.8;//放图片所需要的位置长度\n                let offset = sizeY/len;\n                cc.loader.load(item.optioncontimg,(err,res)=>{\n                    if (!err) {\n                        var spriteFrame = new cc.SpriteFrame(res);\n                        imgNode.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                        imgNode.getComponent(\"OptionJS\").init(gameJS,item);\n                        border.width = imgNode.width + 12;\n                        border.height = imgNode.height + 12;\n                        cc.loader.releaseAsset(res);\n                        option.x = 0;\n                        option.y = offset * (i%len) + offset/2 - sizeY/2;\n                        imgNode.getComponent(cc.CircleCollider).radius = Math.min(imgNode.height,imgNode.width) * 0.248 * 1/0.7;\n                    }\n                });\n            })(i);\n        }\n    },\n\n    checkInitData(initData){\n        return Array.isArray(initData);\n    }\n});\n"]}