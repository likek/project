{"version":3,"sources":["Flags.js"],"names":["cc","Class","extends","Component","properties","flagL","Node","flagR","option","Prefab","start","initData","data","gameJS","removeAllChildren","checkInitData","len","length","i","instantiate","imgNode","getChildByName","border","opacity","setScale","item","parent","addChild","sizeY","height","offset","getComponent","Sprite","spriteFrame","getSpriteFrame","optioncontimg","init","tag","width","x","y","CircleCollider","radius","Math","min","rotateDirection","random","rotateDegree","setRotation","Array","isArray"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAOL,GAAGM,IADF,EACO;AACfC,eAAOP,GAAGM,IAFF;AAGRE,gBAAQR,GAAGS;AAHH,KAHP;;AASL;;AAEA;;AAEAC,SAbK,mBAaI,CAER,CAfI;;;AAiBL;;AAEAC,YAnBK,oBAmBIC,IAnBJ,EAmBSC,MAnBT,EAmBgB;AACjB,aAAKR,KAAL,CAAWS,iBAAX;AACA,aAAKP,KAAL,CAAWO,iBAAX;AACA,YAAG,CAAC,KAAKC,aAAL,CAAmBH,IAAnB,CAAJ,EAA6B;AAC7B,YAAII,MAAMJ,KAAKK,MAAL,GAAY,CAAtB;AACA,aAAI,IAAIC,IAAG,CAAX,EAAaA,IAAEN,KAAKK,MAApB,EAA2BC,GAA3B,EAA+B;AAC3B,gBAAIV,SAASR,GAAGmB,WAAH,CAAe,KAAKX,MAApB,CAAb;AACA,gBAAIY,UAAUZ,OAAOa,cAAP,CAAsB,WAAtB,CAAd;AACA,gBAAIC,SAASF,QAAQC,cAAR,CAAuB,QAAvB,CAAb;AACAC,mBAAOC,OAAP,GAAiB,CAAjB;AACAH,oBAAQI,QAAR,CAAiB,GAAjB;AACA,gBAAIC,OAAOb,KAAKM,CAAL,CAAX;AACA,gBAAIQ,SAASR,IAAIF,GAAJ,GAAU,KAAKX,KAAf,GAAuB,KAAKE,KAAzC;AACAmB,mBAAOC,QAAP,CAAgBnB,MAAhB;AACA,gBAAIoB,QAAQF,OAAOG,MAAP,GAAc,GAA1B,CAT2B,CASG;AAC9B,gBAAIC,SAASF,QAAMZ,GAAnB;AACAI,oBAAQW,YAAR,CAAqB/B,GAAGgC,MAAxB,EAAgCC,WAAhC,GAA8CpB,OAAOqB,cAAP,CAAsBT,KAAKU,aAA3B,CAA9C;AACAf,oBAAQW,YAAR,CAAqB,UAArB,EAAiCK,IAAjC,CAAsCvB,MAAtC,EAA6CY,IAA7C;AACAL,oBAAQiB,GAAR,GAAc,MAAMnB,CAApB;AACAI,mBAAOgB,KAAP,GAAelB,QAAQkB,KAAR,GAAgB,EAA/B;AACAhB,mBAAOO,MAAP,GAAgBT,QAAQS,MAAR,GAAiB,EAAjC;AACArB,mBAAO+B,CAAP,GAAW,CAAX;AACA/B,mBAAOgC,CAAP,GAAWV,UAAUZ,IAAEF,GAAZ,IAAmBc,SAAO,CAA1B,GAA8BF,QAAM,CAA/C;AACAR,oBAAQW,YAAR,CAAqB/B,GAAGyC,cAAxB,EAAwCC,MAAxC,GAAiDC,KAAKC,GAAL,CAASxB,QAAQS,MAAjB,EAAwBT,QAAQkB,KAAhC,IAAyC,KAAzC,GAAiD,CAAjD,GAAmD,GAApG;AACA,gBAAIO,kBAAkBF,KAAKG,MAAL,KAAgB,GAAhB,GAAsB,CAAtB,GAA0B,CAAC,CAAjD;AACA,gBAAIC,eAAeJ,KAAKG,MAAL,KAAgB,EAAhB,GAAqBD,eAAxC;AACAzB,oBAAQ4B,WAAR,CAAoBD,YAApB;AACH;AACJ,KA/CI;AAiDLhC,iBAjDK,yBAiDSJ,QAjDT,EAiDkB;AACnB,eAAOsC,MAAMC,OAAN,CAAcvC,QAAd,CAAP;AACH;AAnDI,CAAT","file":"Flags.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        flagL: cc.Node,//左边旗子\n        flagR: cc.Node,\n        option: cc.Prefab\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    initData(data,gameJS){\n        this.flagL.removeAllChildren();\n        this.flagR.removeAllChildren();\n        if(!this.checkInitData(data))return;\n        let len = data.length/2;\n        for(let i= 0;i<data.length;i++){\n            let option = cc.instantiate(this.option);\n            let imgNode = option.getChildByName(\"button_bg\");\n            let border = imgNode.getChildByName('border');\n            border.opacity = 0;\n            imgNode.setScale(0.7);\n            let item = data[i];\n            let parent = i < len ? this.flagL : this.flagR;\n            parent.addChild(option);\n            let sizeY = parent.height*0.8;//放图片所需要的位置长度\n            let offset = sizeY/len;\n            imgNode.getComponent(cc.Sprite).spriteFrame = gameJS.getSpriteFrame(item.optioncontimg);\n            imgNode.getComponent(\"OptionJS\").init(gameJS,item);\n            imgNode.tag = 100 + i;\n            border.width = imgNode.width + 12;\n            border.height = imgNode.height + 12;\n            option.x = 0;\n            option.y = offset * (i%len) + offset/2 - sizeY/2;\n            imgNode.getComponent(cc.CircleCollider).radius = Math.min(imgNode.height,imgNode.width) * 0.248 * 1/0.7;\n            let rotateDirection = Math.random() < 0.5 ? 1 : -1;\n            let rotateDegree = Math.random() * 20 * rotateDirection;\n            imgNode.setRotation(rotateDegree);\n        }\n    },\n\n    checkInitData(initData){\n        return Array.isArray(initData);\n    }\n});\n"]}