{"version":3,"sources":["settlement.js"],"names":["DB_ANIM_ASSET","cc","Class","extends","Component","properties","failSpine","Node","successSpine","timeOutSpine","onLoad","background","node","getChildByName","scale","playWinAnim","callback","active","getComponent","setAnimation","that","scheduleOnce","call","game","playLoseAnim","playTimeUpAnim","reset","log","msg","CONSOLE_LOG_OPEN"],"mappings":";;;;;;AAAA,IAAIA,gBAAgB;AAChB,WAAO,OADS;AAEhB,YAAQ;AAFQ,CAApB;;AAKAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAYL,GAAGM,IADP;AAERC,sBAAeP,GAAGM,IAFV;AAGRE,sBAAeR,GAAGM;AAHV,KAHP;;AASL;AACAG,YAAQ,kBAAY;AAChB,aAAKC,UAAL,GAAkB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,YAAzB,CAAlB;AACA,aAAKC,KAAL,GAAa,KAAKF,IAAL,CAAUC,cAAV,CAAyB,OAAzB,CAAb;AACH,KAbI;;AAeL;AACAE,iBAAa,qBAASC,QAAT,EAAkB;AAC3B,aAAKJ,IAAL,CAAUK,MAAV,GAAmB,IAAnB;AACA,aAAKT,YAAL,CAAkBS,MAAlB,GAA2B,IAA3B;AACA,aAAKT,YAAL,CAAkBU,YAAlB,CAA+B,aAA/B,EAA8CC,YAA9C,CAA2D,CAA3D,EAA6D,WAA7D,EAAyE,KAAzE;AACA,YAAIC,OAAO,IAAX;AACA,aAAKC,YAAL,CAAkB,YAAU;AACxBL,qBAASM,IAAT,CAAcF,KAAKG,IAAnB;AACH,SAFD,EAEE,GAFF;AAGH,KAxBI;;AA0BL;AACAC,kBAAc,sBAASR,QAAT,EAAkB;;AAE5B,aAAKJ,IAAL,CAAUK,MAAV,GAAmB,IAAnB;AACA,aAAKX,SAAL,CAAeW,MAAf,GAAwB,IAAxB;AACA,aAAKX,SAAL,CAAeY,YAAf,CAA4B,aAA5B,EAA2CC,YAA3C,CAAwD,CAAxD,EAA0D,WAA1D,EAAsE,KAAtE;AACA,YAAIC,OAAO,IAAX;;AAEA,aAAKC,YAAL,CAAkB,YAAU;AACxBL,qBAASM,IAAT,CAAcF,KAAKG,IAAnB;AACH,SAFD,EAEG,GAFH;AAIH,KAtCI;;AAwCL;AACAE,oBAAgB,wBAAST,QAAT,EAAkB;;AAE9B,aAAKJ,IAAL,CAAUK,MAAV,GAAmB,IAAnB;AACA,aAAKR,YAAL,CAAkBQ,MAAlB,GAA2B,IAA3B;AACA,aAAKR,YAAL,CAAkBS,YAAlB,CAA+B,aAA/B,EAA8CC,YAA9C,CAA2D,CAA3D,EAA6D,WAA7D,EAAyE,KAAzE;AACA,YAAIC,OAAO,IAAX;;AAEA,aAAKC,YAAL,CAAkB,YAAU;AACxBL,qBAASM,IAAT,CAAcF,KAAKG,IAAnB;AACH,SAFD,EAEE,CAFF;AAIH,KApDI;;AAsDL;AACAG,WAAO,iBAAU;AACb;AACA,aAAKpB,SAAL,CAAeW,MAAf,GAAwB,KAAxB;AACA,aAAKT,YAAL,CAAkBS,MAAlB,GAA2B,KAA3B;AACA,aAAKR,YAAL,CAAkBQ,MAAlB,GAA2B,KAA3B;AACA,aAAKL,IAAL,CAAUK,MAAV,GAAmB,KAAnB;AACH,KA7DI;;AA+DLU,SAAK,aAASC,GAAT,EAAa;AACd,YAAGC,gBAAH,EAAoB5B,GAAG0B,GAAH,CAAOC,GAAP;AACvB;;AAGD;AACA;;AAEA;AAvEK,CAAT","file":"settlement.js","sourceRoot":"../../../../../assets/components/settlement","sourcesContent":["let DB_ANIM_ASSET = {\n    'win': 'happy',\n    'lose': 'tear'\n};\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        failSpine : cc.Node,\n        successSpine : cc.Node,\n        timeOutSpine : cc.Node,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.background = this.node.getChildByName('background');\n        this.scale = this.node.getChildByName('scale');\n    },\n\n    //播放获胜动画\n    playWinAnim: function(callback){\n        this.node.active = true;\n        this.successSpine.active = true  \n        this.successSpine.getComponent(\"sp.Skeleton\").setAnimation(0,\"animation\",false)\n        let that = this \n        this.scheduleOnce(function(){\n            callback.call(that.game);\n        },2.5); \n    }, \n\n    //播放失败动画\n    playLoseAnim: function(callback){\n        \n        this.node.active = true;\n        this.failSpine.active = true \n        this.failSpine.getComponent(\"sp.Skeleton\").setAnimation(0,\"animation\",false)\n        let that = this \n\n        this.scheduleOnce(function(){\n            callback.call(that.game);\n        }, 2.5);\n\n    },\n\n    //播放失败动画\n    playTimeUpAnim: function(callback){\n\n        this.node.active = true;\n        this.timeOutSpine.active = true  \n        this.timeOutSpine.getComponent(\"sp.Skeleton\").setAnimation(0,\"animation\",false)\n        let that = this \n\n        this.scheduleOnce(function(){\n            callback.call(that.game);\n        },1);\n\n    },\n    \n    //重置\n    reset: function(){\n        // this.background.active= false;\n        this.failSpine.active = false \n        this.successSpine.active = false \n        this.timeOutSpine.active = false \n        this.node.active = false;\n    },\n\n    log: function(msg){\n        if(CONSOLE_LOG_OPEN)cc.log(msg);\n    },\n\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}